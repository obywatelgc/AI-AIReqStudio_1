:imagesdir: images


= Formaty danych i struktury plików

Bieżący rozdział zawiera opis formatów danych, jak i struktury importowanych oraz eksportowanych plików.

== Formaty danych

System Asseco EBP pozwala na import/eksport danych w różnych stałych oraz definiowanych formatach plików. Poniżej przedstawione są dostępne formaty danych przeznaczone dla importu danych, z podziałem na poszczególne opcje systemu.

Format importu przelewów zwykłych:

* XML,
* Elixir,
* Liniowy,
* Telekonto,
* Videotel.

Format importu przelewów podatku:

* XML,
* Elixir,
* Liniowy,
* ISO20022.

Format importu przelewów walutowych:

* ISO20022,
* MT103.

Format importu szablonów:

* XML,
* Liniowy,
* Telekonto.

Format importu szablonów przelewów walutowych:

* XML,
* Liniowy.

Format eksportu historii operacji:

* XML,
* Liniowy,
* MT940,
* MT940/MultiCash,
* CSV.

Format eksportu historii operacji z wielu rachunków:

* XML,
* Liniowy,
* MT940,
* MT940/MultiCash,
* CSV.

Format eksportu wyciągów:

* XML,
* XML (format CEB),
* Liniowy,
* MT940,
* MT940_1
* MT940 (bez podziału)
* MT940/MultiCash,
* MT940 SABA,
* MT940/MultiCash (format CEB),
* MT940_WIRT
* CSV
* JPK_WB

Format eksportu statusów przelewów:

* XML,
* Liniowy,
* CSV.

Format eksportu analityki płatności masowych:

* XML,
* XML (format CEB)
* Liniowy,
* MT940,
* MT940/MultiCash,
* MT942/MultiCash,
* MT942 (format CEB),
* MT942 zbiorczy (format CEB),
* CSV.


Formaty plików XML, XML (format CEB) Elixir, Videotel, Telekonto, MT940, MT940/MultiCash, MT942/MultiCash, MT942 (format CEB), MT942 zbiorczy (foramt CEB) i JPK_WB mają stałą określoną strukturę. Format pliku Liniowy zależy od zaimportowanej struktury z pliku "SCHEMA.INI".

Dla danych w formacie XML niedozwolone są następujące znaki: '&', '<'. Jeśli w pliku XML wystąpią takie znaki będzie on traktowany jako niepoprawny. Dla powyższych znaków należy koniecznie zastosowac następujące zamienniki:

[source, xml]
----
'&' - &amp;
'<' - &lt;
----

W przeciwnym wypadku zostaną uznane za nieprawidłowe podczas importu.

Dla danych eksportowanych w formacie MT940, MT940/MC, MT942 (również format CEB i zbiorczy format CEB) niedozwolone są następujące znaki: `!@#$%^&*_=[];<>\ääööüüß +
Jeśli w treści eksportowanego pliku wystąpią takie znaki, zostaną one usunięte.


NOTE: W ustawieniach importu i eksportu dostęna jest opcja: "Uwzględnij datę księgowania" (domyślnie jest odznaczona). Użytkownik może zdecydować, czy w eksportowanym pliku MT940, MT940/MC, MT942, XML, XML (format CEB) lub Liniowym będzie eksportowana wartość daty księgowania. Parametr nie ma wpływu na zawartość pliku CSV.

== Struktury plików

Poniżej opisane są poszczególne struktury plików obsługiwane przez system wraz dokładnym opisem każdego pola. Dla każdej struktury podany jest przykład.

=== Struktury plików importu przelewów zwykłych oraz podatku
==== Plik w formacie XML

Dla pliku przelewów w formacie XML dozwolone jest stosowanie następujących tagów:

[cols="3,5",options="header",]
|===========================================================
|Tagi |Opis
|<przelewy></przelewy>|Otwiera i zamyka format importu w XML.
|<przelew></przelew>	|Otwiera i zamyka dane dla jednego przelewu.
|<rach_obc></rach_obc>	|Numer rachunku nadawcy przelewu.
|<bank></bank>|Numer banku odbiorcy przelewu.
|<rachunek></rachunek>|Numer rachunku odbiorcy przelewu.
|<nazwa></nazwa>	|Nazwa odbiorcy przelewu.
|<kwota></kwota>	|Kwota przelewu.
|<tresc></tresc>	|Treść przelewu.
|<nip_odb></nip_odb>	|NIP odbiorcy.
|===========================================================

Każde powtórzenie tagów <przelew> ... </przelew> jest interpretowane przez aplikację jako nowy przelew.

WARNING: Nazwy tagów w opisie struktury powinny być pisane małymi literami. Kolejność poszczególnych tagów w pliku musi być zachowana.

Polskie znaki są kodowane w formacie ISO 8859-2 lub WINDOWS-1250.

[underline]##Przykładowa zawartość pliku importu przelewów zwykłych w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<przelewy>
<przelew>
    <rach_obc>80216000032999000002100005</rach_obc>
    <bank>10800001</bank>
    <rachunek>95103010453335457952126563</rachunek>
    <nazwa>Janina Testowa</nazwa>
    <kwota>15</kwota>
    <tresc>faktura nr 12345</tresc>
</przelew>
<przelew>
    <referencje>ReferencjeZwykly2</referencje>
    <rach_obc>80216000032999000002100005</rach_obc>
    <bank>10800001</bank>
    <rachunek>63108000011232123211548412</rachunek>
    <nazwa>Piotr Testowy ul. Testowa 1</nazwa>
    <kwota>73.12</kwota>
    <nip_odb>5220003782</nip_odb>
    <tresc>oplata za wynajecie mieszkania</tresc>
</przelew>
</przelewy>
----

NOTE: Format importu Listy płac w formacie XML, jest taki sam jak dla przelewów zwykłych. Użycie tagów <data></data> dla wskazania daty realizacji będzie pomijane i importowane przelewy zapiszą się zgodnie z datą bieżącą (COT również nie jest weryfikowany).


*Przelewy podatku*

Dla pliku przelewów podatku w formacie XML dozwolone jest stosowanie następujących tagów:

[cols="3,5",options="header",]
|===========================================================
|Tagi |Opis
|<przelewy></przelewy>|Otwiera i zamyka format importu w XML.
|<przelew></przelew>	|Otwiera i zamyka dane dla jednego przelewu.
|<rach_obc></rach_obc>	|Numer rachunku nadawcy przelewu.
|<bank></bank>|Numer banku odbiorcy przelewu.
|<rachunek></rachunek>|Numer rachunku odbiorcy przelewu.
|<nazwa></nazwa>	|Nazwa odbiorcy przelewu, w przypadku przelewu podatkowego - nazwa Urzędu Skarbowego.
|<kwota></kwota>	|Kwota przelewu.
|<tresc></tresc>	|Treść przelewu. Dla przelewu do US (tekst TI, OKR, SFP, TXT jest staly) /TI/typ identyfikatora numer identyfikatora/OKR/okres w formacie RRTXXxx, gdzie RR - rok, T - oznaczenie typu(R - rok, P - polrocze, K - kwartal, M - miesiac, D - dekada, J - dzien), XXxx - oznaczenie polrocza, kwartalu, miesiaca i dekady lub miesiaca i dnia/SFP/symbol formularza/TXT/identyfikacja wplaty.
|===========================================================

Każde powtórzenie tagów *<przelew> ... </przelew>* jest interpretowane przez aplikację jako nowy przelew.

Polskie znaki są kodowane w formacie ISO 8859-2 lub WINDOWS-1250.

[underline]##Przykładowa zawartość pliku importu przelewów podatku w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<przelewy>
<przelew>
    <rach_obc>80216000032999000002100005</rach_obc>
    <bank>10800001</bank>
    <rachunek>98101010780024112222000000</rachunek>
    <nazwa>Urzad Skarbowy</nazwa>
    <kwota>123.10</kwota>
    <tresc>/TI/N8000007816|/OKR/04R/SFP/VAT-8|/TXT/podatek</tresc>
</przelew>
</przelewy>
----

[underline]##Przykładowa zawartość pliku importu przelewu VAT w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<przelewy>
<przelew>
    <rach_obc>35 1610 1133 2003 0220 0002 0004</rach_obc>
    <bank>13200006</bank>
    <rachunek>55132000061234567890123456</rachunek>
    <nazwa>Jan Testowy</nazwa>
    <kwota>2.20</kwota>
    <tresc>/VAT/1.00/IDC/Identyfikator/INV/Faktura/TXT/tytuł</tresc>
</przelew>
</przelewy>
----

Dla przelewu VAT pole *tresc* ma następującą strukturę:

* */VAT/* - znacznik który określa dany przelew jako przelew VAT/1,00/kwota przelewu VAT,
* */IDC/* - typ dokumentu identyfikacji podatkowej, znacznik w polu *tresc* który określa przelew jako przelew VAT/Identyfikator/numer identyfikatora podatkowego,
* */INV/* - faktura, znacznik który warunkuje przelew jako przelew VAT/ Faktura/numer faktury,
* */TXT/* - tekst wolny, pole nieobowiązkowe/tytuł/tytuł przelewu.

Istnieje również możliwość importu przelewu VAT w formacie XML w osobnych znacznikach:

[cols="5,5",options="header",]
|===========================================================
|Tagi |Opis
|<kwota_vat></kwota_vat> |Kwota VAT.
|<inv></inv> |Numer faktury.
|<idc></idc> |Identyfikator podatkowy.
|===========================================================

[underline]##Przykładowa zawartość pliku importu przelewu VAT w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<przelewy>
<przelew>
    <rach_obc>43 8809 0005 2001 0002 7900 0001</rach_obc>
    <bank>13200006</bank>
    <rachunek>55132000061234567890123456</rachunek>
    <nazwa>Jan Testowy</nazwa>
    <kwota>2.20</kwota>
    <kwota_vat>2</kwota_vat>
    <inv>123</inv>
    <idc>123456789</idc>
    <tresc>przelew vat</tresc>
</przelew>
</przelewy>
----

NOTE: W przypadku importu przelewów VAT, jeśli pole tytuł jest odpowiednio sformatowane, to ma ono wyższy priorytet niż użycie dodatkowych znaczników.

==== Plik w formacie Elixir

*Plik z przelewami zwykłymi*

Plik z przelewami do importu jest zapisany w formacie tekstowym. Każde zlecenie przelewu zajmuje jedną linię (jeden rekord) zakończoną znakiem <CRLF>.
Każdy rekord jest złożony z 17 pól. Pola są oddzielone separatorem. Separatorem jest przecinek. Pola występują w ustalonej kolejności, opisanej w części Struktura rekordu. Pola tekstowe są objęte cudzysłowami. Pola tekstowe, dla których nie jest przekazywana wartość, są zapisane jako pusty string “ “. Puste pola końcowe rekordu mogą zostać pominięte.
Znakiem podziału linii w obrębie pola jest znak „|”.
Wszystkie rachunki nadawców muszą istnieć w bazie danych.
Polskie znaki są kodowane w ISO 8859-2 lub WINDOWS-1250.

[underline]##Struktura rekordu:##
Rekord danych musi mieć strukturę zgodną ze strukturą pliku przecinkowego Elixir.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, wartością jest liczba całkowita +
*D* - data w formacie RRRRMMDD, gdzie RRRR - rok, MM - miesiąc, DD - dzień (np. 20060501). +
*C* - pole tekstowe. Dozwolone znaki zgodne z wymaganiami systemu Elixir. Rozmiar pola 4*35 oznacza że pole może zawierać maksymalnie 4 linie po 35 znaków , nie wliczając znaków podziału linii. +
*K* - pole zawierające kwotę. Kwota wyrażona w groszach. Nie może zawierać żadnych separatorów dla części ułamkowej ani separatorów tysięcy. +
[underline]##Przykład:## 150 zł należy zapisać jako 15000, 10 zł 90 gr jako 1090, zapis 50 oznacza kwotę 50 gr.

Do systemu Asseco EBP wczytywane są pola o statusie _M_. Pola o statusie _O_ są pomijane przy wczytywaniu pliku do Asseco EBP.

[width="100%",cols="4,5,4,4,3,5,13",options="header,footer"]
|====================
|*Kolejność pola w rekordzie* |*Pole wg Elixir* |*Format* |*Rozmiar* |*Status pola* |*Pole w Asseco EBP* |*Opis pola w Asseco EBP*
|1 |Typ komunikatu |N |3 |O |- | Pole pomijane przy wczytywaniu do Asseco EBP
|2 |Data transakcji |D |8 |M |DATA |Data zlecenia. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|3 |Kwota |K |15 |M |KWOTA |Kwota zlecenia. Waluta domyślnie przyjmowana jako PLN. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|4 |Nr jednostki prezentującej |N |8 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|5 |Nr jednostki odbierającej |N |8 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|6 |Rachunek klienta nadawcy |C |34 |M |RACH_OBC |Numer rachunku nadawcy. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|7 |Rachunek klienta adresata |C |34 |M |RACHUNEK |Numer rachunku beneficjenta. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|8 |Nazwa klienta nadawcy |C |4*35 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|9 |Nazwa klienta adresata |C |4*35 |M |NAZWA |Nazwa beneficjenta. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|10 |Numer nadawcy uczestnika pośredniego |N |8 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|11 |Numer oddziału – finalny adresat |N |8 |M |BANK |Bank beneficjenta. Pole nie jest obowiązkowe, można przekazać wartość pustą.
|12 |Informacje dodatkowe |C |4*35 |M |TRESC |Tytuł płatności przelewu. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|13 |Numer czeku |C |10 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|14 |Szczegóły reklamacji |C |4*35 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|15 |Dodatkowa identyfikacja spraw |C |34 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|16 |Informacje międzybankowe |C |16 |M |REFERENCJE |Dodatkowy identyfikator przelewu - referencje. Pole nie jest obowiązkowe - można przekazać wartość pustą.
|17 |Dowolny tekst |C |35 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|====================


[underline]##Przykładowa zawartość pliku importu przelewów zwykłych formacie Elixir:##

[source, elixir]
----
110,20060526,10,,,"32156000132005000001720001","51101010231234567890123456","","Spoldzielnia Pracy Testowa|Zaklad Pracy Chronionej",15600001,10101023,"Zaplata za fakture| nr 2006-01-01","","","51","ref1-2006",""
,20060527,2000,,,"32156000132005000001720001","48835500091234567890123456","","Zaklad Testowy| Jan Kowalski Test| Warszawa ul. D1",15600001,10101023,"Zaplata za usługe","","","51","usluga1/2006",""
110,20060527,2000,,,"32156000132005000001720001","48835500091234567890123456","","Telekomunikacja Polska",,83550009,"Zaplata za usluge","","","","Faktura vat 0605/12345",""
110,20060527,2000,,,"32156000132005000001720001","48835500091234567890123456","","Telekomunikacja Polska",,,"Usluga instalacyjna","","","","",""
,20060527,3000,,,"32156000132005000001720001","48835500091234567890123456","","Telekomunikacja Polska",,,"Usluga instalacyjna"
----

NOTE: Format importu Listy płac w formacie Elixir, jest taki sam jak dla przelewów zwykłych. Pozycja dotycząca daty będzie pomijana i importowane przelewy zapiszą się zgodnie z datą bieżącą (COT również nie jest weryfikowany).


*Plik z przelewami podatku*

Plik z przelewami podatku jest zapisany w formacie tekstowym. Każde zlecenie przelewu zajmuje jedną linię (jeden rekord) zakończoną znakiem <CRLF>.
Każdy rekord jest złożony z 17 pól. Pola występują w ustalonej kolejności opisanej w części Struktura rekordu. Pola są oddzielone separatorem. Separatorem jest przecinek.
Pola tekstowe są objęte cudzysłowami. Pola tekstowe, dla których nie jest przekazywana wartość, są zapisane jako pusty string " ". Puste pola końcowe rekordu mogą zostać pominięte. Znakiem podziału linii w obrębie pola jest znak "|". Wszystkie rachunki nadawców muszą istnieć w bazie danych.
Polskie znaki są kodowane w formacie ISO 8859-2 lub WINDOWS-1250.

[underline]##Struktura rekordu:##
Rekord danych musi mieć strukturę zgodną ze strukturą pliku przecinkowego Elixir.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, wartością jest liczba całkowita. +
*D* - data w formacie RRRRMMDD, gdzie RRRR - rok, MM - miesiąc, DD - dzień (np. 20060501). +
*C* - pole tekstowe. Dozwolone znaki zgodne z wymaganiami systemu Elixir. Rozmiar pola 4*35 oznacza że pole może zawierać maksymalnie 4 linie po 35 znaków, nie wliczając znaków podziału linii. +
*K* - pole zawierające kwotę. Kwota wyrażona w groszach. Nie może zawierać żadnych separatorów dla części ułamkowej ani separatorów tysięcy. +
[underline]##Przykład:## 150 zł należy zapisać jako 15000, 10 zł 90 gr jako 1090, zapis 50 oznacza kwotę 50 gr.

Do systemu Asseco EBP wczytywane są pola o statusie _M_. Pola o statusie _O_ są pomijane przy wczytywaniu pliku do Asseco EBP.

[width="100%",cols="4,5,4,4,3,5,13",options="header,footer"]
|====================
|*Kolejność pola w rekordzie* |*Pole wg Elixir* |*Format* |*Rozmiar* |*Status pola* |*Pole w Asseco EBP* |*Opis pola w Asseco EBP*
|1 |Typ komunikatu |N |3 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|2 |Data transakcji |D |8 |M |DATA |Data zlecenia. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|3 |Kwota |K |15 |M |KWOTA |Kwota zlecenia. Waluta domyślnie przyjmowana jako PLN. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|4 |Nr jednostki prezentującej |N |8 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|5 |Nr jednostki odbierającej |N |8 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|6 |Rachunek klienta nadawcy |C |34 |M |RACH_OBC |Numer rachunku nadawcy. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|7 |Rachunek klienta adresata |C |34 |M |RACHUNEK |Numer rachunku dla płatności podatku. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|8 |Nazwa klienta nadawcy |C |4*35 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|9 |Nazwa klienta adresata |C |4*35 |M |NAZWA |Nazwa beneficjenta dla płatności podatku. Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|10 |Numer nadawcy uczestnika pośredniego |N |8 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|11 |Numer oddziału – finalny adresat |N |8 |M |BANK |Bank beneficjenta dla płatności podatku. Pole nie jest obowiązkowe, można przekazać wartość pustą.
|12 |Informacje dodatkowe |C |4*35 |M |TRESC1 |Informacje o płatności podatku – typ i zawartość identyfikatora, okres za który dokonywana jest płatność, symbol formularza lub tytuł płatności, opis płatności.
Pole obowiązkowe, konieczne jest przekazanie ważnej wartości.
|13 |Numer czeku |C |10 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|14 |Szczegóły reklamacji |C |4*35 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|15 |Dodatkowa identyfikacja spraw |C |34 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|16 |Informacje międzybankowe |C |16 |M |REFERENCJE |Dodatkowy identyfikator przelewu – referencje. Pole nie jest obowiązkowe- można przekazać wartość pustą.
|17 |Dowolny tekst |C |35 |O |- |Pole pomijane przy wczytywaniu do Asseco EBP
|====================

1 - Sposób wypełniania pola *TRESC* jest zgodny z zasadami obowiązującymi dla Elixir.

W polu należy wprowadzić jednym ciągiem:
Słowo kodowe /TI/, typ identyfikatora (1X) i zawartość identyfikatora (14X)
Słowo kodowe /OKR/ i okres za który dokonywana jest płatność (7X)
Słowo kodowe /SFP/ i symbol formularza lub płatności (7X)
Słowo kodowe /TXT/ i opcjonalnie tytuł płatności (40X)

*OKR* - Okres, którego dotyczy płatność podatku: +
      RR – dwie od prawej cyfry roku. +
      T – typ okresu, dopuszczalny jeden ze znaków: M,P,R,K,D,J, gdzie: M - miesiąc, P - półrocze, R - rok, K - kwartał, D - dekada, J - dzień. +
      NNNN – numer okresu, zgodny z typem okresu. +
      Wartości zgodne z maskami: rrR, rrKkk, rrMmm, rrDddmm, rrJjjmm, gdzie: - rr - numer roku (ostatnie 2 cyfry), - mm - numer miesiąca, - dd numer dekady, - jj - numer dnia lub puste pole.

[underline]##Przykłady:##

[source, elixir]
----
/TI/N1111111111/OKR/06M05/SFP/VAT-7/TXT/podatek vat za m-c maj 2006
/TI/1WL1234567/OKR/06D0105/SFP/VAT-7/TXT/
----

[underline]##Przykładowa zawartość pliku importu przelewów podatku w formacie Elixir:##

[source, txt]
----
110,20060529,300,,,"32156000132005000001720001","98101010780024112222000000",""," Urzad Skarbowy|Miasto ",15600001,10101078,"/TI/N1111111111/OKR/06R/SFP/VAT-7/TXT/podatek za m-c maj 06","","","71","podatek maj 2006",""
,20060529,400,,,"32156000132005000001720001","98101010780024112222000000",""," Urzad Skarbowy|Miasto",15600001,10101078,"/TI/N1111111111/OKR/06R/SFP/VAT-7/TXT/","","","","podatek maj 2006",""
,20060529,500,,,"32156000132005000001720001","98101010780024112222000000",""," Urzad Skarbowy|Miasto",,,"/TI/N1111111111/OKR/06R/SFP/VAT-7/TXT/","","","","",""
,20060529,500,,,"32156000132005000001720001","98101010780024112222000000",""," Urzad Skarbowy|Miasto",,,"/TI/1WL1234567/OKR/06R/SFP/VAT-7/TXT/"
----
[underline]##Przykładowa zawartość pliku importu przelewu VAT w formacie Elixir:##

[source, txt]
----
110,20180326,40,,,"35161011332003022000020004","55132000061234567890123456","","Spoldzielnia Pracy Testowa|Zaklad Testowy",15600001,10101023,"/VAT/0,40/IDC/Identyfikator/INV/Faktura/TXT/tytul","","","51","ref1-2006",""
----

Sposób wypełniania pola TRESC w przelewach VAT jest następujący (ilość znaków 33):

* w polu należy wprowadzić jednym ciągiem w odpowiedniej kolejności:
** słowo kodowe /VAT/, oznaczające że przelew jest przelewem typu VAT,
** słowo kodowe /IDC/, typ identyfikatora,
** słowo kodowe /INV/, dokument typu faktura,
** słowo kodowe /TXT/, tytuł płatności, pole opcjonalne.

==== Plik w formacie liniowym

W formacie liniowym dane przelewów importowane są z pliku tekstowego o strukturze opisanej w pliku _schema.ini_. Informacja o pojedynczym przelewie zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających dane przelewu. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury ze _schema.ini_. Pola oddzielone są separatorem (określonym w pliku _schema.ini_) lub są stałej długości.
Polskie znaki są kodowane w formacie ISO 8859-2 lub WINDOWS 1250.

Dopuszczalny zestaw pól opisujących przelew wraz z formatem danych dla każdego pola przedstawiono w poniższej tabeli:

[underline]##Typy danych stosowane przy opisie pól:## +
*N* - pole numeryczne +
*C* - pole tekstowe +
*D* - data w formacie RRRR-MM-DD, gdzie RRRR - rok, MM -miesiąc, DD - dzień, (np. 2010-04-01). Jeżeli data nie wystąpi przyjmowana jest bieżąca data płatności. +
*K* - pole zawierające kwotę. Kwota w formacie Zł,GR. Separatorem groszy jest przecinek.

Opis pól dostępnych w pliku _schema.ini_ dla przelewów zwykłych:

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|REFERENCJE* |16 |C |Referencje własne klienta
|RACH_OBC |34 |C |Numer rachunku do obciążenia kwotą przelewu
|NAZWA |140 |C |Pełna nazwa kontrahenta 4x35 znaków. Jeśli w polu występują znaki pionowej linii - traktowane są jako separatory wierszy
Zamiast pola NAZWA mogą występować pola NAZWA1, NAZWA2, NAZWA3, NAZWA4 o długości 35 znaków każde.
|RACHUNEK |34 |C |Numer rachunku kontrahenta
|KWOTA |12/2 |K |Kwota przelewu
|TYTUL |140 |C |Tytuł przelewu 4x35 znaków. Jeśli w polu występują znaki pionowej linii - traktowane są jako separatory wierszy.
Zamiast pola TYTUL mogą wystąpić cztery pola TYTUL1, TYTUL2, TYTUL3, TYTUL4, każde o długości 35 znaków
|DATA_ZLECENIA* |10 |D |Data zlecenia. Pole opcjonalne, jeśli nie wystąpi przyjmowana jest data bieżąca płatności.
|NIP_ODB* |10 |C |NIP odbiorcy.
|*- pole nie wymagane ( jest dozwolona pusta wartość ) | | |
|====================

Opis pól dostępnych w pliku _schema.ini_ dla przelewów podatkowych:

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|REFERENCJE* |16 |C |Referencje własne klienta
|RACH_OBC |34 |C |Numer rachunku do obciążenia kwotą przelewu
|RACHUNEK |34 |C |Numer rachunku organu podatkowego
|NAZWA |140 |C |Nazwa i adres organu podatkowego 4x35 znaków
Jeśli w polu występują znaki pionowej linii - traktowane są jako separatory wierszy.
Zamiast pola NAZWA mogą występować pola NAZWA1, NAZWA2, NAZWA3, NAZWA4 o długości 35 znaków każde
|SYMBOL |6 |C |Symbol formularza
|TYP |1 |C |Typ identyfikatora
|IDENT |14 |C |Identyfikator płatnika
|OKRES_ROK |2 |C |Rok
|OKRES_TYP |1 |C |Typ okresu
|OKRES_NUMER |4 |C |Numer okresu
|IDENT_ZOB |21 |C |Identyfikacja zobowiązania
|KWOTA |12/2 |K |Kwota przelewu
|DATA_ZLECENIA* |10 |D |Data zlecenia. Pole opcjonalne, jeśli nie wystąpi przyjmowana jest data bieżąca płatności
|*- pole nie wymagane ( jest dozwolona pusta wartość ) | | |
|====================

NOTE:  DateTimeFormat  jest to parametr konfigurujący datę  (użytkownik może określić swój własny format daty zlecenia).

[underline]##Przykładowy opis struktury z pliku _schema.ini_ definiującej dane przelewów zwykłych:##

[source, ini]
----
[przel_lin.txt]
ColNameHeader=False
Format=Delimited(;)
DateTimeFormat=dd-MM-yyyy
MaxScanRows=25
CharacterSet=OEM
Col1=REFERENCJE Char Width 16
Col2=RACH_OBC Char Width 34
Col3=NAZWA Char Width 140
Col4=RACHUNEK Char Width 34
Col5=KWOTA Float
Col6=TRESC1 Char Width 35
Col7=TRESC2 Char Width 35
Col8=TRESC3 Char Width 35
Col9=TRESC4 Char Width 35
Col10=DATA_ZLECENIA Char Width 10
Col11=NIP_ODB Char Width 10
----

[underline]##Przykładowy opis struktury z pliku _schema.ini_ definiującej dane przelewów podatkowych:##

[source, ini]
----
[przel_US.txt]
ColNameHeader=False
Format=Delimited(;)
DateTimeFormat=dd-MM-yyyy
MaxScanRows=25
CharacterSet=OEM
Col1=REFERENCJE Char Width 16
Col2=RACH_OBC Char Width 34
Col3=RACHUNEK Char Width 34
Col4=NAZWA Char Width 140
Col5=SYMBOL Char Width 6
Col6=TYP Char Width 1
Col7=IDENT Char Width 14
Col8=OKRES_ROK Char Width 2
Col9=OKRES_TYP Char Width 1
Col10=OKRES_NUMER Char Width 4
Col11=IDENT_ZOB Char Width 20
Col12=KWOTA Float
Col13=DATA_ZLECENIA Char Width 10
----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format= Delimited(x) oznacza, że pola rekordu oddzielone są znakiem x - w powyższym przykładzie średnikiem.

Format =FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury mogą zostać pominięte.

Parametr ColNameHeader umożliwia wczytanie (wartość _False_) lub pominięcie podczas wczytywania (wartość _True_) pierwszego wiersza danych z importowanego pliku. Obecnie parametr ten może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia go, aplikacja przyjmuje domyślną wartość parametru - _False_.

[underline]##Przykładowa zawartość pliku importu przelewów zwykłych w formacie liniowym:##

[source, txt]
----
Referencje;97161011332003000001230002;nazwa_odb_linia1;nazwa_odb_linia2;nazwa_odb_linia3;nazwa_odb_linia4;48 8355 0009 1234 5678 9012 3456;123,45;tytul_plat_linia1;tytul_plat_linia2;tytul_plat_linia3;tytul_platn_linia4;2010-01-02
Referencje2;97161011332003000001230002;Jan Testowy;ul.Testowa 1;80-000 Miasto;;51 1010 1023 1234 5678 90123456;55,11;zaplata za fVAT 01/2013;;;;2013-01-10
----
[underline]##Przykładowa zawartość pliku importu przelewów podatku w formacie liniowym:##

[source, txt]
----
Referencje;97161011332003000001230002;nazwa_odb_linia1;nazwa_odb_linia2;nazwa_odb_linia3;nazwa_odb_linia4;48 8355 0009 1234 5678 9012 3456;123,45;tytul_plat_linia1;tytul_plat_linia2;tytul_plat_linia3;tytul_platn_linia4;2010-01-02
Referencje2;97161011332003000001230002;Jan Testowy;ul.Testowa 1;80-000 Miasto;;51 1010 1023 1234 5678 90123456;55,11;zaplata za fVAT 01/2013;;;;2013-01-10
----

[underline]##Przykładowa zawartość pliku importu przelewów VAT w formacie liniowym:##

[source, txt]
----
Referencje;30910100032002000015960001;07101000712222174587369300;Drugi Urzad Skarbowy;VAT-7;2;AB1234567;09;M;08;Identyfikacja;10,24;05-09-2023
----

Istnieje również możliwość importu przelewu VAT w formacie liniowym w osobnych znacznikach:

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|VAT^*^ |12/2 |K |Kwota VAT
|IDC|14 |C |Identyfikator podatkowy
|INV |35 |C |Numer faktury
|====================

_^*^System będzie pozwalał na wprowadzenie etykiety KWOTA_VAT albo VAT._

[underline]##Przykładowy opis struktury z pliku _schema.ini_ definiującej dane przelewów VAT:##


[source, ini]
----

[przel_lin.txt]
ColNameHeader=False
Format=Delimited(;)
DateTimeFormat=dd-MM-yyyy
MaxScanRows=25
CharacterSet=OEM
Col1=REFERENCJE Char Width 16
Col2=RACH_OBC Char Width 34
Col3=NAZWA Char Width 140
Col4=RACHUNEK Char Width 34
Col5=KWOTA Float
Col6=VAT Float
Col7=TRESC1 Char Width 35
Col8=TRESC2 Char Width 35
Col9=TRESC3 Char Width 35
Col10=TRESC4 Char Width 35
Col11=INV Char Width 35
Col12=IDC Char Width 35
Col13=TXT Char Width 33
Col14=DATA_ZLECENIA Char Width 10

----

[underline]##Przykładowa zawartość pliku importu przelewów VAT w formacie liniowym:##

[source, txt]
----
ReferencjeVAT;30910100032002000015960001;Jan Testowy ul.Testowa 1 80-000 Miasto;98194000089029982630800420;55,11;2,14;tresc1;tresc2;zaplata za fVAT 01/2013;;FV123;12234334;tytul;05-09-2023
----

NOTE: W przypadku importu przelewów VAT, jeśli pole tytuł jest odpowiednio sformatowane, to ma ono wyższy priorytet niż użycie dodatkowych znaczników.

NOTE: Format importu Listy płac w formacie liniowym, jest taki sam jak dla przelewów zwykłych. Pozycja dotycząca daty będzie pomijana i importowane przelewy zapiszą się zgodnie z datą bieżącą (COT również nie jest weryfikowany).


==== Plik w formacie Telekonto

Plik z przelewami do importu w formacie Telekonto jest plikiem tekstowym. Pierwsza linia pliku stanowi nagłówek. W nagłówku określany jest rodzaj danych w pliku - w przypadku importu danych przelewów należy tam umieścić tekst "Zlecenia".

Informacja o pojedynczym przelewie zajmuje jedną linię (jeden rekord) zakończoną znakiem <CRLF>.

Każda linia pliku składa się z pól oddzielonych znakiem „|” (pionowa kreska). Pola występują w ustalonej kolejności, opisanej w poniżej załączonej tabeli.

Każda linia zawiera pola wymagane (muszą być wypełnione), pola opcjonalne (wypełnione mogą być, ale nie muszą) oraz pola, które nie są wczytywane do aplikacji Asseco EBP.

Pojedyncza spacja (pomiędzy separatorami pól) oznacza pole puste. Brak tej spacji oznacza brak pola (pomimo wystąpienia separatorów || ). Puste pola końcowe rekordu mogą zostać pominięte.

Polskie znaki kodowane są w ISO 8859-2.

WARNING: Dane odbiorców przelewów wczytywanych z pliku importu muszą znajdować się w bazie odbiorców.

[underline]##Zestaw pól opisujących dane przelewu wraz z formatem danych:## +
*N* - pole numeryczne, +
*C* - pole tekstowe, +
*D* - pole data – format MM/DD/YY, gdzie MM - miesiąc, DD - dzień YY - rok, +
*K* - pole kwoty. Kwota w formacie Zł.GR. Separatorem części ułamkowej jest kropka. Nie należy używać żadnych innych separatorów, np. separatora tysięcy.

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|data |8 |D |Data operacji
|kwota |12/2 |K |Kwota operacji
|rach_obc |34 |C |Numer rachunku obciążanego
|rachunek |34 |C |Numer rachunku uznawanego
|tytulem1 |35 |C |Tytuł płatności
|tytulem2 |35 |C |Tytuł płatności
|typ przelewu** |3 |C | Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|kod waluty** |3 |C | Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|system rozliczeniowy** |1 |C | Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|tytulem3* |35 |C |Tytuł płatności
|tytulem4* |35 |C |Tytuł płatności
|* - pole opcjonalne +
** - pole pomijane przy wczytywaniu do aplikacji Asseco EBP |||
|====================

[underline]##Przykładowa zawartość pliku importu przelewów zwykłych w formacie Telekonto:##

[source, txt]
----
Zlecenia
09/23/13|157.50|59 1560 0013 2005 0000 0215 0001|48 8355 0009 1234 5678 9012 3456|tytul 1|tytul 2||||tytul 3|tytul 4
----

[underline]##Przykładowa zawartość pliku importu przelewów VAT w formacie Telekonto:##

[source, txt]
----
Zlecenia
03/28/18|2.50|35161011332003022000020004|48 8355 0009 1234 5678 90123456|/VAT/0,40/IDC/Identyfikator/INV/|Faktura/TXT/tytul2|||||
----

Sposób wypełniania pola *tytulem1* w przelewach VAT jest następujący (ilość znaków 33):

* w polu należy wprowadzić jednym ciągiem w odpowiedniej kolejności:
** słowo kodowe /VAT/, oznaczające że przelew jest przelewem typu VAT,
** słowo kodowe /IDC/, typ identyfikatora,
** słowo kodowe /INV/, dokument typu faktura,
** słowo kodowe /TXT/, tytuł płatności, pole opcjonalne.

NOTE: Format importu Listy płac w formacie Telekonto, jest taki sam jak dla przelewów zwykłych. Pozycja dotycząca daty będzie pomijana i importowane przelewy zapiszą się zgodnie z datą bieżącą (COT również nie jest weryfikowany).


==== Plik w formacie VideoTel

*Plik z przelewami zwykłymi*

Plik importu przelewów w formacie VideoTel jest plikiem tekstowym.

Każde zlecenie przelewu zajmuje jedną linię (jeden rekord) zakończoną znakiem <CRLF>.

Każdy rekord jest złożony z 14 pól. Pola występują w ustalonej kolejności, opisanej w tabeli zamieszczonej poniżej. Każde pole w rekordzie musi wystąpić.

Pola tekstowe, dla których nie jest przekazywana wartość, są zapisane jako pusty string "".

Poszczególne pola są oddzielone jedną i tylko jedną spacją. Pola tekstowe są objęte cudzysłowami.

Jeżeli w tekście do zaimportowania ma się znaleźć cudzysłów, należy zastąpić go dwoma cudzysłowami.

Znakiem podziału linii w obrębie pola są trzy znaki zapytania.

Wszystkie rachunki nadawców muszą istnieć w bazie danych.

Polskie znaki kodowane są w standardzie ISO 8859-2 lub WINDOWS 1250.

[underline]##Formaty pól:## +
*N* - pole numeryczne, wartością jest liczba całkowita. Zapis 10N oznacza, że pole może zawierać maksymalnie 10 cyfr. +
*C* - pole tekstowe. Zapis 3*35C oznacza że pole może zawierać maksymalnie 3 linie po 35 znaków , nie wliczając znaków podziału linii oraz licząc podwójne cudzysłowy jako jeden znak. +
*K* - pole zawierające kwotę. Kwota w formacie Zł.GR. Separatorem części ułamkowej jest kropka. Nie należy używać żadnych innych separatorów, np. separatora tysięcy. +

[underline]##Struktura rekordu:##

Do systemu Asseco EBP wczytywane są pola o statusie _M_. Pola o statusie _O_ są pomijane przy wczytywaniu pliku do Asseco EBP.

[width="100%",cols="4,4,8,4,4",options="header,footer"]
|====================
|*Kolejność pola w rekordzie* |*Nazwa pola* |*Opis pola* |*Format pola* |*Status pola*
|1 |BBen |Nazwa banku beneficjenta |35C |O
|2 |RBen1 |Nazwa rachunku beneficjenta |3*35C |M
|3 |NrBen |Numer rachunku beneficjenta |34C |M
|4 |REZ12 |Klucz |N |O
|5 |KW |Kwota przelewu |K |M
|6 |BNad |Nazwa banku nadawcy |35C |O
|7 |RNad |Nazwa rachunku nadawcy |35C |O
|8 |NrNad |Numer rachunku nadawcy |34C |M
|9 |REF |Tytuł płatności przelewu |4*35C |M
|10 |WAL3 |Waluta przelewu |3C |O
|11 |NF |Nazwa firmy, do której mają być dopisane nowe rachunki beneficjenta, które zostaną zaimportowane wraz z przelewami |35C |O
|12 |DNN |Nazwa beneficjenta |3*35C |M
|13 |WL |Określenie rodzaju własności firmy NF |"T" jeśli firma własna, "N" jeśli firma obca |O
|14 |REZ2 |Nazwa systemu finansowego dla przelewu |35C |O
|====================

WARNING:  1RBen – zawartość pola interpretowana przez aplikację jako nazwa odbiorcy przelewu +
2REZ1 – pole może zawierać dowolną liczbę całkowitą np.1 +
3WAL – w aplikacji przyjmowana zawsze wartość PLN

[Uunderline]##Przykładowy rekord danych z pliku importu przelewów w formacie VideoTel:##

[source, txt]
----
"" "JAN TESTOWY-ROR" "48835500091234567890123456" 0000001 206.96 "" "JANINA TEST???UL.TESTOWA 5" "86864200023001840004460001" "ZASILENIE RACHUNKU???LIPIEC 2013" "PLN" "" "JAN TESTOWY" "" ""
----

NOTE: Format importu Listy płac w formacie VideoTel, jest taki sam jak dla przelewów zwykłych. Pozycja dotyczące daty będzie pomijana i importowane przelewy zapiszą się zgodnie z datą bieżącą (COT również nie jest weryfikowany).

==== Plik w formacie ISO20022

Struktura pliku:

Group Header (CstmrCdtTrfInitn/GrpHdr)

* nagłówek, blok wymagany
* występuje tylko raz
* zawiera unikalny identyfikator pliku
* zawiera informacje o zleceniodawcy, dacie utworzenia, ilości zleceń w pliku

Payment Information (CstmrCdtTrfInitn/PmtInf)

* blok wymagany
* może wystąpić jeden lub wiele razy
* zawiera informacje o grupie płatności, danych zleceniodawcy

Transaction Information (CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf)

* blok wymagany
* może wystąpić jeden lub wiele razy
* zawiera informacje o transferze oraz dane beneficjenta

W treści zlecenia dopuszczalne są następujące znaki:
- małe i wielkie litery,
- cyfry,
- znaki specjalne: / - ? : ( ) . , + spacja

Dla zleceń krajowych pola nie mogą zawierać znaków: | ”

Dla pozostałych typów zleceń pola nie mogą zawierać znaków: * ; “ ! | #

[cols="3,5",options="header",]
|===========================================================
|Element w tabeli |Opis
|Status|
M - pole obowiązkowe

O - pole opcjonalne

C - pole warunkowe
|Format	|
n – tylko cyfry (0-9)

a – dozwolone tylko litery

x – dowolny znak

c – dozwolone tylko litery i cyfry

d – liczba dziesiętna

! – stała długość

[ ] – wartość opcjonalna
|ISO Date	|RRRR-MM-DD
|ISO DateAndTime|RRRR-MM-DDThh:mm:ss
|===========================================================

WARNING: Importowane dane przelewów walutowych krajowych i zagranicznych nie będą podlegały walidacji biznesowej - przykładowo czy opcja kosztowa podana w pliku importu jest dostępna dla danej waluty. Przelew zostanie przekazany do realizacji zgodnie z danymi jakie zostały zawarte w pliku importu. W przypadku wprowadzenia błędnych danych przelew zostanie odrzucony przez system, a w przelewach zostanie oznaczony jako odrzucony.

NOTE: Plik importu ISO20022 może zawierać wyłącznie jeden typ przelewów np. zwykłe, zagraniczne, podatku.

*Specyfikacja pól w pliku ISO20022 dla przelewu zwykłego i VAT*

[width="100%",cols="18%,8%,14%,37%,23%",options="header",]
|===
|*Nazwa elementu* |*Status* |*Format* |*Opis* |*Przykład*
5+|<?xml version=”1.0” encoding=”utf-8”?>
5+|<Document xmlns=”urn:iso:std:iso:20022:tech:xsd:pain.001.001.03” xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”>
|<CstmrCdtTrfInitn> 4+|
a|
 +<GrpHdr> 4+|
a|
 ++<MsgId> |M |35x |Identyfikator pliku płatności (weryfikacja duplikatów). Nie może zawierać spacji |
a|
 ++<CreDtTm> |M | |Data i czas utworzenia; RRRR-MM-DDTHH:MM:SS |2020-07-23T10:08:06
a|
 ++<NbOfTxs> |M |15d |Ilość zleceń w całym pliku |
a|
 ++<InitgPty> .5+<.^|O .5+<.^| .5+<.^|Kod identyfikacyjny zleceniodawcy .5+<.^|
a|
 +++Id
a|
 ++++PrvtId
a|
 +++++Othr
a|
 ++++++Id
a|
 +<PmtInf> 4+|
a|
 ++<PmtInfId> |M |35x |Identyfikator płatności |
a|
 ++<PmtMtd> |M |3!a |Typ operacji. Stała wartość TRF |TRF
a|
 ++<ReqdExctnDt> |M | |Data realizacji RRRR-MM-DD |
a|
 ++<Dbtr> ||||
a|
 +++<Nm> |M |70x |Nazwa instytucji zlecającej |
a|
 ++<DbtrAcct> .4+<.^|M .4+<.^|34x .4+<.^|Rachunek do obciążenia w formacie IBAN .4+<.^|PL30910100032002000015960001
a|
 +++<Id>
a|
 ++++Othr
a|
 +++++Id
a|
 ++<DbtrAgt> .2+<.^|O .2+<.^| .2+<.^| .2+<.^|
a|
 +++<FinInstnId>
a|
 ++<CdtTrfTxInf> ||||
a|
 +++<PmtId> | | | |
a|
 ++++<EndToEndId> |M |35x |Referencje. |
a|
 +++<PmtTpInf> | | | |
a|
 ++++<SvcLvl> .2+<.^|C .2+<.^|4!a .2+<.^|„RTGS” – kod opcjonalny dla pilnych zleceń typu SORBNET. Dla transakcji kierowanych do systemu ELIXIR pole zabronione. Bez kodu zlecenie traktowane będzie jako zwykłe zlecenie krajowe. .2+<.^|RTGS
a|
 +++++<Cd>
a|
 ++++<CtgyPurp> .2+<.^|C .2+<.^|4!a .2+<.^|Kategoria zlecenia. Dopuszcza się kod: ‘INTC’ – dla zleceń wewnątrzbankowych .2+<.^|INTC
a|
 +++++<Cd>
a|
 +++<Amt> .2+<.^|M .2+<.^| .2+<.^|Kwota zlecenia. Zamiast ciągu AAA podajemy walutę zlecenia zgodną z ISO 4217. .2+<.^|<InstdAmt Ccy="PLN">5.00
a|
 ++++<InstdAmt Ccy="AAA">
a|
 +++<IntrmyAgt1> .5+<.^|M .5+<.^| .5+<.^|Identyfikator banku beneficjenta. .5+<.^|
a|
 ++++<FinInstnId>
a|
 +++++<ClrSysMmbId>
a|
 ++++++<ClrSysId>
a|
 +++++++<Cd>
a|
 +++<Cdtr> | | | |
a|
 ++++<Nm> |M |70x |Nazwa beneficjenta. |
a|
 ++++<PstlAdr> | | | |
a|
 +++++<Ctry> |C |2!a |Kraj (wg ISO 3166) |PL
a|
 +++++<AdrLine> |O |70x |Adres beneficjenta |
a|
 +++<CdtrAcct> .4+<.^|M .4+<.^|26!n .4+<.^|Numer rachunku beneficjenta w formacie NRB .4+<.^|49168000075544715806960993
a|
 ++++<Id>
a|
 +++++<Othr>
a|
 ++++++<Id>
a|
 +++<RmtInf> .2+<.^|M .2+<.^|140x .2+<.^|Tytuł zlecenia. W przypadku zlecenia przelewu VAT: +
• /VAT/ - znacznik który określa dany przelew jako przelew VAT/1,00/kwota przelewu VAT, +
• /IDC/ - typ dokumentu identyfikacji podatkowej, znacznik w polu tresc który określa przelew jako przelew VAT/Identyfikator/numer identyfikatora podatkowego, +
• /INV/ - faktura, znacznik który warunkuje przelew jako przelew VAT/ Faktura/numer faktury, +
• /TXT/ - tekst wolny, pole nieobowiązkowe/tytuł/tytuł przelewu. .2+<.^|Dla VAT: /VAT/1.00/IDC/Identyfikator/INV/Faktura/TXT/MPP
a|
 ++++<Ustrd>
|===

[underline]##Przykładowa zawartość pliku importu przelewów zwykłych (ELIXIR, VAT i SORBNET) w formacie ISO20022:##

[source, xml]
----
<?xml version="1.0" encoding="utf-8"?>
<Document xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.03" xmlns:xsi="http://www.w3.org/2001/XMLSchemainstance">
  <CstmrCdtTrfInitn>
    <GrpHdr>
      <MsgId>145</MsgId>
      <CreDtTm>2020-07-23T10:08:06</CreDtTm>
      <NbOfTxs>3</NbOfTxs>
      <InitgPty>
        <Id>
          <PrvtId>
            <Othr>
              <Id>Kod identyfikacyjny zleceniodawcy</Id>
            </Othr>
          </PrvtId>
        </Id>
      </InitgPty>
    </GrpHdr>
    <!--    ELIXIR-->
    <PmtInf>
      <PmtInfId>1</PmtInfId>
      <PmtMtd>TRF</PmtMtd>
      <ReqdExctnDt>2023-04-23</ReqdExctnDt>
      <Dbtr>
        <Nm>Nazwa Zleceniodawcy</Nm>
      </Dbtr>
      <DbtrAcct>
        <Id>
          <Othr>
            <Id>PL30910100032002000015960001</Id>
          </Othr>
        </Id>
      </DbtrAcct>
      <DbtrAgt>
        <FinInstnId>
        </FinInstnId>
      </DbtrAgt>
      <CdtTrfTxInf>
        <PmtId>
          <EndToEndId>REFERENCJE</EndToEndId>
        </PmtId>
        <PmtTpInf>
          <CtgyPurp>
            <Cd>INTC</Cd>
          </CtgyPurp>
        </PmtTpInf>
        <Amt>
          <InstdAmt Ccy="PLN">5.00</InstdAmt>
        </Amt>
        <IntrmyAgt1>
          <FinInstnId>
            <ClrSysMmbId>
              <ClrSysId>
                <Cd>16800007</Cd>
              </ClrSysId>
              <MmbId>16800007</MmbId>
            </ClrSysMmbId>
          </FinInstnId>
        </IntrmyAgt1>
        <Cdtr>
          <Nm>Jan Kowalski</Nm>
          <PstlAdr>
            <Ctry>PL</Ctry>
            <AdrLine>Ul. Testowa 14 35-322 Rzeszow</AdrLine>
          </PstlAdr>
        </Cdtr>
        <CdtrAcct>
          <Id>
            <Othr>
              <Id>49168000075544715806960993</Id>
            </Othr>
          </Id>
        </CdtrAcct>
        <RmtInf>
          <Ustrd>Zwykly</Ustrd>
        </RmtInf>
      </CdtTrfTxInf>
    </PmtInf>
	<!-- SPLIT-->
	    <PmtInf>
      <PmtInfId>1</PmtInfId>
      <PmtMtd>TRF</PmtMtd>
      <ReqdExctnDt>2023-04-23</ReqdExctnDt>
      <Dbtr>
        <Nm>Firma Test Sp. z o.o. Sp. k.</Nm>
      </Dbtr>
      <DbtrAcct>
        <Id>
          <Othr>
            <Id>PL30910100032002000015960001</Id>
          </Othr>
        </Id>
      </DbtrAcct>
      <DbtrAgt>
        <FinInstnId>
        </FinInstnId>
      </DbtrAgt>
      <CdtTrfTxInf>
        <PmtId>
          <EndToEndId>REFERENCJE</EndToEndId>
        </PmtId>
        <PmtTpInf>
          <CtgyPurp>
            <Cd>INTC</Cd>
          </CtgyPurp>
        </PmtTpInf>
        <Amt>
          <InstdAmt Ccy="PLN">5.00</InstdAmt>
        </Amt>
        <IntrmyAgt1>
          <FinInstnId>
            <ClrSysMmbId>
              <ClrSysId>
                <Cd>16800007</Cd>
              </ClrSysId>
              <MmbId>16800007</MmbId>
            </ClrSysMmbId>
          </FinInstnId>
        </IntrmyAgt1>
        <Cdtr>
          <Nm>Jan Kowalski</Nm>
          <PstlAdr>
            <Ctry>PL</Ctry>
            <AdrLine>Ul. Testowa 14 35-322 Rzeszow</AdrLine>
          </PstlAdr>
        </Cdtr>
        <CdtrAcct>
          <Id>
            <Othr>
              <Id>49168000075544715806960993</Id>
            </Othr>
          </Id>
        </CdtrAcct>
        <RmtInf>
          <Ustrd>/VAT/1.00/IDC/Identyfikator/INV/Faktura/TXT/MPP</Ustrd>
        </RmtInf>
      </CdtTrfTxInf>
    </PmtInf>
    <!--    SORBNET-->
    <PmtInf>
      <PmtInfId>2</PmtInfId>
      <PmtMtd>TRF</PmtMtd>
      <ReqdExctnDt>2024-03-24</ReqdExctnDt>
      <Dbtr>
        <Nm>Firma Testowa Sp. z o.o. Sp. k.</Nm>
      </Dbtr>
      <DbtrAcct>
        <Id>
          <Othr>
            <Id>PL30910100032002000015960001</Id>
          </Othr>
        </Id>
      </DbtrAcct>
      <DbtrAgt>
        <FinInstnId>
        </FinInstnId>
      </DbtrAgt>
      <CdtTrfTxInf>
        <PmtId>
          <EndToEndId>SORBNET</EndToEndId>
        </PmtId>
        <PmtTpInf>
          <SvcLvl>
            <Cd>RTGS</Cd>
          </SvcLvl>
          <CtgyPurp>
            <Cd>INTC</Cd>
          </CtgyPurp>
        </PmtTpInf>
        <Amt>
          <InstdAmt Ccy="PLN">15.00</InstdAmt>
        </Amt>
        <IntrmyAgt1>
          <FinInstnId>
            <ClrSysMmbId>
              <ClrSysId>
                <Cd>16800007</Cd>
              </ClrSysId>
              <MmbId>16800007</MmbId>
            </ClrSysMmbId>
          </FinInstnId>
        </IntrmyAgt1>
        <Cdtr>
          <Nm>Jan Kowalski</Nm>
          <PstlAdr>
            <Ctry>PL</Ctry>
            <AdrLine>Ul. Testowa 14 35-322 Rzeszow</AdrLine>
          </PstlAdr>
        </Cdtr>
        <CdtrAcct>
          <Id>
            <Othr>
              <Id>49168000075544715806960993</Id>
            </Othr>
          </Id>
        </CdtrAcct>
        <RmtInf>
          <Ustrd>Przelew SORBNET</Ustrd>
        </RmtInf>
      </CdtTrfTxInf>
    </PmtInf>
  </CstmrCdtTrfInitn>
</Document>
----

*Specyfikacja pól w pliku ISO20022 dla przelewu podatkowego*


[width="100%",cols="18%,8%,14%,37%,23%",options="header",]
|===
|*Nazwa elementu* |*Status* |*Format* |*Opis* |*Przykład*
5+|<?xml version=”1.0” encoding=”utf-8”?>
5+|<Document xmlns=”urn:iso:std:iso:20022:tech:xsd:pain.001.001.03” xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”>
|<CstmrCdtTrfInitn> 4+|
a|
 +<GrpHdr> 4+|
a|
 ++<MsgId> |M |35x |Identyfikator pliku płatności (weryfikacja duplikatów). Nie może zawierać spacji |
a|
 ++<CreDtTm> |M | |Data i czas utworzenia; RRRR-MM-DDTHH:MM:SS |2020-07-23T10:08:06
a|
 ++<NbOfTxs> |M |15d |Ilość zleceń w całym pliku |
a|
 ++<InitgPty> .5+<.^|O .5+<.^| .5+<.^|Kod identyfikacyjny zleceniodawcy .5+<.^|
a|
 +++Id
a|
 ++++PrvtId
a|
 +++++Othr
a|
 ++++++Id
a|
 +<PmtInf> 4+|
a|
 ++<PmtInfId> |M |35x |Identyfikator płatności |
a|
 ++<PmtMtd> |M |3!a |Typ operacji. Stała wartość TRF |TRF
a|
 ++<ReqdExctnDt> |M | |Data realizacji RRRR-MM-DD |
a|
 ++<Dbtr> ||||
a|
 +++<Nm> |M |70x |Nazwa instytucji zlecającej |
a|
 ++<DbtrAcct> .4+<.^|M .4+<.^|34x .4+<.^|Rachunek do obciążenia w formacie IBAN .4+<.^|PL30910100032002000015960001
a|
 +++<Id>
a|
 ++++Othr
a|
 +++++Id
a|
 ++<DbtrAgt> .2+<.^|M .2+<.^| .2+<.^| .2+<.^|
a|
 +++<FinInstnId>
a|
 ++<CdtTrfTxInf> ||||
a|
 +++<PmtId> | | | |
a|
 ++++<EndToEndId> |M |35x |Referencje. |
a|
 +++<PmtTpInf> | | | |
a|
 ++++<CtgyPurp> .2+<.^|C .2+<.^|4!a .2+<.^|Kategoria zlecenia. Dopuszcza się kod:  ’TAXS’ – dla zleceń na rzecz Urzędów Skarbowych .2+<.^|TAXS
a|
 +++++<Cd>
a|
 +++<Amt> .2+<.^|M .2+<.^| .2+<.^|Kwota zlecenia. Zamiast ciągu AAA podajemy walutę zlecenia zgodną z ISO 4217. .2+<.^|<InstdAmt Ccy="PLN">5.00
a|
 ++++<InstdAmt Ccy="AAA">
a|
 +++<IntrmyAgt1> .5+<.^|M .5+<.^| .5+<.^|Identyfikator banku beneficjenta. .5+<.^|
a|
 ++++<FinInstnId>
a|
 +++++<ClrSysMmbId>
a|
 ++++++<ClrSysId>
a|
 +++++++<Cd>
a|
 +++<Cdtr> | | | |
a|
 ++++<Nm> |M |70x |Nazwa beneficjenta. |
a|
 ++++<PstlAdr> | | | |
a|
 +++++<Ctry> |C |2!a |Kraj (wg ISO 3166) |PL
a|
 +++++<AdrLine> |O |70x |Adres beneficjenta |
a|
 +++<CdtrAcct> .4+<.^|M .4+<.^|26!n .4+<.^|Numer rachunku beneficjenta w formacie NRB .4+<.^|49168000075544715806960993
a|
 ++++<Id>
a|
 +++++<Othr>
a|
 ++++++<Id>
a|
 +++<Tax> ||||
a|
 ++++<Dbtr> ||||
a|
 +++++<RegnId> |M | 1!x34x |

Identyfikator +
Pierwszy znak określa „Typ identyfikatora”: +
- N - NIP +
- P – PESEL +
- R – Regon +
- 1 – Dowód osobisty +
- 2 – Paszport +
- 3 – Inny dokument tożsamości +
Następne to wybrany identyfikator | N1285635927
a|
 ++++<Rcrd> ||||
a|
 +++++<Tp> |O | 35x |
Okres: +
Pierwsza część pola to dwa znaki przeznaczone na „Rok” w formacie RR. +
Druga część zawiera jeden znak – „Typ okresu”: +
- M – oznacza miesiąc, +
- P – oznacza półrocze, +
- R – oznacza rok, +
- K – oznacza kwartał, +
- D – oznacza dekada, +
- J - oznacza dzień. +
Trzecia część zawiera „Numer okresu”. Gdy w „Typ okresu” przyjmuje wartość: +
- R, pole to nie zawiera numeru okresu, +
- P, w polu tym wymagane jest wypełnienie dwóch znaków wartościami 01 lub 02, +
- K, w polu tym wymagane jest wypełnienie dwóch znaków wartościami 01, 02, 03 lub 04, +
- M, w polu tym wymagane jest wypełnienie dwóch znaków wartościami 01-12, +
- D, w polu tym wymagane jest wypełnienie pierwszych dwóch znaków wartościami 01, 02 lub 03, kolejnych dwóch wartościami z zakresu 01-12, +
- J, w polu tym wymagane jest wypełnienie dwóch znaków wartościami z zakresu 01 – 31 oznaczających dzień, oraz kolejnych dwóch znaków wartości z zakresu 01 – 12 oznaczających miesiąc." |
a|
 +++++<FrmsCd> |M | 35x |Symbol formularza | VAT-7
a|
 +++<RmtInf> .2+<.^|O .2+<.^|140x .2+<.^|Tytuł zlecenia. Brak zastosowania. Można usunąć cały blok. .2+<.^|
a|
 ++++<Ustrd>
|===

[underline]##Przykładowa zawartość pliku importu przelewu podatkowego w formacie ISO20022:##

[source, xml]
----
<?xml version="1.0" encoding="utf-8"?>
<Document xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.03" xmlns:xsi="http://www.w3.org/2001/XMLSchemainstance">
  <CstmrCdtTrfInitn>
    <GrpHdr>
      <MsgId>145</MsgId>
      <CreDtTm>2020-07-23T10:08:06</CreDtTm>
      <NbOfTxs>1</NbOfTxs>
      <InitgPty>
        <Id>
          <PrvtId>
            <Othr>
              <Id>Kod identyfikacyjny zleceniodawcy</Id>
            </Othr>
          </PrvtId>
        </Id>
      </InitgPty>
    </GrpHdr>
    <PmtInf>
      <PmtInfId>3</PmtInfId>
      <PmtMtd>TRF</PmtMtd>
      <ReqdExctnDt>2023-03-25</ReqdExctnDt>
      <Dbtr>
        <Nm>Firma Testowa Sp. z o.o. Sp. k.</Nm>
      </Dbtr>
      <DbtrAcct>
        <Id>
          <Othr>
            <Id>PL30910100032002000015960001</Id>
          </Othr>
        </Id>
      </DbtrAcct>
      <DbtrAgt>
        <FinInstnId>
        </FinInstnId>
      </DbtrAgt>
      <CdtTrfTxInf>
        <PmtId>
          <EndToEndId>US2</EndToEndId>
        </PmtId>
        <PmtTpInf>
          <CtgyPurp>
            <Cd>TAXS</Cd>
          </CtgyPurp>
        </PmtTpInf>
        <Amt>
          <InstdAmt Ccy="PLN">5.00</InstdAmt>
        </Amt>
        <IntrmyAgt1>
          <FinInstnId>
            <ClrSysMmbId>
              <ClrSysId>
                <Cd>16800007</Cd>
              </ClrSysId>
              <MmbId>16800007</MmbId>
            </ClrSysMmbId>
          </FinInstnId>
        </IntrmyAgt1>
        <Cdtr>
          <Nm>Urzad Skarbowy</Nm>
          <PstlAdr>
            <Ctry>PL</Ctry>
            <AdrLine>Centrum Rozliczeniowe</AdrLine>
          </PstlAdr>
        </Cdtr>
        <CdtrAcct>
          <Id>
            <Othr>
              <Id>07101000712222174587369300</Id>
            </Othr>
          </Id>
        </CdtrAcct>
        <Tax>
          <Dbtr>
            <RegnId>P68121453864</RegnId>
          </Dbtr>
          <Rcrd>
            <Tp>23M02</Tp>
            <FrmsCd>VAT-7</FrmsCd>
          </Rcrd>
        </Tax>
      </CdtTrfTxInf>
    </PmtInf>
  </CstmrCdtTrfInitn>
</Document>
----

=== Struktury plików importu przelewów walutowych
==== Plik w formacie ISO20022

Struktura pliku:

Group Header (CstmrCdtTrfInitn/GrpHdr)

* nagłówek, blok wymagany
* występuje tylko raz
* zawiera unikalny identyfikator pliku
* zawiera informacje o zleceniodawcy, dacie utworzenia, ilości zleceń w pliku

Payment Information (CstmrCdtTrfInitn/PmtInf)

* blok wymagany
* może wystąpić jeden lub wiele razy
* zawiera informacje o grupie płatności, danych zleceniodawcy

Transaction Information (CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf)

* blok wymagany
* może wystąpić jeden lub wiele razy
* zawiera informacje o transferze oraz dane beneficjenta

W treści zlecenia dopuszczalne są następujące znaki:
- małe i wielkie litery,
- cyfry,
- znaki specjalne: / - ? : ( ) . , + spacja

Dla pozostałych typów zleceń pola nie mogą zawierać znaków: * ; “ ! | #

[cols="3,5",options="header",]
|===========================================================
|Element w tabeli |Opis
|Status|
M - pole obowiązkowe

O - pole opcjonalne

C - pole warunkowe
|Format	|
n – tylko cyfry (0-9)

a – dozwolone tylko litery

x – dowolny znak

c – dozwolone tylko litery i cyfry

d – liczba dziesiętna

! – stała długość

[ ] – wartość opcjonalna
|ISO Date	|RRRR-MM-DD
|ISO DateAndTime|RRRR-MM-DDThh:mm:ss
|===========================================================

WARNING: Importowane dane przelewów walutowych krajowych i zagranicznych nie będą podlegały walidacji biznesowej - przykładowo czy opcja kosztowa podana w pliku importu jest dostępna dla danej waluty. Przelew zostanie przekazany do realizacji zgodnie z danymi jakie zostały zawarte w pliku importu. W przypadku wprowadzenia błędnych danych przelew zostanie odrzucony przez system, a w przelewach zostanie oznaczony jako odrzucony.

NOTE: Plik importu ISO20022 może zawierać wyłącznie jeden typ przelewów np. zwykłe, zagraniczne, podatku.

*Specyfikacja pól w pliku ISO20022 dla przelewu SEPA*

[width="100%",cols="18%,8%,14%,37%,23%",options="header",]
|===
|*Nazwa elementu* |*Status* |*Format* |*Opis* |*Przykład*
5+|<?xml version=”1.0” encoding=”utf-8”?>
5+|<Document xmlns=”urn:iso:std:iso:20022:tech:xsd:pain.001.001.03” xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”>
|<CstmrCdtTrfInitn> 4+|
a|
 +<GrpHdr> 4+|
a|
 ++<MsgId> |M |35x |Identyfikator pliku płatności (weryfikacja duplikatów). Nie może zawierać spacji |
a|
 ++<CreDtTm> |M | |Data i czas utworzenia; RRRR-MM-DDTHH:MM:SS |2020-07-23T10:08:06
a|
 ++<NbOfTxs> |M |15d |Ilość zleceń w całym pliku |
a|
 ++<InitgPty> .5+<.^|O .5+<.^| .5+<.^|Kod identyfikacyjny zleceniodawcy .5+<.^|
a|
 +++Id
a|
 ++++PrvtId
a|
 +++++Othr
a|
 ++++++Id
a|
 +<PmtInf> 4+|
a|
 ++<PmtInfId> |M |35x |Identyfikator płatności |
a|
 ++<PmtMtd> |M |3!a |Typ operacji. Stała wartość TRF |TRF
a|
 ++<ReqdExctnDt> |M | |Data realizacji RRRR-MM-DD |
a|
 ++<Dbtr> ||||
a|
 +++<Nm> |M |70x |Nazwa instytucji zlecającej |
a|
 ++<DbtrAcct> .4+<.^|M .4+<.^|34x .4+<.^|Rachunek do obciążenia w formacie IBAN .4+<.^|PL30910100032002000015960001
a|
 +++<Id>
a|
 ++++Othr
a|
 +++++Id
a|
 ++<DbtrAgt> .2+<.^|M .2+<.^| .2+<.^| .2+<.^|
a|
 +++<FinInstnId>
a|
 +++<ChrgBr> |M |4!a |Stała wartość "SLEV" |SLEV
a|
 ++ChrgsAcct .4+<.^|O .4+<.^|2!a26!n .4+<.^|Rachunek dla opłat w formcie NRB. .4+<.^|
a|
 +++Id
a|
 ++++Othr
a|
 +++++Id
a|
 ++<CdtTrfTxInf> ||||
a|
 +++<PmtId> | | | |
a|
 ++++<EndToEndId> |M |35x |Referencje. |
a|
 +++<PmtTpInf> | | | |
a|
 ++++<SvcLvl> .2+<.^|C .2+<.^|4!a .2+<.^|Typ zlecenia - stała wartość SEPA .2+<.^|SEPA
a|
 +++++<Cd>
a|
 +++<Amt> .2+<.^|M .2+<.^| .2+<.^|Kwota zlecenia. Zamiast ciągu AAA podajemy walutę zlecenia zgodną z ISO 4217. .2+<.^|<InstdAmt Ccy="EUR">5.00
a|
 ++++<InstdAmt Ccy="AAA">
a|
 +++<Cdtr> | | | |
a|
 ++++<Nm> |M |70x |Nazwa beneficjenta. |
a|
 ++++<PstlAdr> | | | |
a|
 +++++<Ctry> |M |2!a |Kraj (wg ISO 3166) |PL
a|
 +++++<StrtNm> |O |45x |Nazwa ulicy |
a|
 +++++<BldgNb> |O |5x |Numer domu |
a|
 +++++<PstCd> |O |8x |Kod pocztowy |
a|
 +++++<TwnNm> |M |34x |Nazwa miejscowości |
a|
 +++++<UnitNb> |O |5x |Numer mieszkania |
a|
 +++<CdtrAcct> .4+<.^|M .4+<.^|26!n .4+<.^|Numer rachunku beneficjenta .4+<.^|49168000075544715806960993
a|
 ++++<Id>
a|
 +++++<Othr>
a|
 ++++++<Id>
a|
 +++<RmtInf> .2+<.^|M .2+<.^|140x .2+<.^|Tytuł zlecenia. .2+<.^|
a|
 ++++<Ustrd>
|===

[underline]##Przykładowa zawartość pliku importu przelewów walutowych SEPA w formacie ISO20022:##
[source, xml]
----
<?xml version="1.0" encoding="UTF-8"?><Document xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.12" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<CstmrCdtTrfInitn>
  <GrpHdr>
    <MsgId>145</MsgId>
    <CreDtTm>2025-09-17T10:07:04</CreDtTm>
    <NbOfTxs>1</NbOfTxs>
    <InitgPty>
      <Id>
        <PrvtId>
          <Othr>
            <Id>Kod identyfikacyjny zleceniodawcy</Id>
          </Othr>
        </PrvtId>
      </Id>
    </InitgPty>
  </GrpHdr>
  <PmtInf>
    <PmtInfId>2022</PmtInfId>
    <PmtMtd>TRF</PmtMtd>
    <ReqdExctnDt>2025-09-17</ReqdExctnDt>
    <Dbtr>
      <Nm>Firma Testowa Sp. z o.o. Sp.</Nm>
    </Dbtr>
    <DbtrAcct>
      <Id>
        <Othr>
          <Id>PL30910100032002000015960001</Id>
        </Othr>
      </Id>
    </DbtrAcct>
    <DbtrAgt>
      <FinInstnId>
        <BICFI>POLUPLPRXXX</BICFI>
      </FinInstnId>
    </DbtrAgt>
    <ChrgsAcct>
      <Id>
        <Othr>
          <Id>30910100032002000015960001</Id>
        </Othr>
      </Id>
    </ChrgsAcct>
    <CdtTrfTxInf>
      <PmtId>
        <EndToEndId>REK/SEPA1</EndToEndId>
      </PmtId>
      <PmtTpInf>
        <SvcLvl>
          <Cd>SEPA</Cd>
        </SvcLvl>
      </PmtTpInf>
      <Amt>
        <InstdAmt Ccy="EUR">222.80</InstdAmt>
      </Amt>
      <CdtrAgt>
        <FinInstnId>
          <BICFI>DEUTDEFFXXX</BICFI>
        </FinInstnId>
      </CdtrAgt>
      <Cdtr>
          <Nm>NAZWA ODBIORCY</Nm>
          <PstlAdr>
            <StrtNm>ULICA</StrtNm>
            <BldgNb>321</BldgNb>
            <PstCd>11-111</PstCd>
            <TwnNm>MIEJSCOWOSC</TwnNm>
			<UnitNb>123</UnitNb>
            <Ctry>DE</Ctry>
          </PstlAdr>
      </Cdtr>
      <CdtrAcct>
        <Id>
          <Othr>
            <Id>DE72500700100092455500</Id>
          </Othr>
        </Id>
      </CdtrAcct>
      <RmtInf>
        <Ustrd>SEPA1</Ustrd>
      </RmtInf>
    </CdtTrfTxInf>
  </PmtInf>
</CstmrCdtTrfInitn></Document>
----

*Specyfikacja pól w pliku ISO20022 dla przelewu SWIFT*

[width="100%",cols="18%,8%,14%,37%,23%",options="header",]
|===
|*Nazwa elementu* |*Status* |*Format* |*Opis* |*Przykład*
5+|<?xml version=”1.0” encoding=”utf-8”?>
5+|<Document xmlns=”urn:iso:std:iso:20022:tech:xsd:pain.001.001.03” xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”>
|<CstmrCdtTrfInitn> 4+|
a|
 +<GrpHdr> 4+|
a|
 ++<MsgId> |M |35x |Identyfikator pliku płatności (weryfikacja duplikatów). Nie może zawierać spacji |
a|
 ++<CreDtTm> |M | |Data i czas utworzenia; RRRR-MM-DDTHH:MM:SS |2020-07-23T10:08:06
a|
 ++<NbOfTxs> |M |15d |Ilość zleceń w całym pliku |
a|
 ++<InitgPty> .5+<.^|O .5+<.^| .5+<.^|Kod identyfikacyjny zleceniodawcy .5+<.^|
a|
 +++Id
a|
 ++++PrvtId
a|
 +++++Othr
a|
 ++++++Id
a|
 +<PmtInf> 4+|
a|
 ++<PmtInfId> |M |35x |Identyfikator płatności |
a|
 ++<PmtMtd> |M |3!a |Typ operacji. Stała wartość TRF |TRF
a|
 ++<ReqdExctnDt> |M | |Data realizacji RRRR-MM-DD |
a|
 ++<Dbtr> ||||
a|
 +++<Nm> |M |70x |Nazwa instytucji zlecającej |
a|
 ++<DbtrAcct> .4+<.^|M .4+<.^|34x .4+<.^|Rachunek do obciążenia w formacie IBAN .4+<.^|PL30910100032002000015960001
a|
 +++<Id>
a|
 ++++Othr
a|
 +++++Id
a|
 ++<DbtrAgt> .2+<.^|M .2+<.^| .2+<.^| .2+<.^|
a|
 +++<FinInstnId>
a|
 ++++<BICFI> |M | |Pole zostawiamy puste |
a|
 ++ChrgsAcct .4+<.^|M .4+<.^|2!a26!n .4+<.^|Rachunek dla opłat w formcie NRB. .4+<.^|
a|
 +++Id
a|
 ++++Othr
a|
 +++++Id
a|
 ++<CdtTrfTxInf> ||||
a|
 +++<PmtId> | | | |
a|
 ++++<EndToEndId> |M |35x |Referencje. |
a|
 +++<PmtTpInf> | | | |
a|
 ++++<InstrPrty> |M |4!a |Tryb realizacji. Wartość NORM |NORM
a|
 +++<Amt> .2+<.^|M .2+<.^| .2+<.^|Kwota zlecenia. Zamiast ciągu AAA podajemy walutę zlecenia zgodną z ISO 4217. .2+<.^|<InstdAmt Ccy="USD">5.00
a|
 ++++<InstdAmt Ccy="AAA">
a|
 +++<ChrgBr> |M |4!a |
Rozliczenie opłat: +
- „CRED” – Koszty pokrywa odbiorca (ben) dot. DefBank  +
- „DEBT” – Koszty pokrywa zleceniodawca (our) +
- „SHAR” – Podzielone pomiędzy zleceniodawcą a beneficjentem (sha) +
|SHAR

a|
 +++<CdtrAgt> .3+<.^|M .3+<.^|11C .3+<.^|Kod SWIFT banku beneficjenta .3+<.^|GENODED1AAC
a|
 ++++<FinInstnId>
a|
 +++++<BIC>
a|
 +++<Cdtr> | | | |
a|
 ++++<Nm> |M |70x |Nazwa beneficjenta. |
a|
 ++++<PstlAdr> | | | |
a|
 +++++<Ctry> |M |2!a |Kraj (wg ISO 3166) |DE
a|
 +++++<StrtNm> |O |45x |Nazwa ulicy |
a|
 +++++<BldgNb> |O |5x |Numer domu |
a|
 +++++<PstCd> |O |8x |Kod pocztowy |
a|
 +++++<TwnNm> |M |34x |Nazwa miejscowości |
a|
 +++++<UnitNb> |O |5x |Numer mieszkania |
a|
 +++<CdtrAcct> .4+<.^|M .4+<.^|26!n .4+<.^|Numer rachunku beneficjenta .4+<.^|49168000075544715806960993
a|
 ++++<Id>
a|
 +++++<Othr>
a|
 ++++++<Id>
a|
 +++<Purp> .2+<.^|M .2+<.^|4!a .2+<.^|Typ zlecenia. Stała wartość FRGN .2+<.^|FRGN
a|
 ++++<Prtry>
a|
 +++<RmtInf> .2+<.^|M .2+<.^|140x .2+<.^|Tytuł zlecenia. .2+<.^|
a|
 +++<Ustrd>
|===

[underline]##Przykładowa zawartość pliku importu przelewów walutowych SWIFT w formacie ISO20022:##

[source, xml]
----
<?xml version="1.0" encoding="utf-8"?>
<Document xmlns="urn:iso:std:iso:20022:tech:xsd:pain.001.001.12" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <CstmrCdtTrfInitn>
    <GrpHdr>
      <MsgId>145</MsgId>
      <CreDtTm>2020-07-23T10:08:06</CreDtTm>
      <NbOfTxs>1</NbOfTxs>
      <InitgPty>
        <Id>
          <PrvtId>
            <Othr>
              <Id>Kod identyfikacyjny zleceniodawcy</Id>
            </Othr>
          </PrvtId>
        </Id>
       </InitgPty>
    </GrpHdr>
    <PmtInf>
      <PmtInfId>2017</PmtInfId>
      <PmtMtd>TRF</PmtMtd>
      <ReqdExctnDt>
        <Dt>2017-01-02</Dt>
      </ReqdExctnDt>
      <Dbtr>
        <Nm>Firma Test</Nm>
      </Dbtr>
      <DbtrAcct>
        <Id>
          <Othr>
            <Id>PL30910100032002000015960001</Id>
          </Othr>
        </Id>
      </DbtrAcct>
      <DbtrAgt>
        <FinInstnId>
          <BICFI>GENODED1AAC</BICFI>
        </FinInstnId>
      </DbtrAgt>
      <ChrgBr>SHAR</ChrgBr>
      <ChrgsAcct>
        <Id>
          <Othr>
            <Id>30910100032002000015960001</Id>
          </Othr>
        </Id>
      </ChrgsAcct>
      <CdtTrfTxInf>
        <PmtId>
          <EndToEndId>REFERENCJE SWIFT</EndToEndId>
        </PmtId>
        <PmtTpInf>
          <InstrPrty>NORM</InstrPrty>
        </PmtTpInf>
        <Amt>
          <InstdAmt Ccy="USD">6.00</InstdAmt>
        </Amt>
        <ChrgBr>SHAR</ChrgBr>
        <CdtrAgt>
          <FinInstnId>
            <BICFI>DEUTDEFFXXX</BICFI>
          </FinInstnId>
        </CdtrAgt>
        <Cdtr>
          <Nm>NAZWA ODBIORCY</Nm>
          <PstlAdr>
            <StrtNm>ULICA</StrtNm>
            <BldgNb>321</BldgNb>
            <PstCd>11-111</PstCd>
            <TwnNm>MIEJSCOWOSC</TwnNm>
			<UnitNb>123</UnitNb>
            <Ctry>DE</Ctry>
          </PstlAdr>
      </Cdtr>
        <CdtrAcct>
          <Id>
            <IBAN>DE18419030694610978870</IBAN>
          </Id>
        </CdtrAcct>
        <Purp>
          <Prtry>FRGN</Prtry>
        </Purp>
        <RmtInf>
		  <Ustrd>SWIFT shar</Ustrd>
        </RmtInf>
      </CdtTrfTxInf>
    </PmtInf>
  </CstmrCdtTrfInitn>
</Document>

----

==== Plik w formacie MT103

Struktura pliku i nazwa pliku powinny spełniać następujące wymagania:

* Plik może mieć dowolną nazwę
* Żaden pojedynczy plik nie może zawierać więcej niż 5000 wpisów
* Plik zawiera nagłówek i informacje o poszczególnych instrukcjach
* Linie są oddzielone znakami podziału linii <CR> <LF>
* Żadna linia nie może składać się z spacji lub tylko z <CR> <LF>
* Żadna linia nie może zaczynać się od znaku "-" (kreska), chyba że poprzedza ją spacja.
* Strona kodowa zgodna z Windows-1252 (zachodnioeuropejski)
*  Dozwolone zestawy znaków: a b c d e f g h i j k l m n o p q r s t u v w x y z A B C D E F G H I J K L M N O P
Q R S T U V W X Y Z 0 1 2 3 4 5 6 7 8 9 / -? : (). , ‘ + {} CR LF Space
* W tekście wiadomości nie można używać nawiasów klamrowych, ale można ich używać tylko jako
separatorów bloków wiadomości

Opis formatu:

* X - znak alfanumeryczny
* N - numer
* F - stała długość
* V - długość zmienna

Opis typu:
M = obowiązkowe
O = opcjonalnie
I* - pole obowiązkowe w przypadku przelewy SWIFT

NOTE: System rozpozna przelew SEPA jeśli waluta przelewu to EUR i opcja kosztów SHA.

*Specyfikacja pól w pliku MT103 dla przelewu walutowego*

[width="100%",cols="8%,72%,5%,15%",options="header",]
|===
|NR |OPIS |TYP |FORMAT
|:01: |Referencje zleceniodawcy |M |X(16)V
|:02: |Suma-suma kwot poleceń umieszczonych w pliku (niezależnie od waluty). Kwota z częścią dziesiętną (2 cyfry), oddzieloną znakiem "," (przecinek). |M |N(17) V
|:03: |Liczba zleceń płatniczych |M |N(5) V
|:04: |Kod SWIFT banku zleceniodawcy |I* |X(11) V
|:05: |Nazwa i adres zleceniodawcy +
Dane mogą być zapisane w kilku wierszach. +
Każdy wiersz musi być oddzielony znakiem końca wiersza <CR><LF>. |M |4*X(35) V
|:07: |Nazwa pliku |M |X(12) V
|:1:F01 |1:F01xxxxxxxxaxxxbbbbtttttt +
xxxxxxxxxaxxx Kod SWIFT banku zleceniodawcy (numer jednostki w formacie KIR X (8) + stała wartość "XXXX") +
Numer seryjny wiadomości bbbb (generowany automatycznie z zakresu 0001 - 9999) +
tttttt numer seryjny zamówienia w wiadomości (generowany automatycznie z zakresu 000001 - 999999) |M |\{1:F01 xxxxxxxxaxxxbbbbtttttt}
|2:I103 |2:I103xxxxxxxxxaxxxy +
xxxxxxxxxaxxx kod SWIFT banku kontrahenta +
typ płatności - stała wartość N |M |\{2:I100xxxxxxxxxaxxxY +
1}
|4: |Początek szczegółów zamówienia |M |\{4:
|:20: |Referencje zleceniodawcy |O |X(16) V
|:32A: |Data waluty (RRMMDD), +
Kod waluty (ISO), +
Kwota (ułamek dziesiętny (2 cyfry), oddzielony przez "," (przecinek)) |M |N(6) F +
X(3) F +
N(15) V
|:50K: |Nazwa i adres zleceniodawcy +
(wiersze po max. 35 znaków oddzielone znakiem <CR><LF>) |M |4*35(X) V
|:57A: |Kod SWIFT lub ID banku kontrahenta lub identyfikator banku kontrahenta |M |X(11) V
|:59: |Numer konta kontrahenta, nazwa i adres +
Znak ‘/’ (ukośnik) +
Numer rachunku kontrahenta +
Znaki spacji będą usuwane +
<CR><LF> +
Nazwa i adres kontrahenta (maksymalnie 4 wiersze po 35 znaków, poszczególne wiersze są oddzielone <CR> <LF>) |M |X(1) F +
X(34) V +
4*X(35) V
|:70: |Szczegóły płatności (maksymalnie 4 wiersze po 35 znaków, wiersze są oddzielone <CR> <LF>) |M |4*X(35) V
|:71A: |Rozliczenie kosztów +
+
W rozpoznaniu rozliczenia kosztów zostanie użyte następujące mapowanie: +
BN1 = SHA (koszty podzielone pomiedzy zleceniodawcą, a beneficjentem) +
BN2 = BEN (koszty pokrywa odbiorca) dot. DefBank +
OUR = OUR (koszty pokrywa zleceniodawca) |M |X(3) F
|-} |Koniec szczegółów polecenia |M |-}
|===

[underline]##Przykładowa zawartość pliku importu przelewów walutowych w formacie MT103:##

[source, txt]
----
:01:12345678
:02:74,30
:03:2
:04:POLUPLPR
:05:KLIENT TESTOWY
TESTOWA 6
03-115 WARSZAWA
POLSKA
:07:mt103PRZELEWY.TXT
{1:F010205561XXXX0002000001}{2:I103BARCGB22XXXN1}{4:
:20:REFsepa
:32A:140112EUR1550,60
:50K:/PL30910100032002000015960001
KLIENT TESTOWY
TESTOWA 6
03-115 WARSZAWA
POLSKA
:57A:BUKBGB22XXX
:59:/GB24BUKB20801470636843
JANINA KOWALSKI
Test
MIASTO
NIEMCY
:70:WPŁATA NA RACHUNEK
WPŁATA NA RACHUNEK
:71A:SHA
-}{1:F010205561XXXX0002000002}{2:I103BARCGB22XXXN1}{4:
:20:REF0swift
:32A:140112USD118,00
:50K:/PL30910100032002000015960001
KLIENT TESTOWY
TESTOWA 6
03-115 WARSZAWA
POLSKA
:57A:BUKBGB22XXX
:59:/GB24BUKB20801470636843
T. Morel
UL.TESTSTRASSE
0002625 BAUTZEN
Niemcy
:70: ROZLICZENIE
FV15000 EUR DATE 11 01 2014
DETAILS2
:71A:OUR
-}
----

=== Struktury plików importu szablonów
==== Plik w formacie XML

Dla pliku szablonów w formacie XML dozwolone jest stosowanie następujących tagów:

[cols="3,5",options="header",]
|===========================================================
|Tagi |Opis
|<kontrahenci></kontrahenci>|Otwiera i zamyka format importu w XML.
|<kontrahent></kontrahent> |Otwiera i zamyka dane dla jednego szablonu.
|<nazwa_kr></nazwa_kr>	|Nazwa krótka kontrahenta.
|<nazwa></nazwa>	|Nazwa pełna kontrahenta.
|<rachunek></rachunek>|Numer rachunku kontrahenta.
|===========================================================

Każde powtórzenie tagów <kontrahent> ... </kontrahent> oznacza dane nowego szablonu.

WARNING: Nazwy tagów w opisie struktury powinny być pisane małymi literami. Kolejność poszczególnych tagów w pliku musi być zachowana.

[underline]##Przykładowa zawartość pliku importu szablonów w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<kontrahenci>
<kontrahent>
<nazwa_kr>TEST</nazwa_kr>
<nazwa>ZAKLAD TESTOWY</nazwa>
<rachunek>51101010231234567890123456</rachunek>
</kontrahent>
<kontrahent>
<nazwa_kr>KLIENT</nazwa_kr>
<nazwa>KLIENT TESTOWY|UL. TESTOWA 11|MIASTO</nazwa>
<rachunek>48835500091234567890123456</rachunek>
</kontrahent>
</kontrahenci>
----

[underline]##Przykładowa zawartość pliku importu szablonów w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<kontrahenci>
<kontrahent>
<nazwa_kr>TEST117</nazwa_kr>
<rachunek>55132000061234567890123456</rachunek>
<nazwa>Janina Testowa</nazwa>
<kwota>5.50</kwota>
<tresc>/VAT/1.00/IDC/Popr ident1234/INV/Faktura12345678901234567890/TXT/tytuł12345678901234567890</tresc>
</kontrahent>
</kontrahenci>
----

==== Plik w formacie liniowym

W formacie liniowym dane odbiorców importowane są z pliku tekstowego o strukturze opisanej w pliku _schema.ini_. Informacja o pojedynczym kontrahencie zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających dane kontrahenta. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury ze _schema.ini_. Pola oddzielone są separatorem (określonym w pliku _schema.ini_) lub są stałej długości.

Dopuszczalny zestaw pól opisujących szablon wraz z formatem danych dla każdego pola przedstawiono w tabeli: +
*N* - pole numeryczne +
*C* - pole tekstowe +
*K* - pole zawierające kwotę. Kwota w formacie Zł,GR. Separatorem groszy jest przecinek.

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|IDENT* |20 |C |Skrócona nazwa odbiorcy. Pole nie jest obowiązkowe, w przypadku gdy nazwa skrócona nie zostanie zdefiniowana w pliku importu podstawiane jest 20 początkowych znaków z nazwy kontrahenta
|NAZWA |140 |C |Pełna nazwa odbiorcy 4x35 znaków
Jeśli w polu występują znaki pionowej linii - traktowane są jako separatory wierszy
Zamiast pola NAZWA mogą występować pola NAZWA1, NAZWA2, NAZWA3, NAZWA4 o długości 35 znaków każde
|RACHUNEK |34 |C |Numer rachunku kontrahenta
|* - dozwolona pusta wartość | | |
|====================

Poniżej przedstawiono przykładowy opis struktury z pliku _schema.ini_ definiującej plik z danymi odbiorców.

[source, txt]
----
[kontrah.txt]
ColNameHeader=False
Format=Delimited(;)
MaxScanRows=25
CharacterSet=OEM
Col1=IDENT Char Width 20
Col2=NAZWA1 Char Width 35
Col3=NAZWA2 Char Width 35
Col4=NAZWA3 Char Width 35
Col5=NAZWA4 Char Width 35
Col6=RACHUNEK Char Width 34
----

[underline]##Przykładowy opis struktury z pliku "schema.ini" definiującej plik z danymi odbiorców dla przelewu VAT.##
[source, txt]
----
[kontrah.txt]
ColNameHeader=False
Format=Delimited(;)
MaxScanRows=25
CharacterSet=OEM
Col1=IDENT Char Width 20
Col2=NAZWA1 Char Width 35
Col3=NAZWA2 Char Width 35
Col4=NAZWA3 Char Width 35
Col5=NAZWA4 Char Width 35
Col6=RACHUNEK Char Width 34
Col7=KWOTA Float
Col8=TYTUL1 Char Width 35
Col9=TYTUL2 Char Width 35
Col10=TYTUL3 Char Width 35
Col11=TYTUL4 Char Width 35
----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format= Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x – w powyższym przykładzie średnikiem.

Format =FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury mogą zostać pominięte.

Parametr ColNameHeader umożliwia wczytanie (wartość _False_) lub pominięcie podczas wczytywania (wartość _True_) pierwszego wiersza danych z importowanego pliku. Obecnie parametr ten może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia go, aplikacja przyjmuje domyślną wartość parametru – _False_.

[underline]##Przykładowa zawartość pliku z danymi odbiorców w formacie liniowym:##

[source, txt]
----
Jan;Jan Test;ul. Testowa 1;00-001;Miasto;51101010231234567890123456;
----

[underline]##Przykładowa zawartość pliku z danymi odbiorców dla przelewu VAT w formacie liniowym:##

[source, txt]
----
TEST_LINIOWY_VAT4;NAZWA1;NAZWA2;NAZWA3;NAZWA4;48 8355 0009 1234 5678 90123456;4,45;/VAT/0,40;/IDC/Identyfikator;/INV/Faktura;/TXT/tytul
----

Sposób wypełniania danych dotyczących VAT jest następujący (długość pola 33 znaki):

* w polu należy wprowadzić jednym ciągiem w odpowiedniej kolejności:
** słowo kodowe /VAT/, oznaczające że przelew jest przelewem typu VAT,
** słowo kodowe /IDC/, typ identyfikatora,
** słowo kodowe /INV/, dokument typu faktura,
** słowo kodowe /TXT/, tytuł płatności, pole opcjonalne.

==== Plik w formacie Telekonto

Plik importu szablonów w formacie Telekonto jest plikiem tekstowym. Pierwsza linia pliku stanowi nagłówek. W nagłówku określany jest rodzaj danych w pliku - w przypadku importu danych kontrahentów należy tam umieścić tekst "Kontrahenci".

Informacja o pojedynczym kontrahencie zajmuje jedną linię (jeden rekord) zakończoną znakiem <CRLF>.

Każda linia pliku składa się z pól oddzielonych znakiem "|" (pionowa kreska). Pola występują w ustalonej kolejności opisanej w tabeli poniżej.

Każda linia zawiera pola wymagane (muszą być wypełnione), pola opcjonalne (wypełnione mogą być, ale nie muszą) oraz pola, które nie są wczytywane do aplikacji Asseco EBP. Pojedyncza spacja pomiędzy separatorami pól oznacza pole puste. Brak tej spacji oznacza brak pola (pomimo występowania separatorów ||).

Puste pola końcowe rekordu mogą zostać pominięte.

Polskie znaki są kodowane w formacie ISO 8859-2.

Zestaw pól opisujących szablon: +
*C* - pole tekstowe.

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|Nazwa1 |35 |C |Nazwa kontrahenta –linia1
|Nazwa2* |35 |C |Nazwa kontrahenta – linia2
|Adres1* |35 |C |Adres kontrahenta – linia 1
|Adres2* |35 |C |Adres kontrahenta – linia2
|Numer konta |34 |C |Numer rachunku kontrahenta
|Nazwa banku1** |35 |C |Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|Nazwa banku2** |35 |C |Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|Adres banku1** |35 |C |Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|Adres banku2** |35 |C |Pole pomijane przy wczytywaniu do aplikacji Asseco EBP
|Identyfikator* |20 |C |Nazwa skrócona kontrahenta. Dozwolona pusta wartość, podstawiane jest 20 początkowych znaków z nazwy kontrahenta.
|* - pole opcjonalne**  +
     - pole pomijane przy wczytywaniu do aplikacji Asseco EBP |||
|====================

[underline]##Przykładowa zawartość pliku importu szablonów w formacie Telekonto:##

[source, txt]
----
Kontrahenci
MAREK |TEST |TESTOWA 1|00-123 WARSZAWA|41 8627 0001 2002 3009 0489 0001 |||||TELEMAREK|2|TYT
ANNA |TEST |TESTOWA 2|00-123 WARSZAWA|41 8627 0001 2002 3009 0489 0001|||||TELEKANNA|2|TYT
----

[underline]##Przykładowa zawartość pliku importu odbiorców dla przelewu VAT w formacie Telekonto:##

[source, txt]
----
Kontrahenci
PIOTR |TEST |TESTOWA 2|00-123 WARSZAWA|48 8355 0009 1234 5678 90123456|||||TELE_VAT22|3,00|/VAT/1,40/IDC/Identyfikator/INV/|Faktura/TXT/tytul
----

Sposób wypełniania pola *tytułem1* w przelewach VAT jest następujący:

* w polu należy wprowadzić jednym ciągiem w odpowiedniej kolejności:
** słowo kodowe /VAT/, oznaczające że przelew jest przelewem typu VAT,
** słowo kodowe /IDC/, typ identyfikatora,
** słowo kodowe /INV/, dokument typu faktura,
** słowo kodowe /TXT/, tytuł płatności, pole opcjonalne.

=== Struktury plików importu szablonów przelewów walutowych
==== Plik w formacie XML

Dla pliku szablonów w formacie XML dozwolone jest stosowanie następujących tagów:

[cols="3,5",options="header",]
|===========================================================
|Tagi |Opis
|<kontrahenci></kontrahenci>|Otwiera i zamyka format importu w XML.
|<kontrahent></kontrahent> |Otwiera i zamyka dane dla jednego szablonu.
|<nazwa_kr></nazwa_kr>	|Nazwa szablonu - maksymalna ilość znaków w polu wynosi 20. Pole obowiązkowe i unikalne.
|<nazwa></nazwa> |Nazwa odbiorcy - pole obowiązkowe.
|<rachunek></rachunek>|Numer rachunku odbiorcy - pole obowiazkowe.
|<waluta></waluta> |Waluta przelewu w szablonie - pole opcjonalne. Podawany jest kod waluty np. PLN, EUR, USD itd.
|<swift></swift> |Kod SWIFT odbiorcy zagranicznego - pole opcjonalne. Alernatywnie może zostać użyty tag </kod_swift>, jednakże tag <swift> ma pierwszeństwo w interpretacji.
|<tresc></tresc> |Tytuł przelewu w szablonie. Pole opcjonalne.
|<koszty></koszty> | Opcja kosztów, dozwolone wartości: OUR/BEN/SHA. Pole nie jest wymagane. W przypadku braku tagu w pliku importu po zaimportowaniu przelewu wstawiana jest wartosc SHA.
|===========================================================

Każde powtórzenie tagów <kontrahent> ... </kontrahent> oznacza dane nowy szablon.
Zamiast tagu <nazwa> mogą występować tagi <nazwa1>, <nazwa2>, <nazwa3>, <nazwa4>.
W przypadku obecności tagu <nazwa1>, tag <nazwa> będzie ignorowany. W przypadku braku tagu <nazwa1> dane będą w całości brane z tagu <nazwa>.
Analogicznie zamiast tagu <tresc> mogą występować tagi <tresc1>, <tresc2>, <tresc3> oraz <tresc4>.W przypadku obecności tagu <tresc1>, tag <tresc> będzie ignorowany.
W przypadku braku tagu <tresc1> dane będą w całości brane z tagu <tresc>.

WARNING: Nazwy tagów w opisie struktury powinny być pisane małymi literami. K W przypadku, gdy parametr IMPORTS_XML_CASE_SENSITIVE jest włączony, system Asseco EBP weryfikuje wielkość liter w tagach. Kolejność poszczególnych tagów w pliku nie musi być zachowana. Dozwolone jest zastosowanie tagów <nr_odb>, <typ> oraz <limit_zlec_j> jednak wartości zdefiniowane w tagach będą ignorowane przez system Asseco EBP.

[underline]##Przykładowa zawartość pliku importu szablonów przelewów walutowych w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<kontrahenci>
<kontrahent>
<nazwa_kr>Zagraniczny</nazwa_kr>
<nazwa>ZAKLAD TESTOWY</nazwa>
<rachunek>51101010231234567890123456</rachunek>
<kwota>10.40</kwota>
<waluta>USD</waluta>
<swift>DRESDEFF350</swift>
<tresc>oplata testowa</tresc>
<koszty>SHA</koszty>
</kontrahent>
</kontrahenci>
----


==== Plik w formacie liniowym

W formacie liniowym dane odbiorców importowane są z pliku tekstowego o strukturze opisanej w pliku _schema.ini_. Informacja o pojedynczym kontrahencie zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających dane kontrahenta. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury ze _schema.ini_. Pola oddzielone są separatorem (określonym w pliku _schema.ini_) lub są stałej długości.

Dopuszczalny zestaw pól opisujących szablon wraz z formatem danych dla każdego pola przedstawiono w tabeli: +
*N* - pole numeryczne +
*C* - pole tekstowe +
*K* - pole zawierające kwotę. Kwota w formacie Zł,GR. Separatorem groszy jest przecinek.

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|NAZWA_KR |20 |C |Nazwa szablonu. Pole obowiązkowe i unikalne
|NAZWA |140 |C |Pełna nazwa odbiorcy 4x35 znaków
Jeśli w polu występują znaki pionowej linii - traktowane są jako separatory wierszy
Zamiast pola NAZWA mogą występować pola NAZWA1, NAZWA2, NAZWA3, NAZWA4 o długości 35 znaków każde.
|RACHUNEK |34 |C |Numer rachunku odbiorcy.
|KWOTA* |12/2 |K |Kwota przelewu.
Można wprowadzić kwotę 12 zanków (wliczając separator). Pole opcjonalne.
|WALUTA* |3 |C |Kod waluty przelewu, np.: PLN, USD, EUR itd. Pole opcjonalne.
|SWIFT* |11 |C |Kod SWIFT odbiorcy zagranicznego. Pole opcjonalne.
|TRESC* |140 |C |Tytuł przelewu -  4x35 znaków.
Jeśli w polu występują znaki pionowej linii - traktowane są jako separatory wierszy.
Zamiast pola TRESC mogą występować pola TRESC 1, TRESC 2, TRESC 3, TRESC4 o długości 35 znaków każde.
Pole opcjonalne.
|KOSZTY |3 |C |Opcja kosztów.
Dozwolone wartości : OUR, BEN, SHA.
Pole nie jest wymagane. W przypadku braku wartości w polu po zaimportowaniu przelewu wstawiana jest wartość SHA.
|* - dozwolona pusta wartość | | |
|====================

[underline]##Przykładowy opis struktury z pliku _schema.ini_ definiującej plik z danymi dla szablonu przelewu walutowego:##

[source, txt]
----
[szablony.txt]
ColNameHeader=False
Format=Delimited(;)
MaxScanRows=1000
CharacterSet=OEM
Col1=NAZWA_KR Char Width 20
Col2=NAZWA1 Char Width 35
Col3=NAZWA2 Char Width 35
Col4=NAZWA3 Char Width 35
Col5=NAZWA4 Char Width 35
Col6=RACHUNEK Char Width 34
Col7=KWOTA Float
Col8=WALUTA Char Width 11
Col9=SWIFT Char Width 3
Col10=TYTUL1 Char Width 35
Col11=TYTUL2 Char Width 35
Col12=TYTUL3 Char Width 35
Col13=TYTUL4 Char Width 35
Col14=KOSZTY Char Width 3

----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami oraz nie powinny zawierać spacji.

Rodzaj separatora pól rekordu określa parametr Format. +
Format=Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x - w powyższym przykładzie średnikiem. +
Format=FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury. +
Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury mogą zostać pominięte. +

Parametr ColNameHeader umożliwia wczytanie (wartość False) lub pominięcie podczas wczytywania (wartość True) pierwszego wiersza danych z importowanego pliku. Obecnie parametr ten może przyjmować tylko wartość False. W przypadku wpisania innej wartości dla parametru lub pominięcia go, aplikacja przyjmuje domyślną wartość parametru - False.

[underline]##Przykładowa zawartość pliku z danymi szablonu przelewu walutowego w formacie liniowym:##
[source, txt]
----
Zagr;Jan Zagraniczny;ul. Testowa 1;00001;Miasto;63870700060000717130000002;10,00;PLN;DRESDEFF350;TRESC1;TRESC2;TRESC3;TRESC4;SHA
----

=== Struktura plików eksportu operacji z historii rachunku
==== Plik w formacie XML

W formacie XML dozwolone są następujące tagi:

[cols="4,5",options="header",]
|===========================================================
|Tagi |Opis
|<operacje></operacje>|Otwiera i zamyka format eksportu w XML.
|<operacja num="numer kolejny operacji na liscie"></operacja> |Otwiera i zamyka dane dla jednej operacji.
|<id></id>	|Identyfikator trancakcji.
|<data_waluty></data_waluty> |Data waluty.
|<rodzaj></rodzaj> |Rodzaj operacji.
|<rachunek_o></rachunek_o> |Nr rachunku odbiorcy, jezeli brak to </rachunek_o>.
|<rachunek_n></rachunek_n> |Nr rachunku nadawcy.
|<kwota></kwota> |Kwota operacji.
|<strona></strona> |Strona operacji.
|<waluta></waluta> |Waluta rachunku obciążanego (dla strony MA) lub uznawanego (dla strony WN).
|<nazwa1></nazwa1> |Nazwa odbiorcy (dla strony Wn) lub nadawcy (dla strony Ma) -linia1.
|<nazwa2></nazwa2> |Nazwa odbiorcy – linia 2.
|<nazwa3></nazwa3> |Nazwa odbiorcy – linia 3.
|<nazwa4></nazwa4> |Nazwa odbiorcy – linia 4.
|<tresc_1></tresc_1> |Opis operacji – linia 1.
|<tresc_2></tresc_2> |Opis operacji – linia 2.
|<tresc_3></tresc_3> |Opis operacji – linia 3.
|<tresc_4></tresc_4> |Opis operacji – linia 4.
|===========================================================

Każde powtórzenie tagów <operacja> ... </operacja> jest traktowane jako kolejna operacja z zestawienia.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Przykładowa zawartość pliku eksportu operacji z historii rachunku w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="ISO-8859-2"?>
<operacje>
  <operacja num="1">
    <id>162131886</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Pobranie oplaty</rodzaj>
    </rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>10.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Bank</nazwa1>
    <tresc1>OPLATY i PROWIZJIE-przelew testowy</tresc1>
  </operacja>
  <operacja num="2">
    <id>162131884</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Przelew wychodzacy zewnetrzny</rodzaj>
    <rachunek_o>52156011375468963184679874</rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>25.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Odbiorca Szablonowy</nazwa1>
    <tresc1>przelew testowy</tresc1>
  </operacja>
  <operacja num="3">
    <id>162131876</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Przelew przychodzacy wewnetrzny</rodzaj>
    <rachunek_o>91216000032999000002100001</rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>45.00</kwota>
    <strona>MA</strona>
    <waluta>PLN</waluta>
    <nazwa3>os. OSIEDLE 1/1 </nazwa3>
    <nazwa4>11-111 MIEJSCOWOSC</nazwa4>
    <tresc1>przelew wlasny testowy</tresc1>
  </operacja>
  <operacja num="4">
    <id>161331874</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Pobranie oplaty</rodzaj>
    </rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>10.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Bank</nazwa1>
    <tresc1>OPLATY i PROWIZJIE-testowy z szablonu</tresc1>
  </operacja>
  <operacja num="5">
    <id>161331872</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Przelew wychodzacy zewnetrzny</rodzaj>
    <rachunek_o>52156011375468963184679874</rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>15.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Odbiorca Szablonowy</nazwa1>
    <tresc1>testowy z szablonu</tresc1>
  </operacja>
</operacje>
----

==== Plik w formacie liniowym

W pliku eksportu zestawienia operacji z historii rachunku w formacie liniowym informacja o pojedynczej operacji zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających poszczególne dane operacji. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury zdefiniowanym w pliku _schema.ini_. Pola oddzielone są separatorem (określonym w pliku "schema.ini") lub są stałej długości.

Dopuszczalny zestaw pól opisujących dane operacji wraz z formatem danych dla każdego pola przedstawiono w poniższej tabeli.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, +
*C* - pole tekstowe, +
*D* - data w formacie RRRR-MM-DD, gdzie RRRR - rok, MM - miesiąc, DD - dzień, (np. 2010-04-01), +
*K* - pole zawierające kwotę. Kwota w formacie Zł.GR. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|DATA |10 |D |Data waluty
|RODZAJ |100 |C |Rodzaj operacji
|KWOTA |12/2 |K |Kwota operacji
|STRONA |1 |C |Strona operacji: D - Debit (Winien), C - Credit (Ma)
|WALUTA |3 |C |Waluta rachunku obciążanego (dla strony MA) lub uznawanego (dla strony WN)
|NAZWA1 |35 |C |Nazwa kontrahenta - wiersz 1
|NAZWA2 |35 |C |Nazwa kontrahenta - wiersz 2
|NAZWA3 |35 |C |Nazwa kontrahenta - wiersz 3
|NAZWA4 |35 |C |Nazwa kontrahenta - wiersz 4
|TRESC1 |35 |C |Treść operacji - wiersz 1
|TRESC2 |35 |C |Treść operacji - wiersz 2
|TRESC3 |35 |C |Treść operacji - wiersz 3
|TRESC4 |35 |C |Treść operacji - wiersz 4
|====================

[underline]##Przykładowy opis struktury dla pliku z danymi o operacjach z historii rachunku:##

[source, txt]
----
[operacje_biez.txt]
ColNameHeader=False
Format=Delimited(;)
AmountFormat=,
MaxScanRows=25
CharacterSet=OEM
Col1=DATA Char Width 10
Col2=RODZAJ Char Width 100
Col3=KWOTA Float
Col4=STRONA Char Width 1
Col5=WALUTA Char Width 3
Col6=NAZWA1 Char Width 35
Col7=NAZWA2 Char Width 35
Col8=NAZWA3 Char Width 35
Col9=NAZWA4 Char Width 35
Col10=TRESC1 Char Width 35
Col11=TRESC2 Char Width 35
Col12=TRESC3 Char Width 35
Col13=TRESC4 Char Width 35
----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format=Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x - w poniższym przykładzie średnikiem.

Format=FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

AmountFormat umożliwia zdefiniowanie separatora kwoty (pozycja opcjonalna). W przypadku braku skonfigurowania znacznika zostanie zastosowany domyślny separator (dla formatu liniowego jest to kropka).
Wartość znacznika AmountFormat może zawierać wyłącznie jeden znak. W przypadku podania więcej niż jednego znaku system zgłosi błąd struktury.


Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury _schema.ini_ mogą zostać pominięte.

Polskie znaki kodowane są w UTF-8.

Parametr ColNameHeader może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia parametru w pliku _schema.ini_, aplikacja przyjmuje domyślną wartość parametru - _False_.

[underline]##Przykładowa zawartość pliku eksportu operacji z historii rachunku w formacie liniowym:##

[source, txt]
----
2009-07-04;Przelew wychodzacy wewnetrzny;500;D;PLN;BANK W MIESCIE;IE;ul. Testowa 1 00-111 MIASTO;;Przelew wychodzacy wewnetrzny;Na rachunek: 50 1610 1133 3003 0000 6956 0028;Odbiorca: BANK W MIESCIE,IE,ul. Testowa 1;;
2009-07-04;Przelew wychodzacy do Urzedu Skarbowego;11,11;D;PLN;Urzad Skarbowy Miasto;;;;Przelew do Urzedu Skarbowego na rachunek :;51 1010 1078 0024 1122 2100 0000;Typ identyfikatora: PESEL;Identyfikator: 79020107897;
2009-07-04;Przelew wychodzacy zewnetrzny;1;D;PLN;Test;;;;Przelew wychodzacy zewnetrzny;Na rachunek: 08 1320 1117 3004 4000 0024 0001;Prowadzony na rzecz: Test,,,;Tytulem: 1;
----

==== Plik w formacie MT940

Plik eksportu zestawienia operacji z historii rachunku w formacie MT940 składa się z 3 sekcji: pierwszej, drugiej i czwartej.

Sekcje pierwsza i druga rozpoczynają się i kończą w pierwszej linii komunikatu. Również ich pola znajdują się w pierwszej linii pliku. Sekcja czwarta rozpoczyna się w pierwszej linii jednak każde jej pole umieszczone musi być w nowej linii – również zamknięcie sekcji czwartej znajduje się w nowej, ostatniej linii komunikatu. Sekcje otwierają i zamykają znaki klamry: '{' i '}'.

Polskie znaki kodowane są w ISO 8859-2.

Układ sekcji i ich pól (opis pól znajduje się w dalszej części dokumentacji) dla komunikatu MT940 jest następujący:

[source, txt]
----
{1:F01                     }{2:O940                                          N}{4:
:20:
:25:
:28:
:60F: (lub :60M:)
:61:
:86:
:62F: (lub :62M:)
-}
----
*Warunki budowania pliku:*

* przed każdą linią stosuje się ciąg znaków <CR><LF>

* żadna z linii nie może być pusta lub składać się z samej spacji,

* żadna z linii (z wyjątkiem ostatniej linii sekcji 4 oraz linii składowych pola :86:) nie może zaczynać się od znaku ‘-’ (myślnika),

* zestaw dopuszczalnych znaków SWIFT zawiera znaki: 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '/', '', '?', ':', '(', ')', '.', ',', ''', '+', '\{', '}', 'CR', 'LF', ' '.

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +
5*65s - do pięciu linii, każda po maksymalnie 65 dowolnych znaków SWIFT.

*Specyfikacja pól w pliku MT940*

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|F01 .2+<.^|Nagłówek sekcji 1 <.^|22!n |
Modulo Klienta.

Pole uzupełniane od tyłu spacjami do 22 znaków.

|[underline]##Przykład:## |‘**F01**123456 ’
.2+<.^|O940 .2+<.^|Nagłówek sekcji 2 <.^|42!nN |
Modulo Klienta poprzedzone 10 znakami spacji.

Pole uzupełniane od tyłu spacjami do 43 (razem z końcowym znakiem ‘N’).

Pierwsze 10 znaków to spacje. Ostatni znak to ‘N’.

|[underline]##Przykład:## |*‘0940* 123456 N’
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!c/9c |
Pierwszy ciąg znaków to data początkowa zestawienia w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.3+<.^|:25: .3+<.^|Identyfikator rachunku <.^|32n |Numer NRB rachunku.
|[underline]##Przykład 1:## |‘:**25**:12 3456 7890 1234 5678 9012 3456’
|[underline]##Przykład 2:## |‘:**25**:12345678901234567890123456’
.2+<.^|:28: .2+<.^|Numer zestawienia <.^|5c/3c a|
Pierwszy ciąg znaków to identyfikator zestawienia (w przykładzie ‘10’). Dla zestawienia nie posiadającego identyfikatora prezentowany jest ciąg pusty.

Drugi ciąg znaków to numer sekwencyjny kolejnych części zestawienia (w przykładzie ‘4’).

|[underline]##Przykład:## |‘:**28**:10/4’
.6+<.^|:60F: .6+<.^|Saldo początkowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego zestawienia operacji.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k22!s4c

<CR><LF>20s

|Format całego pola - łącznie do 68 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|22!s4c |
Referencja operacji składająca się *ze stałego ciągu 22 znaków*: ‘FMSCNONREF //’ oraz liczby porządkowej operacji na zestawieniu.

Przykład: ‘FMSCNONREF //7’.

.3+<.^|:86: .3+<.^|Szczegóły operacji <.^|Oddzielne pole typu s
|Numer rachunku beneficjenta transakcji zakończony kombinacją znaków <CR><LF>.
|5*65s |
Nazwa kontrahenta i tytuł płatności (każdą linię poprzedza kombinacja znaków <CR><LF>).

Pole nie jest uzupełniane pustymi liniami ani znakami spacji.

|[underline]##Przykład:##|
‘:**86**:12123456781234567890123456

FIRMA S.A.ul. Testowa 1400-111 Miasto Szkolenie, nr uczestnika 123’

.6+<.^|:62F: .6+<.^|Saldo końcowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda końcowego zestawienia operacji.
|[underline]##Przykład:## |‘:**62**F:C060302PLN25,00’
.7+<.^|:60M:

(:62M:)

.7+<.^|Saldo początkowe (końcowe) części zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa (końcowa) części zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego (końcowego) części zestawienia operacji.
|[underline]##Przykład 1:## |‘:**60M**:C060302PLN12,34’
|[underline]##Przykład 2:## |‘:**62M**:C060302PLN25,00’
|====================


[source, txt]
----
{1:F01100                   }{2:O940          100                             N}{4:
:20:090704/100
:25:20161011332003000000400001
:28:/1
:60F:C090704PLN113716,93
:61:0907040704D11,11FMSCNONREF //1
:86:86156000132015000001270001
Przelew wychodzacy zewnetrznyNa rachunek: 86 1560 0013 2015 0000
0127 0001Prowadzony na rzecz: bez daty zakTytulem: faktura nr 1
:61:0907040704C2121,00FMSCNONREF //2
:86:90161011332003000000400002
FIRMAul. TESTOWA 4/2315-615 RZESZOW
Przelew przychodzacy wewnetrznyZ rachunku: 90 1610 1133 2003 0000
0040 0002Nadawca: FIRMAul. TESTOWA 4/2315-615 RZESZOWTytulem:
Polecenie
:61:0907040704D1000,00FMSCNONREF //3
:86:44161011331003000000400002
FIRMAul. TESTOWA 4/2315-615 RZESZOW
Przelew wychodzacy wewnetrznyNa rachunek: 44 1610 1133 1003 0000
0040 0002Odbiorca: FIRMAul. TESTOWA 4/2315-615 MiastoTytulem:
Polecenie
:61:0907040704D1010,00FMSCNONREF //4
:86:44161011331003000000400002
FIRMAul. TESTOWA 4/2315-615 Miasto
Przelew wychodzacy wewnetrznyNa rachunek: 44 1610 1133 1003 0000
0040 0002Odbiorca: FIRMAul. TESTOWA 4/2315-615 MiastoTytulem:
Polecenie
:61:0907040704D566,98FMSCNONREF //5
:86:06161011333003000000400014
FIRMAul. TESTOWA 4/2315-615 RZESZOW
Przelew wychodzacy wewnetrznyNa rachunek: 06 1610 1133 3003 0000
0040 0014Odbiorca: FIRMAul. TESTOWA 4/2315-615 RZESZOWTytulem:
Lokata nr 1
:62F:C090704PLN113272,06
-}
----

==== Plik w formacie MT940/MultiCash

Plik eksportu zestawienia operacji z historii rachunku w formacie MT940/MultiCash posiada taka samą strukturę jak w przypadku struktury w formacie MT940 za wyjątkiem prezentacji dodatkowych danych w polu *86*.

Polskie znaki kodowane są w ISO 8859-2.

Poniżej zaprezentowano specyfikację podpól dla pola *:86:*

Założenia:

Pole *:86:* składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli.

Separatorem podpól jest znak <.

W przypadku, gdy podpole nie posiada wartości całe podpole (łącznie z etykietą) jest również prezentowane.

[cols="3,15",options="header",]
|================================================================================================================
|*Etykieta* |*Opis*
|<10 |Numer porządkowy
|<20 |Tytuł operacji – linia1
|<21 |Tytuł operacji – linia2
|<22 |Tytuł operacji – linia3
|<23 |Tytuł operacji – linia4
|<27 |Nazwa kontrahenta - beneficjenta dla zleceń wychodzących, zleceniodawcy dla zleceń przychodzących
|<28 |Nazwa kontrahenta - beneficjenta dla zleceń wychodzących, zleceniodawcy dla zleceń przychodzących
|<38 |Numer rachunku kontrahenta – beneficjenta dla zleceń wychodzących, zleceniodawcy dla zleceń przychodzących.
|<61 |Numer rachunku wirtualnego (jeśli brak płatność nie dotyczy rachunków wirtualnych, pole będzie puste)
|================================================================================================================

[underline]##Przykład pliku eksportu operacji w formacie MT940/MulltiCash:##

[source, txt]
----
{1:F01100                   }{2:O940          100                             N}{4:
:20:170607/61506
:25:05156000132203000615060017
:28:/1
:60F:C170607PLN15,00
:61:1706070607C25,50FMSCNONREF          //1
:86:<101
<20Naliczenie odsetek
<21
<22
<23
<27JAN TEST<28TEST
<3805156000132203000615060017
<61
:61:1706070607D5,00FMSCNONREF           //2
:86:<102
<20Naliczenie odsetek
<21
<22
<23
<27JAN TEST
<28TEST
<38<
61
:61:1706070607D1,88FMSCNONREF           //3
:86:<103
<20tytul platnosci 1
<21tytul platnosci 2
<22tytul platnosci 3
<23tytul platnosci 4
<27Alicja Test
<28Nazwa kontrahenta
<3802156011372108008635910001
<61
:62F:C170607PLN10,00
-}
----

==== Plik w formacie MT940 SABA

Plik eksportu wyciągów w formacie MT940 SABA składa się z sekcji, podzielonej na bloki, których układ jest następujący:

Nagłówek wyciągu: +
:20: +
:25: +
:28C: +
:60F: +

Blok operacji: +
:61: +
:86: +

Blok końca wyciągu: +
:62F: +
:64: +

Format danych:
*n* - tylko cyfry

*a* - tylko litery

*c* - tylko znaki alfanumeryczne

*x* - dowolne znaki alfanumeryczne łącznie z przecinkami, spacjami , itp.

*d* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’)

Przykłady oznaczania formatu pól:

*2n* – maksymalnie 2 cyfry

*3!a* – dokładnie 3 litery;

*4*35x* - do 4 linii, każdą po maksymalnie 35 dowolnych znaków alfanumerycznych

Znak końca linii: *CRLF*

Polskie znaki kodowane są w standardzie  *ISO 8859-2*.

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|5!c |
Tekst stały: MT940

|[underline]##Przykład:## |‘**:20:**MT940**CRLF** ’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|1!x2!a26!n |
Znak ‘/’ i numer IBAN rachunku,gdzie +
IBAN=PLSSBBBBBBBBRRRRRRRRRRRRRRRR +
PL- kod kraju długości 2!a +
SS-cyfry kontrolne długości 2!n +
BBBBBBBB - numer jednostki banku długości 8!n +
Identyfikator rachunku w jednostce banku długości 16!n

|[underline]##Przykład:## |‘:25:/PL51101010231234567890123456CRLF’
.2+<.^|:28C: .2+<.^|Numer wyciągu <.^|5!n |
5!n Numer kolejny wyciągu w danym roku kalendarzowym
|[underline]##Przykład:## |‘:28C:00136CRLF’
.6+<.^|:60F: .6+<.^|Saldo początkowe wyciągu <.^|1!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a|Strona - znak ‘C’ dla salda Ma lub znak ‘D’ dla salda Wn
|6!n|Data początkowa wyciągu w formacie RRMMDD.
|3!a|Symbol waluty.
|15d|Kwota salda początkowego wyciągu (separator dziesiętny (,) przecinek)
|[underline]##Przykład:## |:60F:C060302PLN12,34CRLF

.9+<.^|:61: .9+<.^|Szczegóły każdej operacji
|6!n4! n1a15d1! a30n8!a|Format całego pola – łącznie do 65 znaków (nie
wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n|Data waluty w formacie RRMMDD.
|4!n|Data księgowania w formacie MMDD
|1!a|Strona księgowania: znak C lub D
|15d|Kwota operacji (separator dziesiętny (,) przecinek)
|1!a|Symbol operacji: znak N
|30n|Numer systemowy operacji składany z daty operacji w formacie yyyyMMdd, nr dokumenu i nr dekretu na 4 znakach uzupełniony zerami wiodącymi jeśli jest krótszy
|8!a|Stała wartość ‘NONREF//’
|[underline]##Przykład:## |‘:61:0603020302D11,23N2017070601000000000000000669NONREF// CRLF’
.2+<.^|:86: .2+<.^|Opis transakcji <.^|3!n |
Kod operacji, tekst stały: 020

|podpola z separatorem „~” |Specyfikacja podpól dla pola :86: - założenia:

1. Pole :86: składa się z podpól oznaczonych etykietami (zestaw podpól zamieszczono w tabeli poniżej)

2. Podpola oznaczone statusem M są obowiązkowe, podpola o statusie O są opcjonalne.

3. Separatorem podpól jest znak „~”
.6+<.^|:62F: .6+<.^|Saldo końcowe wyciągu <.^|1!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a|Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n|Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!a|Symbol waluty.
|15d|Kwota salda końcowego wyciągu (separator dziesiętny (,) przecinek)
|[underline]##Przykład:## |:62F:C060302PLN25,00CRLF

.6+<.^|:64: .6+<.^|Wartość dostępnych środków <.^|1!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a|Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n|Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!a|Symbol waluty.
|15d|Kwota salda końcowego wyciągu (separator dziesiętny (,) przecinek)
|[underline]##Przykład:## |:62F:C060302PLN25,00CRLF

|====================

Tabela podpól pola :86: (Opis transakcji)
[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Status* |*Format* |*Opis*
<.^|~00 <.^|M <.^|30n | Numer systemowy operacji składany z daty operacji w formacie yyyyMMdd, nr dokumenu i nr dekretu na 4 znakach uzupełniony zerami wiodącymi jeśli jest krótszy
<.^|~20 <.^|M <.^|35x | Tytuł operacji – linia 1
<.^|~21 <.^|O <.^|35x | Tytuł operacji – linia 2
<.^|~22 <.^|O <.^|35x | Tytuł operacji – linia 3
<.^|~23 <.^|O <.^|35x | Tytuł operacji – linia 4
<.^|~24 <.^|O <.^|35x | Tytuł operacji – linia 5
<.^|~25 <.^|O <.^|35x | Tytuł operacji – linia 6
<.^|~30 <.^|O <.^|8-12x | Numer rozliczeniowy banku kontrahenta. Numer jest 8-cyfrowy w przypadku banków w Polsce. Dla banków umiejscowionych poza granicami Polski numer może być różny od 8 znaków, nie większy jednak niż 12.
<.^|~31 <.^|O <.^|26x | Numer rachunku kontrahenta.
<.^|~32 <.^|M <.^|35x | Nazwa kontrahenta- linia 1
<.^|~33 <.^|O <.^|35x | Nazwa kontrahenta- linia 2
<.^|~38 <.^|O <.^|2!a26n | Rachunek kontrahenta lub rachunek wirtualny w formacie IBAN: przed 26znakowym numerem dodany jest 2-literowy kod kraju
<.^|~60 <.^|O <.^|35x | Informacja o opłacie za przelew, tekst stały "PROWIZJA:"
<.^|~62 <.^|O <.^|35x | Dane kontrahenta, c.d.
<.^|~63 <.^|O <.^|35x | Dane kontrahenta, c.d. oraz dodany teskst stały "SWRK"
<.^| <.^| <.^|Przykład | pass:[':86:020~002017070601000000000000018972~20Prowizja od operacji~21~22~23~24~25~30 ~31~32BS W BYDGOSZCZY~3385-080 BYDGOSZCZ KOŁŁĄTAJA 8~38~60PROWIZJA:~63CRLF']
|====================
[underline]##Przykład pliku eksportu operacji w formacie MT940 SABA:##

[source, txt]
----

:20:MT940
:25:/PL22880900052001000267780001
:28C:00123
:60F:C180817PLN13875,48
:61:1808170817C0,66N2018081716NONREF//
:86:020~002018081716~20rozlicz.odsetek~21~22~23~24~25~3088090005~3103880900054001000267780059~32KOWALSKA ULA~33~38~60PROWIZJA:~62~63SWRK
:61:1808170817D0,02N2018081784NONREF//
:86:020~002018081784~20ZS codzinne~21~22~23~24~25~3011300007~3153113000075115048273285530~32x~33~38~60PROWIZJA:~62~63SWRK
:61:1808170817D11,57N2018081785NONREF//
:86:020~002018081785~20przelew środków ZS regres~21~22~23~24~25~3011300007~3153113000075115048273285530~32maria kopernika 12/19 12-028 │Łódź~33~38~60PROWIZJA:~62~63SWRK
:61:1808170817D8,25N2018081786NONREF//
:86:020~002018081786~20przelew środków~21~22~23~24~25~3011300007~3153113000075115048273285530~32maria kopernika 12/19 12-028 │Łódź~33~38~60PROWIZJA:~62~63SWRK
:62F:C180817PLN13856,30
:64:C180817PLN13856,30



----


==== Plik w formacie MT940/MultiCash (format CEB)

Plik eksportu operacji w formacie MT940/Multicash (format CEB) składa się z 1 sekcji, podzielonej na bloki, których układ jest następujący:

Nagłówek wyciągu: +
:20: +
:25: +
:28C: +
:60F: +
Blok operacji: +
:61: +
:86: +
Blok końca wyciągu: +
:62F: +

Oznaczenia użyte w opisie formatu:

Status pola: M - obowiązkowy, O - opcjonalny

Format  danych: +
*n* - tylko cyfry  +
*a* - tylko litery  +
*c* - tylko znaki alfanumeryczne  +
*x*- dowolne znaki alfanumeryczne łącznie z przecinkami, spacjami , itp.  +
*d*- liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’)  +

Przykłady oznaczania formatu pól: +
*2n* - maksymalnie 2 cyfry +
*3!a* - dokładnie 3 litery; +
*4*35x* - do 4 linii, każda po maksymalnie 35 dowolnych znaków alfanumerycznych +

Specyfikacja pól w pliku MT940/Multicash:

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!n/9n |
Pierwszy ciąg znaków to data początkowa wyciągu w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘**:20:**060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|2!a26!n |
Numer IBAN rachunku,
gdzie IBAN=PLSSBBBBBBBBRRRRRRRRRRRRRRRR
PL- kod kraju długości 2!a
SS-cyfry kontrolne długości 2!n
BBBBBBBB-numer jednostki banku długości 8!n
RRRRRRRRRRRRRRRR-identyfikator rachunku w jednostce banku długości 16!n

|[underline]##Przykład:## |‘**:25:**PL51101010231234567890123456’

.1+<.^|:28C: 3+|Pusta wartość
.6+<.^|:60F: .6+<.^|Saldo początkowe wyciągu <.^|1!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data początkowa wyciągu w formacie RRMMDD.
|3!a |Symbol waluty.
|15d |Kwota salda początkowego wyciągu.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!n4!n2a15d
|Format całego pola - łącznie do 27 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n |Data waluty w formacie RRMMDD.
|4!n|Data księgowania w formacie MMDD.
|2a |Strona księgowania C/RC/D/RD
|15d |Kwota operacji.

|[underline]##Przykład:## | ‘**:61:**1803310331D1,00’

<.^|:86: <.^|Szczegóły operacji 2+.^|
Pole złożone z podpól, których szczegółowy opis zamieszczono w części Specyfikacja podpól dla pola :86:

.6+<.^|:62F: .6+<.^|Saldo końcowe wyciągu. <.^|1!a6!n3!a15d |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data końcowa zestawienia obrotów w formacie RRMMDD.
|3!a |Symbol waluty.
|5d |Kwota salda końcowego wyciągu.
|[underline]##Przykład:## |‘**:62F:**C060302PLN25,00’
|====================


Specyfikacja podpól dla pola *:86:*

Założenia:
Pole *:86:* składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli
Podpola oznaczone statusem M są obowiązkowe, podpola o statusie O są opcjonalne.
Separatorem podpól jest znak <
Podpola prezentowane są w nowych liniach (za wyjątkiem podpola *10*).
Jeżeli podpole jest puste, wówczas całe podpole, łącznie z etykietą nie jest w pliku prezentowane.

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Etykieta* |*Status* |*Format* |*Opis*
|<10 |M |10n |Numer referencyjny

              Kolejny numer operacji na rachunku

              np. <1024755

|<20 |O |35x |Tytuł operacji - linia1
|<21 |O |35x |Tytuł operacji - linia2
|<22 |O |35x |Tytuł operacji - linia3
|<23 |O |35x |Tytuł operacji - linia4
|<27 |M |35x |Nazwa kontrahenta - linia 1
|<28 |O |35x |Nazwa kontrahenta - linia 2
|<29 |O |35x |Adres kontrahenta (ulica)
|<30 |M |8x |Identyfikator jednostki bankowej kontrahenta (BSC lub SWIFT BIC). Dla identyfikatora jednostki banku w tym polu przedstawiane są znaki od 3 do 10
|<31 |M |16x |Identyfikator rachunku kontrahenta (skrócony) dla prezentacji. W przypadku rachunku NRB w tym polu przedstawiane są znaki od 11 do 26
|<38 |O |34x |Numer rachunku kontrahenta
|<60 |O |35x |Adres kontrahenta (miasto)
|====================

[underline]##Przykład pliku eksportu operacji w formacie MT940/MulltiCash (format CEB):##

[source, txt]
----
:20:000317/193
:25:PL04910100032002000001930001
:28C:
:60F:D000317PLN0,00
:61:190413D9,15
:86:<101
<2004195000011876825061050602
<27Testowy Odbiorcaul. Testowa 15,12-3
<2845 Miasto
<3019500001
<311876825061050602
<3804195000011876825061050602
:61:190413D8,80
:86:<102
<2093168000071696550227141667
<27Testowy Odbiorcaul. Testowa 1,11-11
<281 Miejscowosc
<3016800007
<311696550227141667
<3893168000071696550227141667
:62F:C210422PLN9387,63
----

==== Plik w formacie MT940 WIRT (format CEB)

Plik eksportu operacji w formacie MT940 WIRT (format CEB) składa się z 1 sekcji, podzielonej na bloki, których układ jest
następujący:


Nagłówek pliku:

[source, txt]
----
:20:
:25:
:28C:
:60F:
----

Blok operacji:

[source, txt]
----
:61:
:86:
----

Blok końca pliku:

[source, txt]
----
:62F:
----

Oznaczenia użyte w opisie formatu:
Status pola: M - obowiązkowy, O - opcjonalny

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*n* - tylko cyfry, +
*a* - tylko litery, +
*c* - tylko znaki alfanumeryczne, +
*x* - dowolne znaki alfanumeryczne łącznie z przecinkami, spacjami , itp., +
*d* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’). +

[underline]##Przykłady oznaczania formatu pól:## +
*2n* - maksymalnie 2 cyfry, +
*3!a* - dokładnie 3 litery, +
*4*35x* - do 4 linii, każda po maksymalnie 35 dowolnych znaków alfanumerycznych.

*Specyfikacja pól w pliku MT940 WIRT (format CEB):*

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!n/9n |
Pierwszy ciąg znaków to data początkowa wyciągu w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|2!a26!n |
Numer IBAN rachunku, gdzie: +
IBAN=PLSSBBBBBBBBRRRRRRRRRRRRRRRR +
PL - kod kraju długości 2!a +
/ - znak poprzedzający cyfry kontrolne +
SS - cyfry kontrolne długości 2!n +
BBBBBBBB-numer jednostki banku długości 8!n +
RRRRRRRRRRRRRRRR-identyfikator rachunku w jednostce banku długości 16!n +
|[underline]##Przykład 1:## |‘:*25*:PL/51101010231234567890123456’
.1+<.^|:28C: 3+|Pusta wartość
.6+<.^|:60F: .6+<.^|Saldo początkowe wyciągu <.^|11!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!a |Symbol waluty.
|15d |Kwota salda początkowego początkowego wyciągu.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!n4!n2a15d
|Format całego pola - łącznie do 27 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!a|Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15d |Kwota operacji.
|[underline]##Przykład:## | ‘:**61**:1804200420C10,00

|:86: |Szczegóły operacji 2+| Pole złożone z podpól, których szczegółowy opis zamieszczono w części: +
Specyfikacja podpól dla pola :86:
.6+<.^|:62F: .6+<.^|Saldo końcowe wyciągu. <.^|1!a6!n3!a15d |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15d |Kwota salda końcowego wyciągu.
|[underline]##Przykład:## |‘:**62**F:C180420PLN50,11’
|====================

*Specyfikacja podpól dla pola :86:* +

**Założenia**: +
Pole :86: składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli. +
Podpola oznaczone statusem M są obowiązkowe, podpola o statusie O są opcjonalne. +
Separatorem podpól jest znak <. +
Podpola prezentowane są w nowych liniach (za wyjątkiem podpola 10). +
Jeżeli podpole jest puste, wówczas całe podpole, łącznie z etykietą nie jest w pliku prezentowane. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Etykieta* |*Status* |*Format* |*Opis*
|<10 |M |10n |Numer referencyjny

              Kolejny numer operacji na rachunku

              np. <1024755

|<20 |O |35x |Tytuł operacji - linia1
|<21 |O |35x |Tytuł operacji - linia2
|<22 |O |35x |Tytuł operacji - linia3
|<23 |O |35x |Tytuł operacji - linia4
|<27 |M |35x |Nazwa kontrahenta - linia 1
|<28 |O |35x |Nazwa kontrahenta - linia 2
|<29 |O |35x |Adres kontrahenta (ulica)
|<30 |M |8x |Identyfikator jednostki bankowej kontrahenta (BSC lub SWIFT BIC). Dla identyfikatora jednostki banku w tym polu przedstawiane są znaki od 3 do 10
|<31 |M |16x |Identyfikator rachunku kontrahenta (skrócony) dla prezentacji. W przypadku rachunku NRB w tym polu przedstawiane są znaki od 11 do 26
|<38 |O |34x |Numer rachunku kontrahenta
|<60 |O |35x |Adres kontrahenta (miasto)
|<61 |O |34x |Numer rachunku kontrahenta (wirtualny)
|====================

[underline]##Przykładowe dane dla pola **86**:##

[source, txt]
----
:86:<103
<20wpłata gotowkowa
<27JAN
<28TEST
<29TESTOWA 6/16
<3086420002
<3833864200023001840003580001
<6085-666 MIASTO
<6107864210708002000000000001
----

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji w formacie MT940 WIRT (format CEB):##

[source, txt]
----
:20:000317/193
:25:/PL04910100032002000001930001
:28C:
:60F:D000317PLN0,00
:61:190413D9,15
:86:<101
<2004195000011876825061050602
<27Testowy Odbiorcaul. Testowa 15,12-3
<2845 Miasto
<3019500001
<311876825061050602
<3804195000011876825061050602
:61:190413D8,80
:86:<102
<2093168000071696550227141667
<27Testowy Odbiorcaul. Testowa 1,11-11
<281 Miejscowosc
<3016800007
<311696550227141667
<3893168000071696550227141667
:62F:C210422PLN9387,63
----


==== Plik w formacie CSV

Format CSV to format pliku tekstowego, który może być używany do wymiany danych arkusza kalkulacyjnego między aplikacjami. Każdy wiersz w tekstowym pliku CSV reprezentuje wiersz arkusza kalkulacyjnego. Każda komórka wiersza arkusza kalkulacyjnego rozdzielona jest średnikiem. Każdy rekord zakończony jest znakiem końca linii <CRLF>.


* Numer - numer dekretu operacji,
* Data - data księgowania operacji w standardzie RRRR-MM-DD, gdzie RRRR oznacza rok, MM oznacza miesiąc, DD oznacza dzień,
* Typ operacji - nazwa klienta lub domyślna nazwa dla odpowiedniego kodu typu operacji,
* Bank - nazwa banku w zależności od kierunku transakcji (odbiorcy lub nadawcy), w przypadku braku odpowiedniej wartości, wartość wyliczana/brana na podstawie numeru rachunku,
* Numer rachunku - dla obciążenia - rachunek odbiorcy, dla uznania - rachunek nadawcy; w standardzie NRB, wartość ujęta w apostrofy,
* Numer rachunku - numer rachunku Użytkownika; w standardzie NRB, wartość ujęta w apostrofy,
* Kwota transakcji - wartość kwoty transakcji,
* Kierunek transakcji - D - Debit obciążenie, C - Credit uznanie,
* Waluta - waluta transakcji,
* Nazwa1 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 1,
* Nazwa2 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 2,
* Nazwa3 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 3,
* Nazwa4 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 4,
* Tytuł1 - opis operacji, linia 1,
* Tytuł2 - opis operacji, linia 2,
* Tytuł3 - opis operacji, linia 3,
* Tytuł4 - opis operacji, linia 4.


[underline]##Poniżej przedstawiono przykład pliku eksportu historii operacji w formacie CSV:##

[source, txt]
----

5;2018-03-11;przelew wewnetrzny (MA);88090005;'18880900052001000277990002';'45880900052001000277990001';3,01;C;PLN;JANINA TESTOWA;;;;przelew testowy ;;;
3;2018-03-11;przelew wewnetrzny (WN);Bank Testowy;'18880900052001000277990002';'45880900052001000277990001';25,00;D;PLN;JANINA TESTOWA ;;;;test ;;;
1;2018-03-11;ksiegowanie prowizji od przelewow wewnetrznych (kanal elektroniczny);;;;1,71;D;PLN;JANINA TESTOWA;;;;prow.od przelewu ;;;
3;2018-03-11;przelew;Bank Testowy2 ;'41116000067812974233605886';'45880900052001000277990001';2,00;D;PLN;Testowy Odbiorca ;;;;test ;;;

----

=== Struktura plików eksportu historii operacji z wielu rachunków

==== Plik w formacie XML

W formacie XML dozwolone są następujące tagi:

[cols="4,5",options="header",]
|===========================================================
|Tagi |Opis
|<operacje></operacje>|Otwiera i zamyka format eksportu w XML.
|<operacja num="numer kolejny operacji na liscie"></operacja> |Otwiera i zamyka dane dla jednej operacji.
|<id></id>	|Identyfikator trancakcji.
|<data_waluty></data_waluty> |Data waluty.
|<rodzaj></rodzaj> |Rodzaj operacji.
|<rachunek_o></rachunek_o> |Nr rachunku odbiorcy, jezeli brak to </rachunek_o>.
|<rachunek_n></rachunek_n> |Nr rachunku nadawcy.
|<kwota></kwota> |Kwota operacji.
|<strona></strona> |Strona operacji.
|<waluta></waluta> |Waluta rachunku obciążanego (dla strony MA) lub uznawanego (dla strony WN).
|<nazwa1></nazwa1> |Nazwa odbiorcy (dla strony Wn) lub nadawcy (dla strony Ma) -linia1.
|<nazwa2></nazwa2> |Nazwa odbiorcy – linia 2.
|<nazwa3></nazwa3> |Nazwa odbiorcy – linia 3.
|<nazwa4></nazwa4> |Nazwa odbiorcy – linia 4.
|<tresc_1></tresc_1> |Opis operacji – linia 1.
|<tresc_2></tresc_2> |Opis operacji – linia 2.
|<tresc_3></tresc_3> |Opis operacji – linia 3.
|<tresc_4></tresc_4> |Opis operacji – linia 4.
|===========================================================

Każde powtórzenie tagów <operacja> ... </operacja> jest traktowane jako kolejna operacja z zestawienia.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji z historii rachunku w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="ISO-8859-2"?>
<operacje>
  <operacja num="1">
    <id>162131886</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Pobranie oplaty</rodzaj>
    </rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>10.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Bank</nazwa1>
    <tresc1>OPLATY i PROWIZJIE-przelew testowy</tresc1>
  </operacja>
  <operacja num="2">
    <id>162131884</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Przelew wychodzacy zewnetrzny</rodzaj>
    <rachunek_o>52156011375468963184679874</rachunek_o>
    <rachunek_n>80216000032999000002100005</rachunek_n>
    <kwota>25.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Odbiorca Szablonowy</nazwa1>
    <tresc1>przelew testowy</tresc1>
  </operacja>
  <operacja num="3">
    <id>162131876</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Przelew przychodzacy wewnetrzny</rodzaj>
    <rachunek_o>91216000032999000002100001</rachunek_o>
    <rachunek_n>53216000032999000002100006</rachunek_n>
    <kwota>45.00</kwota>
    <strona>MA</strona>
    <waluta>PLN</waluta>
    <nazwa3>os. OSIEDLE 1/1 </nazwa3>
    <nazwa4>11-111 MIEJSCOWOSC</nazwa4>
    <tresc1>przelew wlasny testowy</tresc1>
  </operacja>
  <operacja num="4">
    <id>161331874</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Pobranie oplaty</rodzaj>
   </rachunek_o>
    <rachunek_n>15216000032999000002100011</rachunek_n>
    <kwota>10.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Bank</nazwa1>
    <tresc1>OPLATY i PROWIZJIE-testowy z szablonu</tresc1>
  </operacja>
  <operacja num="5">
    <id>161331872</id>
    <data_waluty>2024-08-26</data_waluty>
    <rodzaj>Przelew wychodzacy zewnetrzny</rodzaj>
    <rachunek_o>52156011375468963184679874</rachunek_o>
    <rachunek_n>15216000032999000002100011</rachunek_n>
    <kwota>15.00</kwota>
    <strona>WN</strona>
    <waluta>PLN</waluta>
    <nazwa1>Odbiorca Szablonowy</nazwa1>
    <tresc1>testowy z szablonu</tresc1>
  </operacja>
</operacje>
----

==== Plik w formacie liniowym

W pliku eksportu zestawienia operacji z historii z wielu rachunków w formacie liniowym informacja o pojedynczej operacji zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających poszczególne dane operacji. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury zdefiniowanym w pliku _schema.ini_. Pola oddzielone są separatorem (określonym w pliku "schema.ini") lub są stałej długości.

Dopuszczalny zestaw pól opisujących dane operacji wraz z formatem danych dla każdego pola przedstawiono w poniższej tabeli.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, +
*C* - pole tekstowe, +
*D* - data w formacie RRRR-MM-DD, gdzie RRRR - rok, MM - miesiąc, DD - dzień, (np. 2010-04-01), +
*K* - pole zawierające kwotę. Kwota w formacie Zł.GR. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|DATA |10 |D |Data waluty
|RODZAJ |100 |C |Rodzaj operacji
|KWOTA |12/2 |K |Kwota operacji
|RACHUNEK_N |34 |N | Numer rachunku nadawcy
|STRONA |1 |C |Strona operacji: D - Debit (Winien), C - Credit (Ma)
|WALUTA |3 |C |Waluta rachunku obciążanego (dla strony MA) lub uznawanego (dla strony WN)
|NAZWA1 |35 |C |Nazwa kontrahenta - wiersz 1
|NAZWA2 |35 |C |Nazwa kontrahenta - wiersz 2
|NAZWA3 |35 |C |Nazwa kontrahenta - wiersz 3
|NAZWA4 |35 |C |Nazwa kontrahenta - wiersz 4
|TRESC1 |35 |C |Treść operacji - wiersz 1
|TRESC2 |35 |C |Treść operacji - wiersz 2
|TRESC3 |35 |C |Treść operacji - wiersz 3
|TRESC4 |35 |C |Treść operacji - wiersz 4
|====================

[underline]##Przykładowy opis struktury dla pliku z danymi o operacjach z historii wielu rachunków:##

[source, txt]
----
[operations_linear.txt]
ColNameHeader=False
Format=Delimited(;)
MaxScanRows=25
CharacterSet=OEM
Col1=DATA Char Width 10
Col2=RODZAJ Char Width 20
Col3=KWOTA Float
Col4=RACHUNEK_N Char Width 34
Col5=STRONA Char Width 1
Col6=WALUTA Char Width 3
Col7=NAZWA1 Char Width 35
Col8=NAZWA2 Char Width 35
Col9=NAZWA3 Char Width 35
Col10=NAZWA4 Char Width 35
Col11=TRESC1 Char Width 35
Col12=TRESC2 Char Width 35
Col13=TRESC3 Char Width 35
Col14=TRESC4 Char Width 35
----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format=Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x - w poniższym przykładzie średnikiem.

Format=FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury _schema.ini_ mogą zostać pominięte.

Polskie znaki kodowane są w UTF-8.

Parametr ColNameHeader może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia parametru w pliku _schema.ini_, aplikacja przyjmuje domyślną wartość parametru - _False_.

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji z historii wielu rachunków w formacie liniowym:##

[source, txt]
----
2024-08-26;Pobranie oplaty;10.00;80216000032999000002100005;D;PLN;Bank;;;;OPLATY i PROWIZJIE- przelew:::
2024-08-26;Przelew wychodzacy zewnetrzny;25.00;80216000032999000002100005;D;PLN;Odbiorca Szablonowy;;;;przelew;;;
2024-08-26;Pobranie oplaty;5.00;91216000032999000002100001;D;PLN;Bank;;;;OPLATY i PROWIZJIE- przelew wlasny testowy;;;
2024-08-26;Przelew przychodzacy wewnetrzny;45.00;80216000032999000002100005;C;PLN;;;os. OSIEDLE 1/1 ;11-111 MIEJSCOWOSC;przelew wlasny testowy;;;
2024-08-26;Przelew wychodzacy wewnetrzny;45.00;91216000032999000002100001;D:PLN;;os. OSIEDLE 1/1 ;11-111 MIEJSCOWOSC;;przelew wlasny testowy;;;
----

=== Struktura plików eksportu wyciągów
==== Plik w formacie XML

W formacie XML dozwolone są następujące tagi:

[cols="5,4",options="header",]
|===========================================================
|Tagi |Opis
|<wyciagi data_od="data poczatku" data_do="data konca" rachunek="numer rachunku" opis="opis rachunku" waluta="waluta rachunku" nazwa="nazwa klienta"></wyciagi>|Otwiera i zamyka format eksportu w XML.
|<wyciag data="data wyciagu" rachunek="numer rachunku" opis="opis rachunku" waluta="waluta rachunku" nazwa="nazwa klienta"></wyciag> |Otwiera i zamyka dane dla jednego wyciągu.
|<saldo_otwarcia></saldo_otwarcia> | Zawiera <kwota></kwota> i <strona></strona>.
|<kwota></kwota> |Kwota otwarcia
|<strona></strona> |Strona (C/D).
|<operacja></operacja> |Otwiera i zamyka dane dla jednej operacji.
|<pozycja></pozycja>	|Pozycja operacji na liście.
|<data_waluty></data_waluty> |Data waluty.
|<data_transakcji></data_transakcji> |Data transakcji.
|<opis></opis> |Opis transakcji.
|<bank></bank> |Numer banku.
|<rachunek></rachunek> |Numer rachunku.
|<kwota></kwota> |Kwota operacji.
|<strona></strona> |Strona operacji.
|<waluta></waluta> |Waluta operacji.
|<nazwa1></nazwa1> |Nazwa odbiorcy (dla strony Wn) lub nadawcy (dla strony Ma) -linia1.
|<nazwa2></nazwa2> |Nazwa odbiorcy – linia 2.
|<nazwa3></nazwa3> |Nazwa odbiorcy – linia 3.
|<nazwa4></nazwa4> |Nazwa odbiorcy – linia 4.
|<tresc_1></tresc_1> |Opis operacji – linia 1.
|<tresc_2></tresc_2> |Opis operacji – linia 2.
|<tresc_3></tresc_3> |Opis operacji – linia 3.
|<tresc_4></tresc_4> |Opis operacji – linia 4.
|<data_ksiegowa></data_ksiegowa> |Data księgowa.
|<saldo_zamkniecia></saldo_zamkniecia>| Zawiera <kwota></kwota> i <strona></strona>.
|<kwota></kwota> |Kwota zamknięcia.
|<strona></strona> |Strona (C/D).
|===========================================================

Każde powtórzenie tagów <operacja> ... </operacja> jest traktowane jako kolejna operacja z wyciągu.
Każde powtórzenie tagów <wyciag> ... </wyciag> jest traktowane jako kolejny wyciąg z listy.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Poniżej przedstawiono przykład pliku eksportu wyciągów w formacie XML:##

[source, xml]
----
  <?xml version="1.0" encoding="iso-8859-2"?>
  <wyciagi data_od="2024-09-01" data_do="2024-09-01" rachunek="07213000042001029469940002" opis="biezacy test" waluta="pln" nazwa="testowa rachunku">
    <wyciag data="2024-09-01" rachunek="07213000042001029469940002" opis="biezacy test" waluta="pln" nazwa="testowa rachunku">
      <saldo_otwarcia>
        <kwota>45698.00</kwota>
        <strona>C</strona>
      </saldo_otwarcia>
      <operacja>
        <pozycja>1</pozycja>
        <data_waluty>2024-09-01</data_waluty>
        <data_transakcji>2024-09-01</data_transakcji>
        <opis>przelew wychodzący zewnetrzny</opis>
        <bank>15601137</bank>
        <rachunek>52156011375468963184679874</rachunek>
        <kwota>15.00</kwota>
        <strona>D</strona>
        <waluta>pln</waluta>
        <nazwa1>odbiorca szablonowy</nazwa1>
        <tresc1>testowy z szablonu</tresc1>
        <data_ksiegowa>2024-09-01</data_ksiegowa>
      </operacja>
      <operacja>
        <pozycja>2</pozycja>
        <data_waluty>2024-09-01</data_waluty>
        <data_transakcji>2024-09-01</data_tansakcji>
        <opis>pobranie oplaty</opis>
        <kwota>10.00</kwota>
        <strona>D</strona>
        <waluta>pln</waluta>
        <nazwa1>bank</nazwa1>
        <tresc1>oplaty i prowizjie-testowy z szablonu</tresc1>
        <data_ksiegowa>2024-09-01</data_ksiegowa>
      </operacja>
      <operacja>
        <pozycja>3</pozycja>
        <data_waluty>2024-09-01</data_waluty>
        <data_transakcji>2024-09-01</data_transakcji>
        <opis>przelew wychodzacy zewnetrzny</opis>
        <bank>15601137</bank>
        <rachunek>52156011375468963184679874</rachunek>
        <kwota>15.00</kwota>
        <strona>D</strona>
        <waluta>pln</waluta>
        <nazwa1>odbiorca szablonowy</nazwa1>
        <tresc1>testowy z szablonu</tresc1>
        <data_ksiegowa>2024-09-01</data_ksiegowa>
      </operacja>
      <operacja>
        <pozycja>4</pozycja>
        <data_waluty>2024-09-01</data_waluty>
        <data_transakcji>2024-09-01</data_transakcji>
        <opis>pobranie oplaty</opis>
        <kwota>10.00</kwota>
        <strona>D</strona>
        <waluta>pln</waluta>
        <nazwa1>bank</nazwa1>
        <tresc1>oplaty i prowizjie-testowy z szablonu</tresc1>
        <data_ksiegowa>2024-09-01</data_ksiegowa>
      </operacja>
      <saldo_zamkniecia>
        <kwota>45648.00</kwota>
        <strona>C</strona>
      </saldo_zamkniecia>
    </wyciag>
  </wyciagi>
----

==== Plik w formacie XML (format CEB)

W formacie XML (format CEB) dozwolone są następujące tagi:

[cols="5,4",options="header",]
|===========================================================
|Tagi |Opis
|<wyciagi data_od="data poczatku" data_do="data konca" rachunek="numer rachunku" opis="opis rachunku" waluta="waluta rachunku" nazwa="nazwa klienta"></wyciagi>|Otwiera i zamyka format eksportu w XML.
|<wyciag data="data wyciagu" rachunek="numer rachunku" opis="opis rachunku" waluta="waluta rachunku" nazwa="nazwa klienta"></wyciag> |Otwiera i zamyka dane dla jednego wyciągu.
|<saldo_otwarcia></saldo_otwarcia> | Zawiera <kwota></kwota> i <strona></strona>.
|<kwota></kwota> |Kwota otwarcia
|<strona></strona> |Strona (C/D).
|<operacja></operacja> |Otwiera i zamyka dane dla jednej operacji.
|<pozycja></pozycja>	|Pozycja operacji na liście.
|<data_waluty></data_waluty> |Data waluty.
|<opis></opis> |Opis transakcji.
|<bank></bank> |Numer banku.
|<rachunek></rachunek> |Numer rachunku.
|<kwota></kwota> |Kwota operacji.
|<strona></strona> |Strona operacji.
|<waluta></waluta> |Waluta operacji.
|<nazwa1></nazwa1> |Nazwa odbiorcy (dla strony Wn) lub nadawcy (dla strony Ma) -linia1.
|<nazwa2></nazwa2> |Nazwa odbiorcy – linia 2.
|<nazwa3></nazwa3> |Nazwa odbiorcy – linia 3.
|<nazwa4></nazwa4> |Nazwa odbiorcy – linia 4.
|<tresc_1></tresc_1> |Opis operacji – linia 1.
|<tresc_2></tresc_2> |Opis operacji – linia 2.
|<tresc_3></tresc_3> |Opis operacji – linia 3.
|<tresc_4></tresc_4> |Opis operacji – linia 4.
|<data_ksiegowa></data_ksiegowa> |Data księgowa.
|<saldo_zamkniecia></saldo_zamkniecia>| Zawiera <kwota></kwota> i <strona></strona>.
|<kwota></kwota> |Kwota zamknięcia.
|<strona></strona> |Strona (C/D).
|===========================================================

Każde powtórzenie tagów <operacja> ... </operacja> jest traktowane jako kolejna operacja z wyciągu.
Każde powtórzenie tagów <wyciag> ... </wyciag> jest traktowane jako kolejny wyciąg z listy.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Poniżej przedstawiono przykład pliku eksportu wyciągów w formacie XML (format CEB):##

[source, xml]
----
<?xml version="1.0" encoding="ISO-8859-2"?>
<WYCIAGI data_od="2019-12-04" data_do="2019-12-06" rachunek="51910100032002000007240002" opis="RB AH" waluta="PLN" nazwa="JAN TESTOWY">
  <WYCIAG data="2019-12-06" rachunek="51910100032002000007240002" opis="RB AH" waluta="PLN" nazwa="JAN TESTOWY">
    <SALDO_OTWARCIA>
      <KWOTA>0.00</KWOTA>
      <STRONA>C</STRONA>
    </SALDO_OTWARCIA>
    <OPERACJA>
      <POZYCJA>1</POZYCJA>
      <DATA_WALUTY>2019-12-04</DATA_WALUTY>
      <OPIS>Uruchomienie pozyczki</OPIS>
      <BANK>91010003</BANK>
      <RACHUNEK>32910100031002000007240001</RACHUNEK>
      <KWOTA>34510.00</KWOTA>
      <STRONA>C</STRONA>
      <WALUTA>PLN</WALUTA>
      <NAZWA1>JAN TESTOWY</NAZWA1>
      <NAZWA2>ul. TEST 1/1</NAZWA2>
      <NAZWA3>11-11 MIEJSCOWOSC</NAZWA3>
      <NAZWA4/>
      <TRESC1>Uruchomienie pozyczki</TRESC1>
      <TRESC2>nr KHM\1900369</TRESC2>
      <TRESC3/>
      <TRESC4/>
    </OPERACJA>
    <OPERACJA>
      <POZYCJA>2</POZYCJA>
      <DATA_WALUTY>2019-12-04</DATA_WALUTY>
      <OPIS>Lokata nr SDN\1901402</OPIS>
      <BANK>91010003</BANK>
      <RACHUNEK>27910100033002000007240001</RACHUNEK>
      <KWOTA>700.00</KWOTA>
      <STRONA>D</STRONA>
      <WALUTA>PLN</WALUTA>
      <NAZWA1>JAN TESTOWY</NAZWA1>
      <NAZWA2>ul. TEST 1/1</NAZWA2>
      <NAZWA3>11-11 MIEJSCOWOSC</NAZWA3>
      <NAZWA4/>
      <TRESC1>Lokata nr SDN\1901402</TRESC1>
      <TRESC2>- załozenie</TRESC2>
      <TRESC3/>
      <TRESC4/>
    </OPERACJA>
    <OPERACJA>
      <POZYCJA>3</POZYCJA>
      <DATA_WALUTY>2019-12-04</DATA_WALUTY>
      <OPIS>Pobranie opłaty lub prowizji: Przelewy wewnętrzne</OPIS>
      <RACHUNEK/>
      <KWOTA>2.00</KWOTA>
      <STRONA>D</STRONA>
      <WALUTA>PLN</WALUTA>
      <NAZWA1>Bank Spółdzielczy</NAZWA1>
      <NAZWA2/>
      <NAZWA3/>
      <NAZWA4/>
      <TRESC1>Pobranie oplaty lub prowizji: Przelewy wewnetrzne</TRESC1>
      <TRESC2/>
      <TRESC3/>
      <TRESC4/>
    </OPERACJA>
    <OPERACJA>
      <POZYCJA>4</POZYCJA>
      <DATA_WALUTY>2019-12-05</DATA_WALUTY>
      <OPIS>test</OPIS>
      <BANK>15400004</BANK>
      <RACHUNEK>57154000046487348673786138</RACHUNEK>
      <KWOTA>2.00</KWOTA>
      <STRONA>D</STRONA>
      <WALUTA>PLN</WALUTA>
      <NAZWA1>Testowy Odbiorca</NAZWA1>
      <NAZWA2>ulica Testowa 100/ABCD,</NAZWA2>
      <NAZWA3>12-345 Testowa Miejscowosc</NAZWA3>
      <NAZWA4/>
      <TRESC1>test</TRESC1>
      <TRESC2/>
      <TRESC3/>
      <TRESC4/>
    </OPERACJA>
    <SALDO_ZAMKNIECIA>
      <KWOTA>33806.00</KWOTA>
      <STRONA>C</STRONA>
    </SALDO_ZAMKNIECIA>
  </WYCIAG>
</WYCIAGI>
----

==== Plik w formacie liniowym

W pliku eksportu wyciągów w formacie liniowym informacja o pojedynczej operacji zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających poszczególne dane operacji. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury zdefiniowanym w pliku _schema.ini_. Pola oddzielone są separatorem (określonym w pliku "schema.ini") lub są stałej długości.

Dopuszczalny zestaw pól opisujących dane operacji wraz z formatem danych dla każdego pola przedstawiono w poniższej tabeli.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, +
*C* - pole tekstowe, +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|ID Integer|10 |N |Liczba porządkowa operacji w dniu księgowym
|DATA_WALUTY |10 |C |Data operacji
|TRESC_D |20 |C |Skrócony opis operacji
|BANK Integer|8 |N |Numer rozliczeniowy banku kontrahenta
|RACHUNEK |34 |C |Numer rachunku kontrahenta
|KWOTA |22/2 |C |Kwota operacji
|STRONA |1 |C |Strona operacji: D - Debit (Winien), C - Credit (Ma)
|WALUTA |3 |C |Waluta rachunku obciążanego
|NAZWA1 |35 |C |Nazwa kontrahenta - wiersz 1
|NAZWA2 |35 |C |Nazwa kontrahenta - wiersz 2
|NAZWA3 |35 |C |Nazwa kontrahenta - wiersz 3
|NAZWA4 |35 |C |Nazwa kontrahenta - wiersz 4
|TRESC1 |35 |C |Tresc operacji - wiersz 1
|TRESC2 |35 |C |Tresc operacji - wiersz 2
|TRESC3 |35 |C |Tresc operacji - wiersz 3
|TRESC4 |35 |C |Tresc operacji - wiersz 4
|====================

[underline]##Przykładowy opis struktury dla pliku z danymi o operacjach na wyciągu:##

[source, txt]
----
[wyciag_lin.txt]
ColNameHeader=False
Format=Delimited(;)
AmountFormat=,
MaxScanRows=25
CharacterSet=OEM
Col1=ID Integer
Col2=DATA_WALUTY Char Width 10
Col3=TRESC_D Char Width 20
Col4=BANK Integer
Col5=RACHUNEK Char Width 34
Col6=KWOTA Float
Col7=STRONA Char Width 1
Col8=WALUTA Char Width 3
Col9=NAZWA1 Char Width 35
Col10=NAZWA2 Char Width 35
Col11=NAZWA3 Char Width 35
Col12=NAZWA4 Char Width 35
Col13=TRESC1 Char Width 35
Col14=TRESC2 Char Width 35
Col15=TRESC3 Char Width 35
Col16=TRESC4 Char Width 35
----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format=Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x - w poniższym przykładzie średnikiem.

Format=FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

AmountFormat umożliwia zdefiniowanie separatora kwoty (pozycja opcjonalna). W przypadku braku skonfigurowania znacznika zostanie zastosowany domyślny separator (dla formatu liniowego jest to kropka).
Wartość znacznika AmountFormat może zawierać wyłącznie jeden znak. W przypadku podania więcej niż jednego znaku system zgłosi błąd struktury.

Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury _schema.ini_ mogą zostać pominięte.

Polskie znaki kodowane są w ANSI.

Parametr ColNameHeader może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia parametru w pliku _schema.ini_, aplikacja przyjmuje domyślną wartość parametru - _False_.

[underline]##Poniżej przedstawiono przykład pliku eksportu wyciągów w formacie liniowym:##

[source, txt]
----
150031863;2024-09-01;Przelew wychodzacy zewnetrzny;15601137;52156011375468963184679874;15,F00;D;PLN;Odbiorca Szablonowy;;;;testowy z szablonu;;;
----

==== Plik w formacie MT940

Plik eksportu wyciągów w formacie MT940 składa się z 3 sekcji: pierwszej, drugiej i czwartej.

Sekcje pierwsza i druga rozpoczynają się i kończą w pierwszej linii komunikatu. Również ich pola znajdują się w pierwszej linii pliku. Sekcja czwarta rozpoczyna się w pierwszej linii jednak każde jej pole umieszczone musi być w nowej linii – również zamknięcie sekcji czwartej znajduje się w nowej, ostatniej linii komunikatu. Sekcje otwierają i zamykają znaki klamry: '{' i '}'.

Polskie znaki kodowane są w ISO 8859-2.

Układ sekcji i ich pól (opis pól znajduje się w dalszej części dokumentacji) dla komunikatu MT940 jest następujący:

[source, txt]
----
{1:F01                     }{2:O940                                          N}{4:
:20:
:25:
:28:
:60F: (lub :60M:)
:61:
:86:
:62F: (lub :62M:)
-}
----
*Warunki budowania pliku:*

* przed każdą linią stosuje się ciąg znaków <CR><LF>

* żadna z linii nie może być pusta lub składać się z samej spacji,

* żadna z linii (z wyjątkiem ostatniej linii sekcji 4 oraz linii składowych pola :86:) nie może zaczynać się od znaku ‘-’ (myślnika),

* zestaw dopuszczalnych znaków SWIFT zawiera znaki: 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '/', '', '?', ':', '(', ')', '.', ',', ''', '+', '\{', '}', 'CR', 'LF', ' '.

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +
5*65s - do pięciu linii, każda po maksymalnie 65 dowolnych znaków SWIFT.

*Specyfikacja pól w pliku MT940*

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|F01 .2+<.^|Nagłówek sekcji 1 <.^|22!n |
Modulo Klienta.

Pole uzupełniane od tyłu spacjami do 22 znaków.

|[underline]##Przykład:## |‘**F01**123456 ’
.2+<.^|O940 .2+<.^|Nagłówek sekcji 2 <.^|42!nN |
Modulo Klienta poprzedzone 10 znakami spacji.

Pole uzupełniane od tyłu spacjami do 43 (razem z końcowym znakiem ‘N’).

Pierwsze 10 znaków to spacje. Ostatni znak to ‘N’.

|[underline]##Przykład:## |‘O940          210                             N’
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!c/9c |
Pierwszy ciąg znaków to data początkowa zestawienia w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|32n |Numer NRB rachunku.
|[underline]##Przykład 1:## |‘:**25**:12345678901234567890123456’
.2+<.^|:28: .2+<.^|Numer zestawienia <.^|c |
Numer wyciągu w systemie Asseco EBP może mieć różną postać w zależności od okresu jaki obejmuje, np.:

• 2009/6

• 8

• 2010-03-21 - 2010-03-31

|[underline]##Przykład:## |‘:**28**:2009/6’
.6+<.^|:60F: .6+<.^|Saldo początkowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego zestawienia operacji.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.8+<.^|:61: .8+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k22!s4c

<CR><LF>20s

|Format całego pola - łącznie do 68 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|22!s4c |
Referencja operacji składająca się *ze stałego ciągu 22 znaków*: ‘FMSCNONREF //’ oraz liczby porządkowej operacji na zestawieniu.

[underline]##Przykład##: ‘FMSCNONREF          //7’

|<CR><LF> 20 s |Treść operacji (w nowej linii).
|[underline]##Przykład:## | ‘:**61**:0603020302D12,00FMSCNONREF          //7 +
Przelew wychodzący

.2+<.^|:86: .2+<.^|Szczegóły operacji <.^|5*65s |
Nazwa kontrahenta i tytuł płatności (każdą linię poprzedza kombinacja znaków <CR><LF>).

Pole nie jest uzupełniane pustymi liniami ani znakami spacji.

|[underline]##Przykład:##|
‘:**86**:
FIRMA S.A.ul. Testowa 1400-111 Miasto Szkolenie, nr uczestnika 123’

.6+<.^|:62F: .6+<.^|Saldo końcowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda końcowego zestawienia operacji.
|[underline]##Przykład:## |‘:**62**F:C060302PLN25,00’
.7+<.^|:60M:

(:62M:)

.7+<.^|Saldo początkowe (końcowe) części zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa (końcowa) części zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego (końcowego) części zestawienia operacji.
|[underline]##Przykład 1:## |‘:**60M**:C060302PLN12,34’
|[underline]##Przykład 2:## |‘:**62M**:C060302PLN25,00’
|====================

Specyfikacja podpól dla pola :86: +

**Założenia**: +
Pole :86: składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli. +
Podpola oznaczone statusem M są obowiązkowe, podpola o statusie O są opcjonalne. +
Separatorem podpól jest znak <. +
Podpola prezentowane są w nowych liniach (za wyjątkiem podpola 10). +
Jeżeli podpole jest puste, wówczas całe podpole, łącznie z etykietą nie jest w pliku prezentowane. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Etykieta* |*Status* |*Format* |*Opis*
|<10 |M |10n |Numer referencyjny

              Kolejny numer operacji na rachunku

              np. <1024755

|<20 |O |35x |Tytuł operacji - linia1
|<21 |O |35x |Tytuł operacji - linia2
|<22 |O |35x |Tytuł operacji - linia3
|<23 |O |35x |Tytuł operacji - linia4
|<27 |M |35x |Nazwa kontrahenta - linia 1
|<28 |O |35x |Nazwa kontrahenta - linia 2
|<29 |O |35x |Adres kontrahenta (ulica)
|<30 |M |8x |Identyfikator jednostki bankowej kontrahenta (BSC lub SWIFT BIC). Dla identyfikatora jednostki banku w tym polu przedstawiane są znaki od 3 do 10
|<31 |M |16x |Identyfikator rachunku kontrahenta (skrócony) dla prezentacji. W przypadku rachunku NRB w tym polu przedstawiane są znaki od 11 do 26
|<38 |O |34x |Numer rachunku kontrahenta
|<60 |O |35x |Adres kontrahenta (miasto)
|====================

[underline]##Przykładowe dane dla pola **86**:##

[source, txt]
----
:86:<103
<20wpłata gotowkowa
<27JAN
<28TEST
<29TESTOWA 6/16
<3086420002
<313001840003580001
<3833864200023001840003580001
<6085-666 MIASTO
----

[underline]##Poniżej przedstawiono przykład pliku eksportu wyciągów w formacie MT940:##

[source, txt]
----
{1:F01210                   }{2:O940          210                             N}{4:
:20:240901/210
:25:80216000032999000002100005
:28:1
:60F:C240901PLN45698,00
:61:2409010901D15,00FMSCNONREF          //1
Przelew wychodzacy zewnetrzny
:86:
Odbiorca Szablonowytestowy z szablonu
:61:2409010901D10,00FMSCNONREF          //2
Pobranie oplaty
:86:
BankOPLATY i PROWIZJIE-testowy z szablonu
:61:2409010901D15,00FMSCNONREF          //3
Przelew wychodzacy zewnetrzny
:86:Odbiorca Szablonowytestowy z szablonu
:61:2409010901D10,00FMSCNONREF          //4
Pobranie oplaty
:86:
BankOPLATY i PROWIZJIE-testowy z szablonu
:62F:240901PLN45648,00
-}
----


==== Plik w formacie MT940_1

Plik eksportu wyciągów w formacie MT940_1 składa się z 3 sekcji: pierwszej, drugiej i czwartej.

Sekcje pierwsza i druga rozpoczynają się i kończą w pierwszej linii komunikatu. Również ich pola znajdują się w pierwszej linii pliku. Sekcja czwarta rozpoczyna się w pierwszej linii jednak każde jej pole umieszczone musi być w nowej linii – również zamknięcie sekcji czwartej znajduje się w nowej, ostatniej linii komunikatu. Sekcje otwierają i zamykają znaki klamry: '{' i '}'.

Polskie znaki kodowane są w ISO 8859-2.

Układ sekcji i ich pól (opis pól znajduje się w dalszej części dokumentacji) dla komunikatu MT940 jest następujący:

[source, txt]
----
{1:F01                     }{2:O940                                          N}{4:
:20:
:25:
:28:
:60F: (lub :60M:)
:61:
:86:
:62F: (lub :62M:)
-}
----

W przypadku gdy komunikat ma więcej niż 10 operacji zostanie on podzielony na części – każda maksymalnie po 10 operacji. W takim przypadku pola w części pierwszej komunikatu, będą następujące:

:20:, :25:, :28:, :60F:, :61:, :86:, :62M:, natomiast ostatnia część składa się z pól: +
:20:, :25:,:28:, :60M:, :61:, :86:, :62F:, a wszystkie pomiędzy z pól: +
:20:, :25:, :28:, :60M:, :61:,:86:, :62M:.  +

*Warunki budowania pliku:*

* przed każdą linią stosuje się ciąg znaków <CR><LF>

* żadna z linii nie może być pusta lub składać się z samej spacji,

* żadna z linii (z wyjątkiem ostatniej linii sekcji 4 oraz linii składowych pola :86:) nie może zaczynać się od znaku ‘-’ (myślnika),

* zestaw dopuszczalnych znaków SWIFT zawiera znaki: 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '/', '', '?', ':', '(', ')', '.', ',', ''', '+', '\{', '}', 'CR', 'LF', ' '.

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +
5*65s - do pięciu linii, każda po maksymalnie 65 dowolnych znaków SWIFT.

*Specyfikacja pól w pliku MT940_1 *

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|F01 .2+<.^|Nagłówek sekcji 1 <.^|22!n |
Modulo Klienta.

Pole uzupełniane od tyłu spacjami do 22 znaków.

|[underline]##Przykład:## |‘**F01**123456 ’
.2+<.^|O940 .2+<.^|Nagłówek sekcji 2 <.^|42!nN |
Modulo Klienta poprzedzone 10 znakami spacji.

Pole uzupełniane od tyłu spacjami do 43 (razem z końcowym znakiem ‘N’).

Pierwsze 10 znaków to spacje. Ostatni znak to ‘N’.

|[underline]##Przykład:## |‘O940          210                             N’
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!c/9c |
Pierwszy ciąg znaków to data początkowa zestawienia w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|32n |Numer NRB rachunku.
|[underline]##Przykład 1:## |‘:**25**:12345678901234567890123456’
.2+<.^|:28: .2+<.^|Numer zestawienia <.^|5c/3c |
Pierwszy ciąg znaków to identyfikator zestawienia (w przykładzie '10'). Drugi ciąg znaków to nr sekwencyjny kolejnych części zestawnia (w przykładzie '4')
|[underline]##Przykład:## |:28:10/4
.6+<.^|:60F: .6+<.^|Saldo początkowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego zestawienia operacji.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.8+<.^|:61: .8+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k22!s4c
|Format całego pola - łącznie do 68 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|22!s4c |
Referencja operacji składająca się *ze stałego ciągu 22 znaków*: ‘FMSCNONREF //’ oraz liczby porządkowej operacji na zestawieniu.

[underline]##Przykład##: ‘FMSCNONREF          //7’
|4n | Typ operacji. Przykład: 569 - Blokada
|<CR><LF> 20 s |Treść krótka operacji
|[underline]##Przykład:## | :61:060302D12,00FMSCNONFER //7<CR><LF> +
Przelew do ZUS

.2+<.^|:86: .2+<.^|Szczegóły operacji <.^|6*65s |
Nazwa kontrahenta i tytuł płatności (każdą linię poprzedza kombinacja znaków <CR><LF>).

Pole nie jest uzupełniane pustymi liniami ani znakami spacji.

|[underline]##Przykład:##|
‘:**86**::86: 08150011141110500345350000
Wojciech Testowy
ul. Testowa 3
11-444 Rzeszow
Tytuł zlecenia
.6+<.^|:62F: .6+<.^|Saldo końcowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda końcowego zestawienia operacji.
|[underline]##Przykład:## |‘:**62**F:C060302PLN25,00’
.7+<.^|:60M:

(:62M:)

.7+<.^|Saldo początkowe (końcowe) części zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa (końcowa) części zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego (końcowego) części zestawienia operacji.
|[underline]##Przykład 1:## |‘:**60M**:C060302PLN12,34’
|[underline]##Przykład 2:## |‘:**62M**:C060302PLN25,00’
|====================

Ponieważ zestaw dopuszczalnych znaków SWIFT nie obejmuje polskich znaków diakrytycznych, dlatego znaki te zamieniane są na swoje odpowiedniki łacińskie. Operacje numerowane są ciągiem - po 10 w każdej sekcji, operacja w sekcji kolejnej jest numerowana kolejnym numerem. Przejście pomiędzy częściami: miedzy polem :62M: a :20: powinna być Linia początkowa drugiej sekcji, czyli pole F01 i 940.


Przykład pliku eksportu wyciągów w formacie MT940_1:

[source, txt]
----
{1:F01004183               }{2:O940          6194003                         N}{4:
:20:241121/6194003
:25:68193017670000061940030001
:28:280/2024/1
:60F:D241121PLN100,00
:61:241121C390,48FMSCNONREF1          //1
Przelew przychodzący wewnętrzny
:86:38193017678981004800008696
TESTOWY ARTUR MIASTO 4420-231 RZESZOW/02/02203/14
:61:241121C167,26FMSCNONREF1          //2
Przelew przychodzący wewnętrzny
:86:78193017678900354800014475
JAN TESTOWY KRAKPW 3/100-300 RZESZOW SFC/11/02208/22
:62F:D241121PLN657,74
-}
----

==== Plik w formacie MT940 (bez podziału)

Plik eksportu wyciągów w formacie MT940 (bez podziału) składa się z 3 sekcji: pierwszej, drugiej i czwartej.

Sekcje pierwsza i druga rozpoczynają się i kończą w pierwszej linii komunikatu. Również ich pola znajdują się w pierwszej linii pliku. Sekcja czwarta rozpoczyna się w pierwszej linii jednak każde jej pole umieszczone musi być w nowej linii – również zamknięcie sekcji czwartej znajduje się w nowej, ostatniej linii komunikatu. Sekcje otwierają i zamykają znaki klamry: '{' i '}'.

Polskie znaki kodowane są w ISO 8859-2.

Układ sekcji i ich pól (opis pól znajduje się w dalszej części dokumentacji) dla komunikatu MT940 jest następujący:

[source, txt]
----
{1:F01                     }{2:O940                                          N}{4:
:20:
:25:
:28:
:60F: (lub :60M:)
:61:
:86:
:62F: (lub :62M:)
-}
----

W pliku eksportu MT940 (bez podziału), gdy komunikat ma więcej niż 10 operacji to nie zostanie podzielony na części.

Plik eksportu MT940 (bez podziału) posiada rozszerzenie pliku .mt_940

*Warunki budowania pliku:*

* przed każdą linią stosuje się ciąg znaków <CR><LF>

* żadna z linii nie może być pusta lub składać się z samej spacji,

* żadna z linii (z wyjątkiem ostatniej linii sekcji 4 oraz linii składowych pola :86:) nie może zaczynać się od znaku ‘-’ (myślnika),

* zestaw dopuszczalnych znaków SWIFT zawiera znaki: 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '/', '', '?', ':', '(', ')', '.', ',', ''', '+', '\{', '}', 'CR', 'LF', ' '.

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +
5*65s - do pięciu linii, każda po maksymalnie 65 dowolnych znaków SWIFT.

*Specyfikacja pól w pliku MT940_1 *

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|F01 .2+<.^|Nagłówek sekcji 1 <.^|22!n |
Modulo Klienta.

Pole uzupełniane od tyłu spacjami do 22 znaków.

|[underline]##Przykład:## |‘**F01**123456 ’
.2+<.^|O940 .2+<.^|Nagłówek sekcji 2 <.^|42!nN |
Modulo Klienta poprzedzone 10 znakami spacji.

Pole uzupełniane od tyłu spacjami do 43 (razem z końcowym znakiem ‘N’).

Pierwsze 10 znaków to spacje. Ostatni znak to ‘N’.

|[underline]##Przykład:## |‘O940          210                             N’
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!c/9c |
Pierwszy ciąg znaków to data początkowa zestawienia w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|32n |Numer NRB rachunku.
|[underline]##Przykład 1:## |‘:**25**:12345678901234567890123456’
.2+<.^|:28: .2+<.^|Numer zestawienia <.^|5c/3c |
Pierwszy ciąg znaków to identyfikator zestawienia (w przykładzie '10'). Drugi ciąg znaków to nr sekwencyjny kolejnych części zestawnia (w przykładzie '4')
|[underline]##Przykład:## |:28:10/4
.6+<.^|:60F: .6+<.^|Saldo początkowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego zestawienia operacji.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.8+<.^|:61: .8+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k22!s4c
|Format całego pola - łącznie do 68 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|22!s4c |
Referencja operacji składająca się *ze stałego ciągu 22 znaków*: ‘FMSCNONREF //’ oraz liczby porządkowej operacji na zestawieniu.

[underline]##Przykład##: ‘FMSCNONREF          //7’
|4n | Typ operacji. Przykład: 569 - Blokada
|<CR><LF> 20 s |Treść krótka operacji
|[underline]##Przykład:## | :61:060302D12,00FMSCNONFER //7<CR><LF> +
Przelew do ZUS

.2+<.^|:86: .2+<.^|Szczegóły operacji <.^|6*65s |
Nazwa kontrahenta i tytuł płatności (każdą linię poprzedza kombinacja znaków <CR><LF>).

Pole nie jest uzupełniane pustymi liniami ani znakami spacji.

|[underline]##Przykład:##|
‘:**86**::86: 08150011141110500345350000
Wojciech Testowy
ul. Testowa 3
11-444 Rzeszow
Tytuł zlecenia
.6+<.^|:62F: .6+<.^|Saldo końcowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda końcowego zestawienia operacji.
|[underline]##Przykład:## |‘:**62**F:C060302PLN25,00’
.7+<.^|:60M:

(:62M:)

.7+<.^|Saldo początkowe (końcowe) części zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa (końcowa) części zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego (końcowego) części zestawienia operacji.
|[underline]##Przykład 1:## |‘:**60M**:C060302PLN12,34’
|[underline]##Przykład 2:## |‘:**62M**:C060302PLN25,00’
|====================

Ponieważ zestaw dopuszczalnych znaków SWIFT nie obejmuje polskich znaków diakrytycznych, dlatego znaki te zamieniane są na swoje odpowiedniki łacińskie.


Przykład pliku eksportu wyciągów w formacie MT940 (bez podziału):

[source, txt]
----
{1:F01004183               }{2:O940          6194003                         N}{4:
:20:241121/6194003
:25:68193017670000061940030001
:28:280/2024/1
:60F:D241121PLN100,00
:61:241121C390,48FMSCNONREF1          //1
Przelew przychodzący wewnętrzny
:86:38193017678981004800008696
TESTOWY ARTUR MIASTO 4420-231 RZESZOW/02/02203/14
:61:241121C167,26FMSCNONREF1          //2
Przelew przychodzący wewnętrzny
:86:78193017678900354800014475
JAN TESTOWY KRAKPW 3/100-300 RZESZOW SFC/11/02208/22
:62F:D241121PLN657,74
-}
----


==== Plik w formacie MT940/MultiCash

Plik eksportu wyciągów w formacie MT940/Multicash składa się z 1 sekcji, podzielonej na bloki, których układ jest następujący:

Nagłówek wyciągu: +
:20: +
:25: +
:28C: +
:60F: +
Blok operacji: +
:61: +
:86: +
Blok końca wyciągu: +
:62F: +

Oznaczenia użyte w opisie formatu:

Status pola: M - obowiązkowy, O - opcjonalny

Format  danych: +
*n* - tylko cyfry  +
*a* - tylko litery  +
*c* - tylko znaki alfanumeryczne  +
*x*- dowolne znaki alfanumeryczne łącznie z przecinkami, spacjami , itp.  +
*d*- liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’)  +

Przykłady oznaczania formatu pól: +
*2n* - maksymalnie 2 cyfry +
*3!a* - dokładnie 3 litery; +
*4*35x* - do 4 linii, każda po maksymalnie 35 dowolnych znaków alfanumerycznych +

Specyfikacja pól w pliku MT940/Multicash:

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!n/9n |
Pierwszy ciąg znaków to data początkowa wyciągu w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘**:20:**060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|2!a26!n |
Numer IBAN rachunku,
gdzie IBAN=PLSSBBBBBBBBRRRRRRRRRRRRRRRR
PL- kod kraju długości 2!a
SS-cyfry kontrolne długości 2!n
BBBBBBBB-numer jednostki banku długości 8!n
RRRRRRRRRRRRRRRR-identyfikator rachunku w jednostce banku długości 16!n

|[underline]##Przykład:## |‘**:25:**PL51101010231234567890123456’

.2+<.^|:28C: .2+<.^|Numer zestawienia <.^|c |
Numer wyciągu w systemie Asseco EBP może mieć różną postać w zależności od okresu jaki obejmuje, np.:

• 2009/6

• 8

• 2010-03-21 - 2010-03-31

|[underline]##Przykład:## |‘:**28C**:2009/6’
.6+<.^|:60F: .6+<.^|Saldo początkowe wyciągu <.^|1!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data początkowa wyciągu w formacie RRMMDD.
|3!a |Symbol waluty.
|15d |Kwota salda początkowego wyciągu.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.7+<.^|:61: .7+<.^|Szczegóły każdej operacji. <.^|6!n4!n2a15d
|Format całego pola - łącznie do 27 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n |Data waluty w formacie RRMMDD.
|4!n|Data księgowania w formacie MMDD.
|2a |Strona księgowania C/RC/D/RD
|15d |Kwota operacji.
|22!s4c |Referencja operacji składająca się ze stałego ciągu 22 znaków: ‘FMSCNONREF //’ oraz liczby porządkowej operacji na zestawieniu.
[underline]##Przykład:## ‘FMSCNONREF //1’

|[underline]##Przykład:## | ‘**:61:**1803310331D1,00FMSCNONREF          //1’

<.^|:86: <.^|Szczegóły operacji 2+.^|
Pole złożone z podpól, których szczegółowy opis zamieszczono w części Specyfikacja podpól dla pola :86:

.6+<.^|:62F: .6+<.^|Saldo końcowe wyciągu. <.^|1!a6!n3!a15d |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data końcowa zestawienia obrotów w formacie RRMMDD.
|3!a |Symbol waluty.
|5d |Kwota salda końcowego wyciągu.
|[underline]##Przykład:## |‘**:62F:**C060302PLN25,00’

|====================


Specyfikacja podpól dla pola *:86:*

Założenia:
Pole *:86:* składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli
Podpola oznaczone statusem M są obowiązkowe, podpola o statusie O są opcjonalne.
Separatorem podpól jest znak <
Podpola prezentowane są w nowych liniach (za wyjątkiem podpola *10*).
Jeżeli podpole jest puste, wówczas całe podpole, łącznie z etykietą nie jest w pliku prezentowane.

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Etykieta* |*Status* |*Format* |*Opis*
|<10 |M |10n |Numer referencyjny

              Kolejny numer operacji na rachunku

              np. <1024755

|<20 |O |35x |Tytuł operacji - linia1
|<21 |O |35x |Tytuł operacji - linia2
|<22 |O |35x |Tytuł operacji - linia3
|<23 |O |35x |Tytuł operacji - linia4
|<27 |M |35x |Nazwa kontrahenta - linia 1
|<28 |O |35x |Nazwa kontrahenta - linia 2
|<29 |O |35x |Adres kontrahenta (ulica)
|<30 |M |8x |Identyfikator jednostki bankowej kontrahenta (BSC lub SWIFT BIC). Dla identyfikatora jednostki banku w tym polu przedstawiane są znaki od 3 do 10
|<31 |M |16x |Identyfikator rachunku kontrahenta (skrócony) dla prezentacji. W przypadku rachunku NRB w tym polu przedstawiane są znaki od 11 do 26
|<38 |O |34x |Numer rachunku kontrahenta
|<60 |O |35x |Adres kontrahenta (miasto)
|====================

[underline]##Przykład pliku eksportu wyciągów w formacie MT940/MulltiCash:##

[source, txt]
----
:20:180331/27801
:25:PL44880900052001000278010001
:28C:1803377
:60F:C180331PLN45022,71
:61:1803310331D1,11FMSCNONREF          //1
:86:<101
<20tytul
<27testowy
<3087971026
<315820666365012086
<3891879710265820666365012086
:61:1803310331D1,11FMSCNONREF          //2
:86:<102
<20tytul
<27testowy
<3087971026
<315820666365012086
<3891879710265820666365012086
:61:1803310331D7,54FMSCNONREF          //3
:86:<103
<20pr.od prz.
<27FIRMA TEST
<30
<31
:61:1803310331D3,11FMSCNONREF          //4
:86:<104
<20prow.za zlec.st.
<27FIRMA TEST
<30
<31
:61:1803310331C0,01FMSCNONREF          //5
:86:<105
<20przeksieg.ods.Ma
<27FIRMA TEST
<3088090005
<312001000278010002
<3817880900052001000278010002
:62F:C180331PLN45009,85
----

==== Plik w formacie MT940/MultiCash (format CEB)

Plik eksportu wyciągów w formacie MT940/Multicash (format CEB) ma skład taki jak format MT940/MC, jedyną różnicą jest brak sekcji: FMSCNONREF //NUMER_PORZADKOWY.

Etykieta :61: dla formatu MT940/MultiCash (format CEB):

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*

.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!n4!n2a15d
|Format całego pola - łącznie do 27 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n |Data waluty w formacie RRMMDD.
|4!n|Data księgowania w formacie MMDD.
|2a |Strona księgowania C/RC/D/RD
|15d |Kwota operacji.

|[underline]##Przykład:## | ‘**:61:**1803310331D1,00’

|====================

[underline]##Przykład pliku eksportu wyciągów w formacie MT940/MulltiCash (format CEB):##

[source, txt]
----
:20:180331/27801
:25:PL44880900052001000278010001
:28C:1803377
:60F:C180331PLN45022,71
:61:1803310331D1,11
:86:<101
<20tytul
<27testowy
<3087971026
<315820666365012086
<3891879710265820666365012086
:61:1803310331D1,11
:86:<102
<20tytul
<27testowy
<3087971026
<315820666365012086
<3891879710265820666365012086
:61:1803310331D7,54
:86:<103
<20pr.od prz.
<27FIRMA TEST
<30
<31
:61:1803310331D3,11
:86:<104
<20prow.za zlec.st.
<27FIRMA TEST
<30
<31
:61:1803310331C0,01
:86:<105
<20przeksieg.ods.Ma
<27FIRMA TEST
<3088090005
<312001000278010002
<3817880900052001000278010002
:62F:C180331PLN45009,85
----

==== Plik w formacie MT940 WIRT (format CEB)

Plik eksportu wyciągów w formacie MT940 WIRT (format CEB) składa się z 1 sekcji, podzielonej na bloki, których układ jest
następujący:


Nagłówek wyciągu:

[source, txt]
----
:20:
:25:
:28C:
:60F:
----

Blok operacji:

[source, txt]
----
:61:
:86:
----

Blok końca wyciągu:

[source, txt]
----
:62F:
----

Oznaczenia użyte w opisie formatu:
Status pola: M - obowiązkowy, O - opcjonalny

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*n* - tylko cyfry, +
*a* - tylko litery, +
*c* - tylko znaki alfanumeryczne, +
*x* - dowolne znaki alfanumeryczne łącznie z przecinkami, spacjami , itp., +
*d* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’). +

[underline]##Przykłady oznaczania formatu pól:## +
*2n* - maksymalnie 2 cyfry, +
*3!a* - dokładnie 3 litery, +
*4*35x* - do 4 linii, każda po maksymalnie 35 dowolnych znaków alfanumerycznych.

*Specyfikacja pól w pliku MT940 WIRT (format CEB):*

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!n/9n |
Pierwszy ciąg znaków to data początkowa wyciągu w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|2!a26!n |
Numer IBAN rachunku, gdzie: +
IBAN=PLSSBBBBBBBBRRRRRRRRRRRRRRRR +
PL - kod kraju długości 2!a +
/ - znak poprzedzający cyfry kontrolne +
SS - cyfry kontrolne długości 2!n +
BBBBBBBB-numer jednostki banku długości 8!n +
RRRRRRRRRRRRRRRR-identyfikator rachunku w jednostce banku długości 16!n +
|[underline]##Przykład 1:## |‘:*25*:PL/51101010231234567890123456’
.2+<.^|:28C: .2+<.^|Numer zestawienia <.^|n|
Numer wyciągu w systemie Asseco EBP może mieć różną postać w zależności od okresu jaki obejmuje.
|[underline]##Przykład:## |‘:**28C**:8’
.6+<.^|:60F: .6+<.^|Saldo początkowe wyciągu <.^|11!a6!n3!a15d |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!a |Symbol waluty.
|15d |Kwota salda początkowego początkowego wyciągu.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!n4!n2a15d
|Format całego pola - łącznie do 27 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!a|Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15d |Kwota operacji.
|[underline]##Przykład:## | ‘:**61**:1804200420C10,00

|:86: |Szczegóły operacji 2+| Pole złożone z podpól, których szczegółowy opis zamieszczono w części: +
Specyfikacja podpól dla pola :86:
.6+<.^|:62F: .6+<.^|Saldo końcowe wyciągu. <.^|1!a6!n3!a15d |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!a |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!n |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15d |Kwota salda końcowego wyciągu.
|[underline]##Przykład:## |‘:**62**F:C180420PLN50,11’
|====================

*Specyfikacja podpól dla pola :86:* +

**Założenia**: +
Pole :86: składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli. +
Podpola oznaczone statusem M są obowiązkowe, podpola o statusie O są opcjonalne. +
Separatorem podpól jest znak <. +
Podpola prezentowane są w nowych liniach (za wyjątkiem podpola 10). +
Jeżeli podpole jest puste, wówczas całe podpole, łącznie z etykietą nie jest w pliku prezentowane. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Etykieta* |*Status* |*Format* |*Opis*
|<10 |M |10n |Numer referencyjny

              Kolejny numer operacji na rachunku

              np. <1024755

|<20 |O |35x |Tytuł operacji - linia1
|<21 |O |35x |Tytuł operacji - linia2
|<22 |O |35x |Tytuł operacji - linia3
|<23 |O |35x |Tytuł operacji - linia4
|<27 |M |35x |Nazwa kontrahenta - linia 1
|<28 |O |35x |Nazwa kontrahenta - linia 2
|<29 |O |35x |Adres kontrahenta (ulica)
|<30 |M |8x |Identyfikator jednostki bankowej kontrahenta (BSC lub SWIFT BIC). Dla identyfikatora jednostki banku w tym polu przedstawiane są znaki od 3 do 10
|<31 |M |16x |Identyfikator rachunku kontrahenta (skrócony) dla prezentacji. W przypadku rachunku NRB w tym polu przedstawiane są znaki od 11 do 26
|<38 |O |34x |Numer rachunku kontrahenta
|<60 |O |35x |Adres kontrahenta (miasto)
|<61 |O |34x |Numer rachunku kontrahenta (wirtualny)
|====================

[underline]##Przykładowe dane dla pola **86**:##

[source, txt]
----
:86:<103
<20wpłata gotowkowa
<27JAN
<28TEST
<29TESTOWA 6/16
<3086420002
<3833864200023001840003580001
<6085-666 MIASTO
<6107864210708002000000000001
----

[underline]##Poniżej przedstawiono przykład pliku eksportu wyciągów w formacie MT940_WIRT:##

[source, txt]
----
:20:191018/368
:25:/PL35910100032002000003680002
:28C:16/2019
:60F:C191018PLN25777,03
:61:1910181018D1,25
:86:<101
<20cykliczne wlasne (przelew testowy w
<21lasny)
<27IMIE TESTOWE ul. TESTOWA 2/B 23-
<28456 MIEJSCOWOSC
<3091010003
<312002000003680001
<3862910100032002000003680001
:61:1910181018C5,26
:86:<102
<20wlasny
<27NAZWA TESTOWA ul. TESTOWA 1/A 12-
<28345 MIEJSCOWOSC
<3091010003
<312002000003670005
<3803910100032002000003670005
:62F:C191018PLN25781,04
----

==== Plik w formacie CSV

Format CSV to format pliku tekstowego, który może być używany do wymiany danych arkusza kalkulacyjnego między aplikacjami. Każdy wiersz w tekstowym pliku CSV reprezentuje wiersz arkusza kalkulacyjnego. Każda komórka wiersza arkusza kalkulacyjnego rozdzielona jest średnikiem. Każdy rekord zakończony jest znakiem końca linii <CRLF>.

Opis poszczególnych kolumn dla eksportu wyciągów w formacie CSV:

* Lp. - liczba porządkowa operacji,
* Data - data księgowania operacji w standardzie RRRR-MM-DD, gdzie RRRR oznacza rok, MM oznacza miesiąc, DD oznacza dzień,
* Typ operacji - nazwa klienta lub domyślna nazwa dla odpowiedniego kodu typu operacji,
* Numer bank - numer banku w zależności od kierunku transakcji (odbiorcy lub nadawcy), w przypadku braku odpowiedniej wartości, wartość wyliczana/brana na podstawie numeru rachunku,
* Numer rachunku - dla obciążenia - rachunek odbiorcy, dla uznania - rachunek nadawcy; w standardzie NRB, wartość ujęta w apostrofy,
* Kwota transakcji - wartość kwoty transakcji,
* Kierunek transakcji - D - Debit obciążenie, C - Credit uznanie,
* Waluta - waluta transakcji,
* Nazwa1 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 1,
* Nazwa2 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 2,
* Nazwa3 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 3,
* Nazwa4 - nazwa odbiorcy dla obciążenia, nazwa nadawczy dla uznania, linia 4,
* Tytuł1 - opis operacji, linia 1,
* Tytuł2 - opis operacji, linia 2,
* Tytuł3 - opis operacji, linia 3,
* Tytuł4 - opis operacji, linia 4.

[underline]##Przykład pliku eksportu wyciągów w formacie CSV:##

[source, txt]
----
1;2018-03-22;wlasny;88090005;'60880900052001000278010004';2,00;C;PLN;FIRMA 1 TEST 11-111 TEST;;;;tutul testowy;;
2;2018-03-22;wlasny;88090005;'87880900052001000278010003';2,00;C;PLN;FIRMA 1 TEST 11-111 TEST;;;;test;;
3;2018-03-22;Zerwanie lokaty:DEPOZYT STAND.ZMIEN NA STOPA PROCENTOWA;88090005;'71880900054001000278010007';106,00;C;PLN;FIRMA 1;;;;Zerwanie lokaty:DEPOZYT STAND.ZMIEN NA STOPA PROCENTOWA;;
----

==== Plik w formacie JPK_WB

Struktura wyciągu w formacie JPK_WB dostosowana jest do formatu udostępnionego przez Ministerstwo Finansów (styczeń 2019).
Format eksportowanego pliku jest zgodny z publikowanym przez MF plikiem XSD (http://crd.gov.pl/xml/schematy/dziedzinowe/mf/2022/01/05/eD/KodyUrzedowSkarbowych/KodyUrzedowSkarbowych_v8-0E.xsd)

Struktura składa się z następujących sekcji danych:

1. *Naglowek* – z danymi dotyczącymi Jednolitego Pliku Kontrolnego (cel złożenia, okres którego dotyczy);
2. *Podmiot1* – z danymi identyfikującymi podmiot, który przekazuje JPK (NIP, nazwa podmiotu, REGON oraz dane adresowe);
3. *NumerRachunku* – numer rachunku w formacie IBAN.
4. *Salda* - z danymi o saldzie początkowym i saldzie końcowym;
5. *WyciagWiersz* - ze szczegółowymi zapisami danego wyciągu bankowego;
6. *WyciagCtrl* – z danymi nt. sum kontrolnych dla wyciągu bankowego.


Każde powtórzenie tagów <WyciagWiersz> ... </WyciagWiersz> jest traktowane jako kolejna operacja z wyciągu.

W przypadku, gdy nie zostanie wskazany Urząd Skarbowy w menu Ustawienia -> Dane firmy  lub wymagane dane firmy nie są uzupełnione, system wyświetla komunikat informacyjny o konieczności uzupełnienia danych.

Wyciągi w formacie JPK_WB mogą być generowane do rachunków bieżących, nie można wygenerować  takich wyciągów z lokat terminowych.

[underline]##Poniżej przedstawiono przykład pliku eksportu wyciągu w formacie JPK_WB:##

[source, xml]
----
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<JPK xmlns="http://jpk.mf.gov.pl/wzor/2016/03/09/03092/" xmlns:ns2="http://crd.gov.pl/xml/schematy/dziedzinowe/mf/2016/01/25/eD/DefinicjeTypy/">
    <Naglowek>
        <KodFormularza kodSystemowy="JPK_WB (1)" wersjaSchemy="1-0">JPK_WB</KodFormularza>
        <WariantFormularza>1</WariantFormularza>
        <CelZlozenia>1</CelZlozenia>
        <DataWytworzeniaJPK>2025-07-17T11:11:20.893</DataWytworzeniaJPK>
        <DataOd>2022-08-31</DataOd>
        <DataDo>2022-08-31</DataDo>
        <DomyslnyKodWaluty>PLN</DomyslnyKodWaluty>
        <KodUrzedu>1271</KodUrzedu>
    </Naglowek>
    <Podmiot1>
        <IdentyfikatorPodmiotu>
            <ns2:NIP>1234567890</ns2:NIP>
            <ns2:PelnaNazwa>FIRMA X</ns2:PelnaNazwa>
            <ns2:REGON>11111111111111</ns2:REGON>
        </IdentyfikatorPodmiotu>
        <AdresPodmiotu>
            <ns2:KodKraju>PL</ns2:KodKraju>
            <ns2:Wojewodztwo>PODKARPACKIE</ns2:Wojewodztwo>
            <ns2:Powiat>rzeszowski</ns2:Powiat>
            <ns2:Gmina>Krasne</ns2:Gmina>
            <ns2:Ulica>UL. JESIENNA</ns2:Ulica>
            <ns2:NrDomu>2A</ns2:NrDomu>
            <ns2:Miejscowosc>Krasne</ns2:Miejscowosc>
            <ns2:KodPocztowy>11-111</ns2:KodPocztowy>
            <ns2:Poczta>Krasne</ns2:Poczta>
        </AdresPodmiotu>
    </Podmiot1>
    <NumerRachunku>PL02880900052001000260420001</NumerRachunku>
    <Salda>
        <SaldoPoczatkowe>66137.54</SaldoPoczatkowe>
        <SaldoKoncowe>66003.05</SaldoKoncowe>
    </Salda>
    <WyciagWiersz typ="G">
        <NumerWiersza>1</NumerWiersza>
        <DataOperacji>2022-08-31</DataOperacji>
        <NazwaPodmiotu>FIRMA X</NazwaPodmiotu>
        <OpisOperacji>Depozyt standardowy</OpisOperacji>
        <KwotaOperacji>199.99</KwotaOperacji>
        <SaldoOperacji>65937.55</SaldoOperacji>
    </WyciagWiersz>
    <WyciagWiersz typ="G">
        <NumerWiersza>2</NumerWiersza>
        <DataOperacji>2022-08-31</DataOperacji>
        <NazwaPodmiotu>FIRMA X</NazwaPodmiotu>
        <OpisOperacji>DEPOZYT STAND.ZMIENNA STOPA PROCENTOWA</OpisOperacji>
        <KwotaOperacji>22</KwotaOperacji>
        <SaldoOperacji>65959.55</SaldoOperacji>
    </WyciagWiersz>
    <WyciagWiersz typ="G">
        <NumerWiersza>3</NumerWiersza>
        <DataOperacji>2022-08-31</DataOperacji>
        <NazwaPodmiotu>FIRMA X</NazwaPodmiotu>
        <OpisOperacji>DEPOZYT STAND.ZMIENNA STOPA PROCENTOWA</OpisOperacji>
        <KwotaOperacji>45.2</KwotaOperacji>
        <SaldoOperacji>66004.75</SaldoOperacji>
    </WyciagWiersz>
    <WyciagWiersz typ="G">
        <NumerWiersza>4</NumerWiersza>
        <DataOperacji>2022-08-31</DataOperacji>
        <NazwaPodmiotu>FIRMA X</NazwaPodmiotu>
        <OpisOperacji>opł.za SMS aut.</OpisOperacji>
        <KwotaOperacji>1.7</KwotaOperacji>
        <SaldoOperacji>66003.05</SaldoOperacji>
    </WyciagWiersz>
    <WyciagCtrl>
        <LiczbaWierszy>4</LiczbaWierszy>
        <SumaObciazen>201.69</SumaObciazen>
        <SumaUznan>67.2</SumaUznan>
    </WyciagCtrl>
</JPK>
----

=== Struktura plików eksportu statusów przelewów

Eksport statusów opercaji możliwy jest wyłącznie z kontekstu firmowego.

==== Format XML

Do zestawienia brane są przelewy za wskazany okres w statusie ZR i OD (zakończony oraz odrzucone).

W formacie XML dozwolone są następujące tagi:

[cols="4,5",options="header",]
|===========================================================
|Tagi |Opis
|<statusy></statusy> |Otwiera i zamyka format eksportu w XML.
|<przelew num=”numer kolejny przelewu na liscie”></przelew> |Otwiera i zamyka dane dla jednej operacji.
|<status></status> |Otwiera i zamyka dane dla statusu przelewu.
|<modulo></modulo> |Modulo klienta.
|<rach_obc></rach_obc> |Numer rachunku obciążonego.
|<data_wpisu></data_wpisu> |Data wpisu przelewu.
|<data></data> |Data zlecenia.
|<id></id> |Identyfikator przelewu.
|<bank></bank> |Numer banku odbiorcy.
|<rachunek></rachunek> |Numer rachunku.
|<kwota></kwota> |Kwota operacji.
|<waluta></waluta> |Waluta operacji.
|<referencje></referencje> |Referencje użytkownika.
|<nazwa1></nazwa1> |Nazwa odbiorcy (dla strony Wn) lub nadawcy (dla strony Ma) -linia1.
|<nazwa2></nazwa2> |Nazwa odbiorcy – linia 2.
|<nazwa3></nazwa3> |Nazwa odbiorcy – linia 3.
|<nazwa4></nazwa4> |Nazwa odbiorcy – linia 4.
|<tresc_1></tresc_1> |Opis operacji – linia 1.
|<tresc_2></tresc_2> |Opis operacji – linia 2.
|<tresc_3></tresc_3> |Opis operacji – linia 3.
|<tresc_4></tresc_4> |Opis operacji – linia 4.
|<nip_odb></nip_odb> |NIP odbiorcy.
|===========================================================

Każde powtórzenie tagów <przelew num=”numer kolejny przelewu na liscie”> ... </przelew> jest traktowane jako kolejna operacja z zestawienia.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji z historii rachunku w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="iso-8859-2"?>
<statusy>
<przelew num=”1”>
<status>ZR</status>
<modulo>10346</modulo>
<nip_odb>5220003782</nip_odb>
<rach_obc>81109010149686093527917834</rach_obc>
<data_wpisu>2019-07-10</data_wpisu>
<data>2019-07-10</data>
<id>5257</id>
<bank>10101078</bank>
<rachunek>93101010780000262221000000</rachunek>
<kwota>15.18</kwota>
<waluta>PLN</waluta>
<referencje>Ref</referencje>
<nazwa1>CIT,Pierwszy Urzad Skarbowy Bydgoszcz</nazwa1>
<tresc1>/TI/IDD5040251</tresc1>
<tresc2>/OKR/02D0319/SFP/CIT</tresc2>
<tresc3>/TXT/as</tresc3>
</przelew>
</statusy>
----

==== Format liniowy

Do zestawienia brane są przelewy za wskazany okres w statusie ZR i OD (zakończone oraz odrzucone).

W pliku eksportu zestawienia operacji z historii rachunku w formacie liniowym informacja o pojedynczej operacji zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających poszczególne dane operacji. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury zdefiniowanym w pliku _schema.ini_. Pola oddzielone są separatorem (określonym w pliku "schema.ini") lub są stałej długości.

Dopuszczalny zestaw pól opisujących dane operacji wraz z formatem danych dla każdego pola przedstawiono w poniższej tabeli.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, +
*C* - pole tekstowe, +
*D* - data w formacie RRRR-MM-DD, gdzie RRRR - rok, MM - miesiąc, DD - dzień, (np. 2010-04-01), +
*K* - pole zawierające kwotę. Kwota w formacie Zł.GR. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|REFERENCJE |16 |C |Referencje przelewu
|STATUS |2 |C |Status przelewu
|BLAD |80 |C |Opis błędu w przelewie
|DATA_WPISU |10 |C |Data ostatniej edycji przelewu
|ID |10 |C |Unikalny identyfikator przelewu w systemie
|RACH_OBC |34 |C |Numer rachunku do obciążenia kwotą przelewu
|WALUTA |3 |C |Waluta rachunku obciążanego
|NAZWA1 |35 |C |Nazwa kontrahenta - część 1
|NAZWA2 |35 |C |Nazwa kontrahenta - część 2
|NAZWA3 |35 |C |Nazwa kontrahenta - część 3
|NAZWA4 |35 |C |Nazwa kontrahenta - część 4
|RACHUNEK |34 |C |Numer rachunku kontrahenta
|KWOTA |12/2 |K |Kwota przelewu
|TRESC1 |35 |C |Treść operacji - część 1
|TRESC2 |35 |C |Treść operacji - część  2
|TRESC3 |35 |C |Treść operacji - część  3
|TRESC4 |35 |C |Treść operacji - część  4
|DATA |10 |D |Data zlecenia
|NIP_ODB |10 |C |NIP odbiorcy
|====================

[underline]##Przykładowy opis struktury dla pliku z danymi o statusach operacji:##

[source, txt]
----
[statusy_lin.txt]
ColNameHeader=False
Format=Delimited(;)
MaxScanRows=25
CharacterSet=OEM
Col1=REFERENCJE Char Width 16
Col2=STATUS Char Width 2
Col3=BLAD Char Width 80
Col4=DATA_WPISU Char Width 10
Col5=ID Char Width 10
Col6=RACH_OBC Char Width 34
Col7=WALUTA Char Width 3
Col8=NAZWA1 Char Width 35
Col9=NAZWA2 Char Width 35
Col10=NAZWA3 Char Width 35
Col11=NAZWA4 Char Width 35
Col12=RACHUNEK Char Width 34
Col13=KWOTA Float
Col14=TRESC1 Char Width 35
Col15=TRESC2 Char Width 35
Col16=TRESC3 Char Width 35
Col17=TRESC4 Char Width 35
Col18=DATA Char Width 10
Col19=NIP_ODB Char Width 10
----

WARNING: Nazwy pól w opisie struktury powinny być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format=Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x - w poniższym przykładzie średnikiem.

Format=FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury _schema.ini_ mogą zostać pominięte.

Polskie znaki kodowane są w UTF-8.

Parametr ColNameHeader może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia parametru w pliku _schema.ini_, aplikacja przyjmuje domyślną wartość parametru - _False_.

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji z historii rachunku w formacie liniowym:##

[source, txt]
----

ReferencjeZwykly1;ZR;;2010-03-23;3983;70161011332003000069560004;PLN;Janina
Testowa;;;;51101010231234567890123456;0.10;faktura nr 12345;;;;2010-03-23;
;ZR;;2010-03-
23;3984;70161011332003000069560004;PLN;ZUS;;;;83101010230000261395100000;100.00
;/NIP/1111111111/TI/1AB1234567/TWP/A;/DKL/072006/NRD/01/DUT/2;;;2010-03-23;
Referencje;OD;Odrzucenie zlecenia przelewu z przyczyn technicznych;2010-03-
23;504;97161011332003000069560003;PLN;WIKTOR ;KOWALSKI ;TESTOWA 1;00-123
WARSZAWA;41862700012002300904890001;500.13;tresc1;tresc2;tresc3;tresc4;2010-
03-23;

----

==== Plik w formacie CSV

Format CSV to format pliku tekstowego, który może być używany do wymiany danych arkusza kalkulacyjnego między aplikacjami. Każdy wiersz w tekstowym pliku CSV reprezentuje wiersz arkusza kalkulacyjnego. Każda komórka wiersza arkusza kalkulacyjnego rozdzielona jest średnikiem. Każdy rekord zakończony jest znakiem końca linii <CRLF>.

Do zestawienia brane są przelewy za wskazany okres w statusie AN, OD i ZR (anulowane, odrzucone i zrealizowane).

Opis poszczególnych kolumn dla eksportu statusów opercaji w formacie CSV:
* Referencje - pole może być puste,
* Status - status operacji (AN - anulowany, OD - odrzucony, ZR - zrealizowany),
* Błąd - opis ostatniej błędnej realizacji (pole może być puste),
* Data wpisu - data wprowadzenia przelewu (w standardzie DD-MM-RRRR, gdzie RRRR oznacza rok, MM oznacza miesiąc, DD oznacza dzień),
* Numer rachunku - numer rachunku nadawcy; w standardzie NRB, wartość ujęta w apostrofy,
* ID - identyfikator płatności, 6. Numer rachunku - numer rachunku Użytkownika; w standardzie NRB, wartość ujęta w apostrofy,
* Waluta - waluta transakcji,
* Nazwa1 - dane odbiorcy, linia 1,
* Nazwa2 - dane odbiorcy, linia 2,
* Nazwa3 - dane odbiorcy, linia 3,
* Nazwa4 - dane odbiorcy, linia 4,
* Numer rachunku - numer rachunku odbiorcy; w standardzie NRB, wartość ujęta w apostrofy,
* Kwota - wartość kwoty operacji,
* Tytuł1 - opis operacji, linia 1,
* Tytuł2 - opis operacji, linia 2,
* Tytuł3 - opis operacji, linia 3,
* Tytuł4 - opis operacji, linia 4,
* Data - data realizacji operacji (w standardzie DD-MM-RRRR, gdzie RRRR oznacza rok, MM oznacza miesiąc, DD oznacza dzień).

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji z historii rachunku w formacie CSV:##

[source, txt]
----

;ZR;;2020-07-08;1822021;'43880900052001000278030001';PLN;Janina Testowa;;;;'48880900052001000278030008';1000;4;;;;2020-07-08;
;ZR;;2020-07-07;1822003;'45880900052001000277990001';PLN;Testowy Urząd Skarbowy;;Miasto;;'07101000712222174587369300';1;2020R;CIT;;;2020-07-07;
;ZR;;2020-07-07;1822001;'45880900052001000277990001';PLN;Testowy Urzad Skarbowy;;Miasto;;'07101000712222174587369300';1;2020R;CIT;;;2020-07-07;
;AN;;2020-07-07;1822002;'45880900052001000277990001';PLN;Kamila Testowa;;;;'71193000051822663062452221';1;testowy;;;;2020-07-07;

----

=== Struktura plików eksportu operacji z analityki płatności masowych
==== Plik w formacie XML

W formacie XML dozwolone są następujące tagi:

[cols="4,5",options="header",]
|===========================================================
|Tagi |Opis
|<operacje></operacje>  |Otwiera i zamyka format eksportu w XML.
|<operacja num="numer kolejny operacji na liscie"></operacja> |Otwiera i zamyka dane dla jednej operacji.
|<id></id> |Numeracja.
|<data_waluty></data_waluty> |Data waluty.
|<rodzaj></rodzaj> |Rodzaj operacji.
|<rachunek_o></rachunek_o> |Nr rachunku odbiorcy (jeżeli brak to </rachunek_o>).
|<rachunek_n></rachunek_n> |Nr rachunku nadawcy (jeżeli brak to <rachunek_n></rachunek_n>).
|<kwota></kwota> |Kwota operacji.
|<strona></strona> |Strona operacji.
|<waluta></waluta> |waluta rachunku obciążanego (dla strony MA) lub uznawanego (dla strony WN).
|<nazwa1></nazwa1> |>nazwa odbiorcy (dla strony Wn) lub nadawcy (dla strony Ma) -linia1.
|<nazwa2></nazwa2> |Nazwa odbiorcy – linia 2.
|<nazwa3></nazwa3> |Nazwa odbiorcy – linia 3.
|<nazwa4></nazwa4> |Nazwa odbiorcy – linia 4.
|<tresc_1></tresc_1> |Opis operacji – linia 1.
|<tresc_2></tresc_2> |Opis operacji – linia 2.
|<tresc_3></tresc_3> |Opis operacji – linia 3.
|<tresc_4></tresc_4> |Opis operacji – linia 4.
|<data_ksiegowa></data_ksiegowa> |Data księgowa.
|===========================================================

Każde powtórzenie tagów <operacja> ... </operacja> jest traktowane jako kolejna operacja z zestawienia.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Przykładowa zawartość pliku eksportu operacji z analityki płatności masowych w formacie XML:##

[source, xml]
----
<?xml version="1.0" encoding="ISO-8859-2"?>
<operacje>
  <operacja num="1">
    <id>1</id>
    <data_waluty>2018-03-11</data_waluty>
    <rodzaj>Operacja wirtualna</rodzaj>
    <rachunek_o>69880900053232323000000009</rachunek_o>
    <rachunek_n>86880900052001000278030003</rachunek_n>
    <kwota>10.00</kwota>
    <strona>MA</strona>
    <waluta>PLN</waluta>
    <nazwa1>Janina Testowa</nazwa1>
    <tresc1>tutul testowy</tresc1>
  </operacja>
  <operacja num="2">
    <id>2</id>
    <data_waluty>2018-03-11</data_waluty>
    <rodzaj>Operacja wirtualna</rodzaj>
    <rachunek_o>2688090005323232300000000</rachunek_o>
    <rachunek_n></rachunek_n>
    <kwota>25.00</kwota>
    <strona>MA</strona>
    <waluta>PLN</waluta>
    <nazwa1>Katarzyna Testowa</nazwa1>
    <tresc1>przelew testowy</tresc1>
  </operacja>
</operacje>
----

==== Plik w formacie XML (format CEB)

W formacie XML (format CEB)  dozwolone są następujące tagi:

[cols="2,5",options="header",]
|===========================================================
|Tagi |Opis
|<RACH_WIRTUALNE></RACH_WIRTUALNE>  |Otwiera i zamyka format eksportu w XML.
|<RACH_WIRTUALNY num="1"> </RACH_WIRTUALNY> |Otwiera i zamyka dane dla jednego rachunku.
|<DATA_KS></DATA_KS> |Data księgowa.
|<DATA_WALUTY></DATA_WALUTY> |Data waluty.
|<NR_DOK></NR_DOK>| Nr dokumentu.
|<RACH_BENEF></RACH_BENEF> |Rachunek odbiorcy.
|<KWOTA></KWOTA> |Kwota.
|<ZLECENIODAWCA></ZLECENIODAWCA> |Zleceniodawca.
|<TYTUL></TYTUL> |Tytuł.
|===========================================================

Każde powtórzenie tagów  <RACH_WIRTULANY num=”1”> … <RACH_WIRTULANY> jest traktowane jako kolejna operacja z zestawienia.

Polskie znaki kodowane są w ISO 8859-2.

[underline]##Przykładowa zawartość pliku eksportu operacji z analityki płatności masowych w formacie XML (format CEB):##

[source, xml]
----
<?xml version="1.0" encoding="ISO-8859-2"?>
<RACH_WIRTUALNE>
<RACH_WIRTUALNY num="1">
<DATA_KS>2018-03-30</DATA_KS>
<DATA_WALUTY>2018-03-30</DATA_WALUTY>
<NR_DOK>4570</NR_DOK>
<RACH_BENEF>69880900053232323000000009</RACH_BENEF>
<KWOTA>4,53</KWOTA>
<ZLECENIODAWCA>FIRMA TEST</ZLECENIODAWCA>
<TYTUL>tytul testowy</TYTUL>
</RACH_WIRTUALNY>
<RACH_WIRTUALNY num="2">
<DATA_KS>2018-03-23</DATA_KS>
<DATA_WALUTY>2018-03-23</DATA_WALUTY>
<NR_DOK>186</NR_DOK>
<RACH_BENEF>69880900053232323000000009</RACH_BENEF>
<KWOTA>300,00</KWOTA>
<ZLECENIODAWCA>FIRMA TEST</ZLECENIODAWCA>
<TYTUL>tytul testowy </TYTUL>
</RACH_WIRTUALNY>
</RACH_WIRTUALNE>
----

==== Plik w formacie liniowym

W pliku eksportu operacji z analityki płatności masowych w formacie liniowym informacja o pojedynczej operacji zajmuje jedną linię (rekord) zakończoną znakami <CRLF>. Każda linia składa się z pól zawierających poszczególne dane operacji. Pola występują w pliku w określonej kolejności, zgodnie z opisem struktury zdefiniowanym w pliku _schema.ini_. Pola oddzielone są separatorem (określonym w pliku "schema.ini") lub są stałej długości.

Dopuszczalny zestaw pól opisujących dane operacji wraz z formatem danych dla każdego pola przedstawiono w poniższej tabeli.

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, +
*C* - pole tekstowe, +
*D* - data w formacie RRRR-MM-DD, gdzie RRRR - rok, MM - miesiąc, DD - dzień, (np. 2010-04-01), +
*K* - pole zawierające kwotę. Kwota w formacie Zł.GR. +

[width="100%",cols="4,3,3,10",options="header"]
|====================
|*Pole* |*Długość* |*Typ* |*Opis*
|NR_DOK |30 |N |Numer dokumentu
|DATA |10 |D |Data waluty
|DATA_WALUTY |10 |D |Data waluty (zamiennie dla DATA)
|DATA_KSIEGOWA |10 |D |Data księgowa
|RODZAJ |100 |C |Rodzaj operacji
|KWOTA |12/2 |K |Kwota operacji
|STRONA |1 |C |Strona operacji: WN (Winien), MA (Ma)
|WALUTA |3 |C |Waluta rachunku obciążanego (dla strony MA) lub uznawanego (dla strony WN)
|NAZWA1 |35 |C |Nazwa kontrahenta - wiersz 1
|NAZWA2 |35 |C |Nazwa kontrahenta - wiersz 2
|NAZWA3 |35 |C |Nazwa kontrahenta - wiersz 3
|NAZWA4 |35 |C |Nazwa kontrahenta - wiersz 4
|NAZWA_F |140 |C |Nazwa (połączone pola 1, 2, 3, 4)
|TRESC1 |35 |C |Treść operacji - wiersz 1
|TRESC2 |35 |C |Treść operacji - wiersz 2
|TRESC3 |35 |C |Treść operacji - wiersz 3
|TRESC4 |35 |C |Treść operacji - wiersz 4
|TRESC_F |140 |C |Treść (połączone pola 1, 2, 3, 4)
|====================

[underline]##Przykładowy opis struktury dla pliku z danymi operacji z analityki płatności masowych:##

[source, txt]
----
[operations_linear.txt]
ColNameHeader=False
Format=Delimited(;)
AmountFormat=,
MaxScanRows=25
CharacterSet=OEM
Col1=DATA_KSIEGOWA Char Width 10
Col2=DATA_WALUTY Char Width 10
Col3=NR_DOK Char Width 30
Col4=RODZAJ Char Width 20
Col5=KWOTA Float
Col6=RACHUNEK_N Char Width 34
Col7=STRONA Char Width 1
Col8=WALUTA Char Width 3
Col9=NAZWA1 Char Width 35
Col10=NAZWA2 Char Width 35
Col11=NAZWA3 Char Width 35
Col12=NAZWA4 Char Width 35
Col13=TRESC1 Char Width 35
Col14=TRESC2 Char Width 35
Col15=TRESC3 Char Width 35
Col16=TRESC4 Char Width 35
----

NOTE: Do struktury pliku linowego można dopisać pole: +
Col17=KONIEC_LINII Char Width 255 +
skutkować to będzie dodaniem na końcu każdego wiersza  separatora *;*

WARNING: Nazwy pól w opisie struktury powinny369613 być pisane dużymi literami.

Rodzaj separatora pól rekordu określa parametr Format.

Format=Delimited (x) oznacza, że pola rekordu oddzielone są znakiem x - w poniższym przykładzie średnikiem.

Format=FixedLength oznacza plik stałopozycyjny, w którym pola rekordu mają stałą długość. W takim przypadku konieczne jest określenie długości poszczególnych pól w opisie struktury.

AmountFormat umożliwia zdefiniowanie separatora kwoty (pozycja opcjonalna). W przypadku braku skonfigurowania znacznika zostanie zastosowany domyślny separator (dla formatu liniowego jest to kropka).
Wartość znacznika AmountFormat może zawierać wyłącznie jeden znak. W przypadku podania więcej niż jednego znaku system zgłosi błąd struktury.

Parametry MaxScanRows oraz CharacterSet zostały umieszczone w opisie struktury dla zachowania zgodności ze standardem ODBC. Parametry te są ignorowane przez aplikację Asseco EBP i w opisie struktury _schema.ini_ mogą zostać pominięte.

Polskie znaki kodowane są w ANSI.

Parametr ColNameHeader może przyjmować tylko wartość _False_. W przypadku wpisania innej wartości dla parametru lub pominięcia parametru w pliku _schema.ini_, aplikacja przyjmuje domyślną wartość parametru - _False_.

[underline]##Przykładowa zawartość pliku eksportu operacji z analityki płatności masowych w formacie liniowym:##

[source, txt]
----
2018-03-11;2018-03-23;2425;Operacja wirtualna;300,00;69880900053232323000000009;MA;PLN;FIRMA TESTOWA1;;;;testowy tytul;;;
2018-03-11;2018-03-11;2143;Operacja wirtualna;1,00;69880900053232323000000009;MA;PLN;FIRMA TESTOWA2;;;;wplata platnosci masowej;;;
----

==== Plik w formacie MT940

Plik eksportu operacji z analityki płatności masowych w formacie MT940 składa się z 3 sekcji: pierwszej, drugiej i czwartej.

Sekcje pierwsza i druga rozpoczynają się i kończą w pierwszej linii komunikatu. Również ich pola znajdują się w pierwszej linii pliku. Sekcja czwarta rozpoczyna się w pierwszej linii jednak każde jej pole umieszczone musi być w nowej linii – również zamknięcie sekcji czwartej znajduje się w nowej, ostatniej linii komunikatu. Sekcje otwierają i zamykają znaki klamry: '{' i '}'.

Polskie znaki kodowane są w ISO 8859-2.

Układ sekcji i ich pól (opis pól znajduje się w dalszej części dokumentacji) dla komunikatu MT940 jest następujący:

[source, txt]
----
{1:F01                     }{2:O940                                          N}{4:
:20:
:25:
:28:
:60F: (lub :60M:)
:61:
:86:
:62F: (lub :62M:)
-}
----
*Warunki budowania pliku:*

* przed każdą linią stosuje się ciąg znaków <CR><LF>

* żadna z linii nie może być pusta lub składać się z samej spacji,

* żadna z linii (z wyjątkiem ostatniej linii sekcji 4 oraz linii składowych pola :86:) nie może zaczynać się od znaku ‘-’ (myślnika),

* zestaw dopuszczalnych znaków SWIFT zawiera znaki: 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '/', '', '?', ':', '(', ')', '.', ',', ''', '+', '\{', '}', 'CR', 'LF', ' '.

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +
5*65s - do pięciu linii, każda po maksymalnie 65 dowolnych znaków SWIFT.

*Specyfikacja pól w pliku MT940*

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|F01 .2+<.^|Nagłówek sekcji 1 <.^|22!n |
Modulo Klienta.

Pole uzupełniane od tyłu spacjami do 22 znaków.

|[underline]##Przykład:## |‘**F01**123456 ’
.2+<.^|O940 .2+<.^|Nagłówek sekcji 2 <.^|42!nN |
Modulo Klienta poprzedzone 10 znakami spacji.

Pole uzupełniane od tyłu spacjami do 43 (razem z końcowym znakiem ‘N’).

Pierwsze 10 znaków to spacje. Ostatni znak to ‘N’.

|[underline]##Przykład:## |*‘0940* 123456 N’
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|6!c/9c |
Pierwszy ciąg znaków to data początkowa zestawienia w formacie RRMMDD.

Drugi ciąg znaków to modulo Klienta.

|[underline]##Przykład:## |‘:**20**:060302/123456’
.3+<.^|:25: .3+<.^|Identyfikator rachunku <.^|32n |Numer NRB rachunku.
|[underline]##Przykład 1:## |‘:**25**:12 3456 7890 1234 5678 9012 3456’
|[underline]##Przykład 2:## |‘:**25**:12345678901234567890123456’
.2+<.^|:28: .2+<.^|Numer zestawienia <.^|5c/3c a|
Pierwszy ciąg znaków to identyfikator zestawienia (w przykładzie ‘10’). Dla zestawienia nie posiadającego identyfikatora prezentowany jest ciąg pusty.

Drugi ciąg znaków to numer sekwencyjny kolejnych części zestawienia (w przykładzie ‘4’).

|[underline]##Przykład:## |‘:**28**:10/4’
.6+<.^|:60F: .6+<.^|Saldo początkowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola – łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego zestawienia operacji.
|[underline]##Przykład:## |‘:**60F**:C060302PLN12,34’
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k22!s4c

<CR><LF>20s

|Format całego pola - łącznie do 68 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|22!s4c |
Referencja operacji składająca się *ze stałego ciągu 22 znaków*: ‘FMSCNONREF //’ oraz liczby porządkowej operacji na zestawieniu.

Przykład: ‘FMSCNONREF //7’.

.4+<.^|:86: .4+<.^|Szczegóły operacji <.^|Oddzielne pole typu s
|Numer rachunku beneficjenta transakcji zakończony kombinacją znaków <CR><LF>.
|5*65s |
Nazwa kontrahenta i tytuł płatności (każdą linię poprzedza kombinacja znaków <CR><LF>).

Pole nie jest uzupełniane pustymi liniami ani znakami spacji.
|Oddzielne pole typu s
|Numer rachunku wirtualnego poprzedzony znakami // i zakończony kombinacją znaków <CR><LF>.
|[underline]##Przykład:##|
‘:**86**:12123456781234567890123456

Janina Testowa ul. Testowa 20tytul testowy//69880900053232323000000009

.6+<.^|:62F: .6+<.^|Saldo końcowe zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data końcowa zestawienia obrotów dziennych w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda końcowego zestawienia operacji.
|[underline]##Przykład:## |‘:**62**F:C060302PLN25,00’
.7+<.^|:60M:

(:62M:)

.7+<.^|Saldo początkowe (końcowe) części zestawienia ob. d. <.^|1!l6!c3!l15k |Format całego pola - łącznie do 25 znaków. Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|1!l |Strona - znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|6!c |Data początkowa (końcowa) części zestawienia operacji w formacie RRMMDD.
|3!l |Symbol waluty.
|15k |Kwota salda początkowego (końcowego) części zestawienia operacji.
|[underline]##Przykład 1:## |‘:**60M**:C060302PLN12,34’
|[underline]##Przykład 2:## |‘:**62M**:C060302PLN25,00’
|====================

[source, txt]
----
{1:F0127803                 }{2:O940          27803                           N}{4:
:20:000605/27803
:25:43880900052001000278030001
:28:
:60F:D000605PLN0,00
:61:1803110311C1,00FMSCNONREF          //1
:86:86880900052001000278030003
Janina Testowa ul. Testowa 20tytul testowy//69880900053232323000000009
:61:1803110311C1,00FMSCNONREF          //2
:86:
Katarzyna Testowaprzelew testowy//26880900053232323000000007
:62F:C200713PLN96160,87
-}
----

NOTE: W przypadku eksportu pliku z ANALITYKi zbiorczej, w pliku MT940 pominietę zostanie modulo.

==== Plik w formacie MT940/MultiCash

Plik eksportu operacji z analityki płatności masowych w formacie MT940/MultiCash posiada taka samą strukturę jak w przypadku struktury w formacie MT940 za wyjątkiem prezentacji dodatkowych danych w polu *86*.

Polskie znaki kodowane są w ISO 8859-2.

Poniżej zaprezentowano specyfikację podpól dla pola *:86:*

Założenia:

Pole *:86:* składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli.

Separatorem podpól jest znak <.

W przypadku, gdy podpole nie posiada wartości całe podpole (łącznie z etykietą) jest również prezentowane.

[cols="3,15",options="header",]
|================================================================================================================
|*Etykieta* |*Opis*
|<10 |Numer porządkowy
|<20 |Tytuł operacji – linia1
|<21 |Tytuł operacji – linia2
|<22 |Tytuł operacji – linia3
|<23 |Tytuł operacji – linia4
|<27 |Nazwa kontrahenta - beneficjenta dla zleceń wychodzących, zleceniodawcy dla zleceń przychodzących
|<28 |Nazwa kontrahenta - beneficjenta dla zleceń wychodzących, zleceniodawcy dla zleceń przychodzących
|<38 |Numer rachunku kontrahenta – beneficjenta dla zleceń wychodzących, zleceniodawcy dla zleceń przychodzących.
|<61 |Numer rachunku wirtualnego,
|================================================================================================================

[underline]##Przykład pliku eksportu operacji z analityki płatności masowych w formacie MT940/MulltiCash:##

[source, txt]
----
{1:F0100                   }{2:O940          100                             N}{4:
:20:170607/61506
:25:05156000132203000615060017
:28:/1
:60F:C170607PLN15,00
:61:1706070607C25,50FMSCNONREF         //1
:86:<101<20Naliczenie odsetek<21<22<23<27JAN TEST<28TEST<3805156000132203000615060017
:61:1706070607D5,00FMSCNONREF          //2
:86:<102<20Naliczenie odsetek<21<22<23<27JAN TEST<28TEST<38
:61:1706070607D1,88FMSCNONREF          //3
:86:<103<20tytul platnosci 1<21tytul platnosci 2<22tytul platnosci 3<23ty
tul platnosci 4<27Alicja Test<28Nazwa kontrahenta<38021560113
72108008635910001
:62F:C170607PLN10,00
-}
----

NOTE: W przypadku eksportu pliku z ANALITYKi zbiorczej, w pliku MT940/MultiCash pominietę zostanie modulo.

==== Plik w formacie MT942/Multicash

W pliku eksportu operacji z analityki płatności masowych w formacie MT942/Multicash mogą znajdować się operacje z kilku rachunków masowych. Plik eksportu w formacie MT942/Multicash składa się z 1 sekcji, podzielonej na bloki, których układ jest następujący:

Nagłówek operacji:


:20:
:25:
:13:

Blok operacji:
:61:
:86:

Format danych:
n - tylko cyfry +
a - tylko litery +
c - tylko znaki alfanumeryczne +
x - dowolne znaki alfanumeryczne łącznie z przecinkami, spacjami, itp. +
d - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘.’) +
Przykłady oznaczania formatu pól:
2n – maksymalnie 2 cyfry +
3!a – dokładnie 3 litery; +
4*35x - do 4 linii, każda po maksymalnie 35 dowolnych znaków alfanumerycznych

Specyfikacja pól w pliku MT942/Multicash:


[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.2+<.^|:20: .2+<.^|Numer referencyjny <.^|/9!c | Stała wartość STARTDISP
|[underline]##Przykład:##|Przykład: ':20:STARTDISP'
.2+<.^|:25: .2+<.^|Identyfikator rachunku <.^|2!a26!n    | Numer IBAN rachunku,  gdzie
IBAN=PLSSBBBBBBBBRRRRRRRRRRRRRRRR
PL- kod kraju długości 2!a
SS-cyfry kontrolne długości 2!n
BBBBBBBB-numer jednostki banku długości  8!n
RRRRRRRRRRRRRRRR-identyfikator rachunku w jednostce banku długości 16!n

|[underline]##Przykład:##|‘:25:PL51101010231234567890123456’

.2+<.^|:13: .2+<.^|Data i czas aktualizacji danych o operacjach <.^|10!n | Data i czas w formacie RRMMDDHHMM.
|[underline]##Przykład:##| ‘:13:0802080002’
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k
|Format całego pola - łącznie do 26 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!n |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|2a |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15d |Kwota operacji.
|[underline]##Przykład:##| :61:1803300330C4,53.
|:86: |Szczegóły operacji||Pole złożone z podpól, których szczegółowy opis zamieszczono poniżej
|====================

Specyfikacja podpól dla pola :86:

Założenia:

- Pole :86: składa się z podpól oznaczonych etykietami- zestaw podpól
zamieszczono w poniższej tabeli

- Separatorem podpól jest znak <

- Jeżeli podpole jest puste, wówczas całe podpole, łącznie z etykietą
nie jest w pliku prezentowane

Tabela operacji pola :86:

[width="100%",cols="8%,81%",options="header",]
|===
|*Pole* |*Opis*
|<00 |Typ operacji – wartość stała „Przelew przychodzący"

|<10 |Numer referencyjny. Kolejny numer operacji na rachunku
wirtualnym

|<20 |Tytuł operacji linia 1

|<21|Tytuł operacji linia 2

|<22|Tytuł operacji linia 3

|<23|Tytuł operacji linia 4

|<24|Tytuł operacji linia 5

|<25|Tytuł operacji linia 6

|<26|Tytuł operacji linia 7

|<27|Nazwa kontrahenta - linia 1

|<28|Nazwa kontrahenta - linia 2

|<29|Adres kontrahenta

|<30|
Identyfikator jednostki bankowej kontrahenta
|<31|Identyfikator rachunku kontrahenta
|<32|
Nazwa skrócona kontrahenta

|<33  |Pole nie jest uzupełniane

|<38|Rachunek kontrahenta

|<60|Adres kontrahenta (miasto)

|<61|Numer rachunku wirtualnego

|<63|Numer dokumentu dla każdego rachunku wirtualnego w danym
dniu

|<65|
Informacja o opłatach i prowizjach
|===

[underline]##Przykład pliku eksportu operacji z analityki płatności masowych w formacie MT942/Multicash:##

[source, txt]
----
:20:STARTDISP
:25:PL61193000051102990001160003
:13:2411201220
:61:2403160316C77,91
:86:
<00Przelew przychodzacy
<10
<20Polecenie przelewu test
<21treść ciąg dalszy trzecia linia
<22linia czwarta koniec tytułu.
<27TESTOWA JOANNA ul. TESTOWA 1/1
<283 31-000 RZESZÓW koniec adresu.
<312002000001040005
<3813193000052342000001040005
<6151193000051211000401111111
<63REF911991
----


==== Plik w formacie Elixir


Plik z eksporcie jest zapisany w formacie tekstowym. Każde zlecenie przelewu zajmuje jedną linię (jeden rekord) zakończoną znakiem <CRLF>.
Każdy rekord jest złożony z 17 pól. Pola są oddzielone separatorem. Separatorem jest przecinek. Pola występują w ustalonej kolejności, opisanej w części Struktura rekordu. Puste pola końcowe rekordu mogą zostać pominięte.
Znakiem podziału linii w obrębie pola jest znak „|”.
Polskie znaki są kodowane w ISO 8859-2.

[underline]##Struktura rekordu:##

Typy danych stosowane przy opisie pól: +
*N* - pole numeryczne, wartością jest liczba całkowita +
*D* - data w formacie RRRRMMDD, gdzie RRRR - rok, MM - miesiąc, DD - dzień (np. 20060501). +
*C* - pole tekstowe. Dozwolone znaki zgodne z wymaganiami systemu Elixir. Rozmiar pola 4*35 oznacza że pole może zawierać maksymalnie 4 linie po 35 znaków , nie wliczając znaków podziału linii. +
*K* - pole zawierające kwotę. Kwota wyrażona w groszach. Nie może zawierać żadnych separatorów dla części ułamkowej ani separatorów tysięcy. +


[width="100%",cols="4,5,4,10",options="header,footer"]
|====================
|*Kolejność pola w rekordzie* |*Pole wg Elixir* |*Format* |*Rozmiar*
|1 |Typ komunikatu |N |3
|2 |Data transakcji |D |8
|3 |Kwota |K |15
|4 |Numer rozliczeniowy banku zleceniodawcy|N |8
|5 |Numer rozliczeniowy banku odbiorcy / kontrahenta |N |8
|6 |Numer rachunku nadawcy |C |34
|7 |Numer rachunku beneficjenta wirtualny |C |34
|8 |Nazwa klienta nadawcy |C |4*35
|9 |Nazwa klienta adresata |C |4*35
|10 |Nr jednostki banku nadawcy |N |8
|11 |Nr jednostki banku odbiorcy |N |8
|12 |Tytuł płatności przelewu |C |4*35
|13 |Puste pole |- |-
|14 |Puste pole |- |-
|15 |Typ dokumentu |N |2
|16 |Puste pole |- |-
|17 |Puste pole |- |-
|====================


[underline]##Przykład pliku eksportu operacji z analityki płatności masowych w formacie Elixir:##

[source, txt]
----
112,20240317,9988,19300005,19300005,"13193000052002000099040005","51193000050009900401111111","","testowy odbiorca|||",19300005,19300005,"Testowe polecenie  przelewu |druga czesc |linia czwarta koniec tytułu.|","","","54","","",""
----

==== Plik w formacie MT942 (format CEB)

Plik eksportu pliku z analityki płatności masowych w formacie MT942 składa się z następujących pól:

[source, txt]
----
:20:
:25:
:13:
:61:
:86:<10
<20
<27
<61
<63
----

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +

**Specyfikacja pól w pliku MT942:**

:20: wartość stała: STARTDISP
:25: nr rachunku wirtualnego PL43880900052001000278030001
:13: data księgowania 1804020000

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
|:20: |Wartość stała: STARTDISP |9!l| Stały tekst STARTDISP.
|:25: |Rachunek wirtualny. |Oddzielne pole typu s |Numer rachunku wirtualnego głównego ze stałym tekstem PL oraz numerem NRB.
|:13: |Data księgowa. |10!c |Data księgowania w formacie RRMMDDHHmm.
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k
|Format całego pola - łącznie do 26 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|[underline]##Przykład:##| **:61:**1803300330C4,53.
|====================

Pole :86: składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli.

Separatorem podpól jest znak <.

W przypadku, gdy podpole nie posiada wartości całe podpole (łącznie z etykietą) jest również prezentowane.

[cols="3,15",options="header",]
|================================================================================================================
|*Etykieta* |*Opis*
|<10 |Numer porządkowy
|<20 |Tytuł
|<27 |Zleceniodawca
|<61 |Rachunek dłużnika (rachunek wirtualny)
|<63 |Numer dokumentu (np. REF4570)
|================================================================================================================

[underline]##Przykład pliku eksportu operacji z analityki płatności masowych w formacie MT942:##

[source, txt]
----
:20:STARTDISP
:25:PL43880900052001000278030001
:13:1804020000
:61:1804020402C3,44
:86:<101901526
<20tytul testowy
<27FIRMA TESTOWA
<6169880900053232323000000009
<63REF4570
:20:STARTDISP
:25:PL19880900052001000277970002
:13:1804020000
:61:1804020402C100,00
:86:<101901528
<20tytul testowy
<27FIRMA TESTOWA
<6169880900053232323000000009
<63REF186
----

NOTE: W przypadku wyboru formatu pliku eksportu na MT942 (format CEB) przycisk ANALITYKA z wszystkich rachunków nie będzie widoczny.

==== Plik MT942 zbiorczy (format CEB)

Plik eksportu pliku z analityki płatności masowych w formacie MT942 zbiorczy (format CEB) składa się z następujących pól:

[source, txt]
----
:61:
:86:<10
<20
<27
<61
<63
----

Użyte oznaczenia dla formatu danych w kolejnych polach: +
*c* - tylko cyfry. +
*n* - tylko cyfry i spacje. +
*l* - tylko litery. +
*z* - tylko litery i cyfry (c i l). +
*s* - wszystkie znaki dopuszczane przez SWIFT. +
*k* - liczba oznaczająca kwotę (separatorem dziesiętnym musi być przecinek ‘,’ a część dziesiętna musi zawsze być określona dwiema cyframi, np.: ‘12,25’ lub ‘1234,00’.

[underline]##Przykłady oznaczania formatu pól:## +
6c - maksymalnie sześć cyfr, +
5n - maksymalnie pięć cyfr wraz ze spacjami, np.: ’12 34’, lub ‘12345’. +
4!l - dokładnie 4 litery, +

[cols="2,6,3,10",options="header",]
|====================
|*Etykieta* |*Nazwa* |*Format* |*Opis*
.6+<.^|:61: .6+<.^|Szczegóły każdej operacji. <.^|6!c1!l15k
|Format całego pola - łącznie do 26 znaków (nie wliczając znaków nowej linii). Poniżej znajduje się opis w rozbiciu na poszczególne sekcje.
|6!c |Data waluty w formacie RRMMDD.
|4!n |Data księgowania w formacie MMDD.
|1!l |Strona – znak ‘C’ dla salda kredytowego lub znak ‘D’ dla salda debetowego.
|15k |Kwota operacji.
|[underline]##Przykład:##| **:61:**1803300330C4,53.
|====================

Pole :86: składa się z podpól oznaczonych etykietami - zestaw podpól zamieszczono w poniższej tabeli.

Separatorem podpól jest znak <.

W przypadku, gdy podpole nie posiada wartości całe podpole (łącznie z etykietą) jest również prezentowane.

[cols="3,15",options="header",]
|================================================================================================================
|*Etykieta* |*Opis*
|<10 |Numer porządkowy
|<20 |Tytuł
|<27 |Zleceniodawca
|<61 |Rachunek dłużnika (rachunek wirtualny)
|<63 |Stały tekst REF1
|================================================================================================================

[underline]##Przykład pliku eksportu operacji z analityki płatności masowych w formacie MT942 zbiorczy (format CEB):##

[source, txt]
----
:61:1804020402C3,44
:86:<101901526
<20tytul testowy
<27FIRMA TESTOWA
<6169880900053232323000000009
<63REF1
:61:1804020402C100,00
:86:<101901528
<20tytul testowy
<27FIRMA TESTOWA
<6169880900053232323000000009
<63REF1
----

==== Plik w formacie CSV

Format CSV to format pliku tekstowego, który może być używany do wymiany danych arkusza kalkulacyjnego między aplikacjami. Każdy wiersz w tekstowym pliku CSV reprezentuje wiersz arkusza kalkulacyjnego. Każda komórka wiersza arkusza kalkulacyjnego rozdzielona jest przecinkiem. Każdy rekord zakończony jest znakiem końca linii CRLF.
Plik zawiera wszystkie operacje wirtualne wchodzące w skład operacji masowej niezależnie od ilości(niezależnie również od stronicowania).
Dane w pliku są analogiczne do formularza prezentacji listy operacji wirtualnych:

* Lp. - liczba porządkowa operacji,

* Data - data waluty w systemie transakcyjnym w standardzie DD-MM-RRRR, gdzie RRRR oznacza rok, MM oznacza miesiąc, DD oznacza dzień,

* Typ operacji - Operacja wirtualna (wpis stały)

* Numer rozliczeniowy jednostki organizacyjnej banku (8 cyfr)

* Rachunek obciążany (nadawcy) w standardzie NRB, wartość ujęta w apostrofy,

* Rachunek wirtualny (odbiorcy) w standardzie NRB, wartość ujęta w apostrofy,

* Kwota operacji - wartość kwoty operacji,

* Strona operacji (MA) lub (WN)

* Waluta -  waluta operacji

* Nazwa1 - nazwa nadawcy, linia 1,

* Nazwa2 - nazwa nadawcy, linia 2,

* Nazwa3 - nazwa nadawcy, linia 3,

* Nazwa4 - nazwa nadawcy, linia 4,

* Tytuł1 - opis operacji, linia 1,

* Tytuł2 - opis operacji, linia 2,

* Tytuł3 - opis operacji, linia 3,

* Tytuł3 - opis operacji, linia 4,

[underline]##Poniżej przedstawiono przykład pliku eksportu operacji z analityki płatności masowych w formacie CSV:##

[source, txt]
----

1;2018-03-23;Operacja wirtualna;88090005;86880900052001000278030003';'69880900053232323000000009';300;MA;PLN;Janina Testowa;;;;tytul testowy
2;2018-03-23;Operacja wirtualna;88090005;86880900052001000278030003';'69880900053232323000000009';4;MA;PLN;Janina Testowa;;;;tytul testowy

----

== Mapowanie pól CEB/EBP w formcie liniowym

=== Format importu przelewów zwykłych oraz podatku


[cols=",",options="header",]
|===========================================================
2+|Przelewy zwykłe
|Pole w systemie CEB |Pole w systemie EBP
|RACH_OBC	|RACH_OBC
|REFERENCJE	|REFERENCJE
|NAZWA *	|NAZWA *
|NAZWA1	|NAZWA1
|NAZWA2	|NAZWA2
|NAZWA3	|NAZWA3
|NAZWA4	|NAZWA4
|RACHUNEK	|RACHUNEK
|KWOTA	|KWOTA
|TRESC1	|TYTUL1
|TRESC2	|TYTUL2
|TRESC3	|TYTUL3
|TRESC4	|TYTUL4
|DATA	|DATA
|===========================================================

*- Pole NAZWA lub NAZWA1, NAZWA2, NAZWA3, NAZWA4.

[cols=",",options="header",]
|===========================================================
2+|Przelewy z podzieloną płatnoscią (VAT)
|Pole w systemie CEB |Pole w systemie EBP
|RACH_OBC	|RACH_OBC
|REFERENCJE	|REFERENCJE
|NAZWA *	|NAZWA *
|NAZWA1	|NAZWA1
|NAZWA2	|NAZWA2
|NAZWA3	|NAZWA3
|NAZWA4	|NAZWA4
|RACHUNEK	|RACHUNEK
|KWOTA	|KWOTA
|TRESC1	|TYTUL1
|TRESC2	|TYTUL2 *
|TRESC3	|TYTUL3 *
|TRESC4	|TYTUL4 *
|DATA	|DATA *
|KWOTA_VAT	|KWOTA_VAT
|IDC	|IDC
|INV	|INV
|===========================================================

*- Pole NAZWA lub NAZWA1, NAZWA2, NAZWA3, NAZWA4.
*- Format daty dla EBP w formacie RRRR-MM_DD.
*- Podpola TYTUŁ1, 2, 3 obsługiwane również jako TYTUŁ1, TYTUŁ1, TYTUŁ1.

[cols=",",options="header",]
|===========================================================
2+|Przelewy podatkowe
|Pole w systemie CEB |Pole w systemie EBP
|RACH_OBC	|RACH_OBC
|NAZWA	|NAZWA
|RACHUNEK	|RACHUNEK
|KWOTA	|KWOTA
|TRESC	|brak obsługi
|brak obsługi	|REFERENCJE
|brak obsługi	|SYMBOL
|brak obsługi	|TYP
|brak obsługi	|IDENT
|brak obsługi	|OKRES_ROK
|brak obsługi	|OKRES_TYP
|brak obsługi	|OKRES_NUMER
|brak obsługi	|IDENT_ZOB
|brak obsługi	|DATA
|===========================================================

=== Format importu szablonów

[cols=",",options="header",]
|===========================================================
2+| Szablony przelewów
|Pole w systemie CEB |Pole w systemie EBP
|NAZWA_KR *	|NAZWA_KR *
|NAZWA1	|NAZWA1
|NAZWA2	|NAZWA2
|NAZWA3	|NAZWA3
|NAZWA4	|NAZWA4
|BANK	|brak obsługi
|RACHUNEK	|RACHUNEK
|KOD_SWIFT	|brak obsługi
|brak obsługi	|KWOTA
|brak obsługi	|TYTUL1
|brak obsługi	|TYTUL2
|brak obsługi	|TYTUL3
|brak obsługi	|TYTUL4
|===========================================================

*- Pole NAZWA_KR lub IDENT

[cols=",",options="header",]
|===========================================================
2+| Szablony przelewów walutowych
|Pole w systemie CEB |Pole w systemie EBP
|NAZWA_KR	|NAZWA_KR
|NAZWA1	|NAZWA1
|NAZWA2	|NAZWA2
|NAZWA3	|NAZWA3
|NAZWA4	|NAZWA4
|BANK	|brak obsługi
|RACHUNEK	|RACHUNEK
|KOD_SWIFT	|SWIFT
|brak obsługi	|KWOTA
|brak obsługi	|TYTUL1
|brak obsługi	|TYTUL2
|brak obsługi	|TYTUL3
|brak obsługi	|TYTUL4
|brak obsługi	|WALUTA
|brak obsługi	|KOSZTY
|===========================================================

=== Format eskportu wyciągów

[cols=",",options="header",]
|===========================================================
2+| Wyciągi
|Pole w systemie CEB |Pole w systemie EBP
|ID_TR_DEF	|ID
|DATA_WALUTY	|DATA_WALUTY
|DATA_TRANSAKCJI	|DATA_KSIEGOWA
|TRESC_D	|TRESC_D
|BANK	|BANK
|RACHUNEK	|RACHUNEK
|KWOTA	|KWOTA
|STRONA	|STRONA
|WALUTA	|WALUTA
|NAZWA1	|NAZWA1
|NAZWA2	|NAZWA2
|NAZWA3	|NAZWA3
|NAZWA4	|NAZWA4
|TRESC1	|TRESC1
|TRESC2	|TRESC2
|TRESC3	|TRESC3
|TRESC4	|TRESC4
|===========================================================

=== Format eksportu historii operacji

NOTE: Format eksportu histori operacji jest taki sam, jak format eksportu wyciągów.

=== Format eksportu statusów przelewów

[cols=",",options="header",]
|===========================================================
2+| Statusy przelewów
|Pole w systemie CEB |Pole w systemie EBP
|STATUS	|STATUS
|BLAD	|BLAD
|MODULO	|MODULO
|KONTO	|brak obsługi
|UWAGA	|brak obsługi
|NRB	|RACH_OBC
|DATA_WPISU	|DATA_WPISU
|DATA_ZLECENIA	|DATA
|ID	|ID
|REFERENCJE	|REFERENCJE
|BANK	|BANK
|RACHUNEK	|RACHUNEK
|KWOTA	|KWOTA
|WALUTA	|WALUTA
|NAZWA1	|NAZWA1
|NAZWA2	|NAZWA2
|NAZWA3	|NAZWA3
|NAZWA4	|NAZWA4
|TRESC1	|TRESC1
|TRESC2	|TRESC2
|TRESC3	|TRESC3
|TRESC4	|TRESC4
|NR_BLAD |brak obsługi
|===========================================================

=== Format eksportu analityk płatności masowych

[cols=",",options="header",]
|===========================================================
2+| Operacje z analityk płatności masowych
|Pole w systemie CEB |Pole w systemie EBP
|ID_TR	|ID
|DATA_KS	|DATA_KSIEGOWA
|DATA_WALUTY	|DATA_WALUTY
|NR_DOK	|NR_DOK
|RACH_BENEF	|RACHUNEK_N
|KWOTA	|KWOTA
|ZLECENIODAWCA	|NAZWA_F
|TYTUL	|TRESC_F
|===========================================================
